import{z as Y,v as j,A as M,B as R,q as G,F as H,G as N,w as q,x as A,y as L,H as W}from"./element-plus-CxSlioY7.js";import{c as J}from"./index-rRFGLrRk.js";import{G as K,D as O,U as Q}from"./cateManage-BpRs2yOz.js";import{a as X}from"./alova-Dc8ujYEb.js";import{r as f,E as Z,c as ee,a as te,v as a,Y as ae,W as o,j as n,e as oe,M as _,F as le,o as x,a6 as u,t as ne}from"./@vue-kKykbxn7.js";import"./dayjs-BZIFujmo.js";import"./@vueuse-Ds_1xoyw.js";import"./lodash-es-L85KEEkL.js";import"./@element-plus-CVcQ0kpg.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D_chPuIy.js";import"./normalize-wheel-es-BQoi3Ox2.js";/* empty css                      */import"./vue-router-2E4jhvu7.js";import"./@alova-Cz8T9Pb0.js";import"./pinia-BiPvFv_h.js";import"./highlight.js-DTDMDN_T.js";import"./@highlightjs-CGChwgod.js";import"./@kjgl77-Dnb-6Rt9.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./vxe-table-CidieOr-.js";import"./xe-utils-CkIl7JsB.js";import"./@vxe-ui-Cro8wKBv.js";import"./dom-zindex-DlWB42XF.js";import"./vxe-pc-ui-CyqLebZs.js";const ie={class:"flex flex-col h-full"},Ie={__name:"index",setup(se){const s=f(!1),i=f({attachment:[]}),{proxy:y}=Z(),{data:b,total:w,page:r,pageSize:m,loading:E,send:g}=X((e,t)=>K({page:e,pageSize:t}),{initialData:{total:0,data:[]},data:e=>(e==null?void 0:e.list)||[],initialPage:1,initialPageSize:10}),D=f({name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}),z=e=>{m.value=e},B=e=>{r.value=e},v=e=>{i.value={...e},s.value=!0},V=e=>{W({title:"提示",message:"确定要删除分类码?",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(async()=>{await O({id:e.id}),await g(),$message.success("删除成功")}).catch(()=>{})},h=()=>{y.$refs.formRef.validate(async e=>{if(e)try{await Q(i.value),s.value=!1,await g(),$message.success(i.value.id?"修改成功":"创建成功")}catch{}})};return(e,t)=>{const d=G,C=R,c=Y,p=H,k=M,$=N,S=L,U=A,F=q,I=J,P=j;return x(),ee(le,null,[te("div",ie,[a(c,{gutter:10},{default:o(()=>[a(C,{span:2},{default:o(()=>[a(d,{type:"primary",onClick:v},{default:o(()=>t[4]||(t[4]=[u("新增")])),_:1})]),_:1})]),_:1}),ae((x(),oe(k,{stripe:"",border:"",data:n(b),class:"my-[10px] flex-1"},{default:o(()=>[a(p,{type:"index",label:"序号",width:"80"}),a(p,{prop:"name",label:"分类名称","min-width":"180"}),a(p,{label:"操作时间","min-width":"180"},{default:o(({row:l})=>[u(ne(e.$dayjs(l.updatedAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),a(p,{label:"操作","min-width":"160",fixed:"right"},{default:o(({row:l})=>[a(d,{type:"primary",onClick:T=>v(l)},{default:o(()=>t[5]||(t[5]=[u("修改名称")])),_:2},1032,["onClick"]),a(d,{type:"danger",onClick:T=>V(l)},{default:o(()=>t[6]||(t[6]=[u("删除分类")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[P,n(E)]]),a(c,{justify:"end"},{default:o(()=>[a($,{"current-page":n(r),"onUpdate:currentPage":t[0]||(t[0]=l=>_(r)?r.value=l:null),"page-size":n(m),"onUpdate:pageSize":t[1]||(t[1]=l=>_(m)?m.value=l:null),"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next, jumper",total:n(w),onSizeChange:z,onCurrentChange:B},null,8,["current-page","page-size","total"])]),_:1})]),a(I,{modelValue:n(s),"onUpdate:modelValue":t[3]||(t[3]=l=>_(s)?s.value=l:null),title:n(i).id?`修改分类: ${n(i).id}`:"新增分类","destroy-on-close":"",onSubmit:h},{default:o(()=>[a(F,{"label-width":"100px",model:n(i),ref:"formRef",rules:n(D)},{default:o(()=>[a(c,{class:"my-[20px]"},{default:o(()=>[a(C,{span:12},{default:o(()=>[a(U,{label:"分类名称",prop:"name"},{default:o(()=>[a(S,{modelValue:n(i).name,"onUpdate:modelValue":t[2]||(t[2]=l=>n(i).name=l),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}};export{Ie as default};
