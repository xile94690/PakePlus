import{X as s}from"./xe-utils-CkIl7JsB.js";import{V as ue}from"./@vxe-ui-Cro8wKBv.js";import{D as Bi}from"./dom-zindex-DlWB42XF.js";import{w as yt,i as fl,h as g,d as Wo,r as $e,J as Mo,l as Ke,m as Ul,s as Gl,K as Yl,n as pe,ah as yn,b as Be,a4 as lc,z as nc,A as rc,p as sc,ae as ys}from"./@vue-kKykbxn7.js";function ft(e){return e&&e.enabled!==!1}function Rs(e){return e==null||e===""}function Vi(e){const l=e.name,i=s.lastIndexOf(l,"."),u=l.substring(i+1,l.length).toLowerCase();return{filename:l.substring(0,i),type:u}}function zi(){return Bi.getNext()}function ji(){return Bi.getCurrent()}function bn(e){return e&&e.children&&e.children.length>0}function hl(e,l){if(e){const i=ue.getConfig().translate;return s.toValueString(i?i(""+e,l):e)}return""}function ho(e,l){return""+(Rs(e)?l?ue.getConfig().emptyCell:"":e)}function cl(e){return e===""||s.eqNull(e)}const Ss="4.11.19";ue.version=Ss;ue.tableVersion=Ss;ue.setConfig({emptyCell:"　",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,minHeight:144,resizeConfig:{},resizableConfig:{dragMode:"auto",showDragTip:!0,isSyncAutoHeight:!0,isSyncAutoWidth:!0,minHeight:18},radioConfig:{strict:!0},rowDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},columnDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"beautify"},columnConfig:{maxFixedSize:4},cellConfig:{padding:!0},headerCellConfig:{height:"unset"},footerCellConfig:{height:"unset"},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0},drawerOptions:{mask:!0,lockView:!0,escClosable:!0,resize:!0}},sortConfig:{showIcon:!0,allowClear:!0,allowBtn:!0,iconLayout:"vertical"},filterConfig:{showIcon:!0},treeConfig:{rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0,mode:"fixed"},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0,selectCellByBody:!0,extendDirection:{top:!0,left:!0,bottom:!0,right:!0}},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},virtualXConfig:{enabled:!0,gt:60,preSize:0,oSize:1},virtualYConfig:{enabled:!0,gt:100,preSize:0,oSize:1},scrollbarConfig:{}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showResponseMsg:!0,showActiveMsg:!0,props:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{}});const St="vxe-table-icon-";ue.setIcon({TABLE_SORT_ASC:St+"caret-up",TABLE_SORT_DESC:St+"caret-down",TABLE_FILTER_NONE:St+"funnel",TABLE_FILTER_MATCH:St+"funnel",TABLE_EDIT:St+"edit",TABLE_TITLE_PREFIX:St+"question-circle-fill",TABLE_TITLE_SUFFIX:St+"question-circle-fill",TABLE_TREE_LOADED:St+"spinner roll",TABLE_TREE_OPEN:St+"caret-right rotate90",TABLE_TREE_CLOSE:St+"caret-right",TABLE_EXPAND_LOADED:St+"spinner roll",TABLE_EXPAND_OPEN:St+"arrow-right rotate90",TABLE_EXPAND_CLOSE:St+"arrow-right",TABLE_CHECKBOX_CHECKED:St+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:St+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:St+"checkbox-indeterminate-fill",TABLE_RADIO_CHECKED:St+"radio-checked-fill",TABLE_RADIO_UNCHECKED:St+"radio-unchecked",TABLE_CUSTOM_SORT:St+"drag-handle",TABLE_MENU_OPTIONS:St+"arrow-right",TABLE_DRAG_ROW:St+"drag-handle",TABLE_DRAG_COLUMN:St+"drag-handle",TABLE_DRAG_STATUS_ROW:St+"sort",TABLE_DRAG_STATUS_SUB_ROW:St+"add-sub",TABLE_DRAG_STATUS_COLUMN:St+"swap",TABLE_DRAG_DISABLED:St+"no-drop",TOOLBAR_TOOLS_REFRESH:St+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:St+"repeat roll",TOOLBAR_TOOLS_IMPORT:St+"upload",TOOLBAR_TOOLS_EXPORT:St+"download",TOOLBAR_TOOLS_PRINT:St+"print",TOOLBAR_TOOLS_FULLSCREEN:St+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:St+"minimize",TOOLBAR_TOOLS_CUSTOM:St+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:St+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:St+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:St+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:St+"fixed-right-fill"});const ic=ue.setTheme,ac=ue.getTheme,cc=ue.setConfig,dc=ue.getConfig,uc=ue.setIcon,fc=ue.getIcon,pc=ue.setLanguage,hc=ue.setI18n,gc=ue.getI18n,mc=ue.globalEvents,bc=ue.globalResize,xc=ue.renderer,vc=ue.validators,Cc=ue.menus,wc=ue.formats,Ec=ue.commands,yc=ue.interceptor,Rc=ue.clipboard,Sc=ue.log,Oc=ue.hooks,Mc=ue.use,Ni=e=>ue.setConfig(e);ue.setup=Ni;const _i=e=>ue.setConfig(e);ue.config=_i;const Wi=(e,l)=>ue.getI18n(e,l);ue.t=Wi;const qi=(e,l)=>hl(e,l);ue._t=qi;const Dc=ue,Tc=e=>ue.saveFile(e),Fc=e=>ue.readFile(e),Ic=e=>ue.print(e),kc={get(e){return ue.modal.get(e)},close(e){return ue.modal.close(e)},open(e){return ue.modal.open(e)},alert(e,l,i){return ue.modal.alert(e,l,i)},confirm(e,l,i){return ue.modal.confirm(e,l,i)},message(e,l){return ue.modal.message(e,l)},notification(e,l,i){return ue.modal.notification(e,l,i)}},{log:Xi}=ue,Ki="table v4.11.19",Rt=Xi.create("warn",Ki),Ye=Xi.create("error",Ki),{getI18n:Ac,formats:ei}=ue;class vs{constructor(l,i,{renderHeader:u,renderCell:w,renderFooter:b,renderData:y}={}){const D=l.xegrid,B=i.formatter,p=s.isBoolean(i.visible)?i.visible:!0,{props:c}=l,v=["seq","checkbox","radio","expand","html"];if(i.type&&v.indexOf(i.type)===-1&&Rt("vxe.error.errProp",[`type=${i.type}`,v.join(", ")]),(s.isBoolean(i.cellRender)||i.cellRender&&!s.isObject(i.cellRender))&&Rt("vxe.error.errProp",[`column.cell-render=${i.cellRender}`,"column.cell-render={}"]),(s.isBoolean(i.editRender)||i.editRender&&!s.isObject(i.editRender))&&Rt("vxe.error.errProp",[`column.edit-render=${i.editRender}`,"column.edit-render={}"]),i.type==="expand"){const{treeConfig:N}=c,{computeTreeOpts:G}=l.getComputeMaps(),K=G.value;N&&(K.showLine||K.line)&&Ye("vxe.error.errConflicts",["tree-config.showLine","column.type=expand"])}if(B){if(s.isString(B)){const N=ei.get(B)||s[B];(!N||!s.isFunction(N.tableCellFormatMethod||N.cellFormatMethod))&&Ye("vxe.error.notFormats",[B])}else if(s.isArray(B)){const N=ei.get(B[0])||s[B[0]];(!N||!s.isFunction(N.tableCellFormatMethod||N.cellFormatMethod))&&Ye("vxe.error.notFormats",[B[0]])}}if(Object.assign(this,{type:i.type,property:i.field,field:i.field,title:i.title,width:i.width,minWidth:i.minWidth,maxWidth:i.maxWidth,resizable:i.resizable,fixed:i.fixed,align:i.align,headerAlign:i.headerAlign,footerAlign:i.footerAlign,showOverflow:i.showOverflow,showHeaderOverflow:i.showHeaderOverflow,showFooterOverflow:i.showFooterOverflow,className:i.className,headerClassName:i.headerClassName,footerClassName:i.footerClassName,formatter:B,footerFormatter:i.footerFormatter,padding:i.padding,verticalAlign:i.verticalAlign,sortable:i.sortable,sortBy:i.sortBy,sortType:i.sortType,filters:Qi(i.filters),filterMultiple:s.isBoolean(i.filterMultiple)?i.filterMultiple:!0,filterMethod:i.filterMethod,filterResetMethod:i.filterResetMethod,filterRecoverMethod:i.filterRecoverMethod,filterRender:i.filterRender,treeNode:i.treeNode,dragSort:i.dragSort,rowResize:i.rowResize,cellType:i.cellType,cellRender:i.cellRender,editRender:i.editRender,contentRender:i.contentRender,headerExportMethod:i.headerExportMethod,exportMethod:i.exportMethod,footerExportMethod:i.footerExportMethod,titleHelp:i.titleHelp,titlePrefix:i.titlePrefix,titleSuffix:i.titleSuffix,params:i.params,id:i.colId||s.uniqueId("col_"),parentId:null,visible:p,halfVisible:!1,defaultVisible:p,defaultFixed:i.fixed,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:u||i.renderHeader,renderCell:w||i.renderCell,renderFooter:b||i.renderFooter,renderData:y,slots:i.slots}),D){const{computeProxyOpts:N}=D.getComputeMaps(),G=N.value;G.beforeColumn&&G.beforeColumn({$grid:D,column:this})}}getTitle(){return hl(this.title||(this.type==="seq"?Ac("vxe.table.seqTitle"):""))}getKey(){const{type:l}=this;return this.field||(l?`type=${l}`:null)}update(l,i){l!=="filters"&&(l==="field"&&(this.property=i),this[l]=i)}}const as={},Fr=s.browse();let xn;function Yi(){return xn||(xn=new Image,xn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),xn}function Cs(){return xn||Yi()}function kl(e,l){return e?s.isFunction(e)?e(l):e:""}function Ui(e){return as[e]||(as[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),as[e]}function Gi(e,l,i){if(e){const u=e.parentNode;if(i.top+=e.offsetTop,i.left+=e.offsetLeft,u&&u!==document.documentElement&&u!==document.body&&(i.top-=u.scrollTop,i.left-=u.scrollLeft),!(l&&(e===l||e.offsetParent===l))&&e.offsetParent)return Gi(e.offsetParent,l,i)}return i}function ws(e){return e&&/^\d+(px)?$/.test(e)}function gn(e){return e&&/^\d+%$/.test(e)}function pl(e,l){return e&&e.className&&e.className.match&&e.className.match(Ui(l))}function Po(e,l){e&&pl(e,l)&&(e.className=e.className.replace(Ui(l),""))}function Zo(e,l){e&&!pl(e,l)&&(Po(e,l),e.className=`${e.className} ${l}`)}function Ir(e,l="px"){return s.isNumber(e)||/^\d+$/.test(`${e}`)?`${e}${l}`:`${e||""}`}function $r(){const e=document.documentElement,l=document.body;return{scrollTop:e.scrollTop||l.scrollTop,scrollLeft:e.scrollLeft||l.scrollLeft,visibleHeight:e.clientHeight||l.clientHeight,visibleWidth:e.clientWidth||l.clientWidth}}function Xn(e){return e?e.offsetHeight:0}function Es(e){if(e){const l=getComputedStyle(e),i=s.toNumber(l.paddingTop),u=s.toNumber(l.paddingBottom);return i+u}return 0}function qt(e,l){e&&(e.scrollTop=l)}function Kt(e,l){e&&(e.scrollLeft=l)}function Os(e,l){const i=l.type==="html"?e.innerText:e.textContent;e.getAttribute("title")!==i&&e.setAttribute("title",i)}function Ot(e,l,i,u){let w,b=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;b&&b.nodeType&&b!==document;){if(i&&pl(b,i)&&(!u||u(b)))w=b;else if(b===l)return{flag:i?!!w:!0,container:l,targetElem:w};b=b.parentNode}return{flag:!1}}function Lc(e,l){return Gi(e,l,{left:0,top:0})}function Mr(e){const l=e.getBoundingClientRect(),i=l.top,u=l.left,{scrollTop:w,scrollLeft:b,visibleHeight:y,visibleWidth:D}=$r();return{boundingTop:i,top:w+i,boundingLeft:u,left:b+u,visibleHeight:y,visibleWidth:D}}const ti="scrollIntoViewIfNeeded",oi="scrollIntoView";function Hc(e){e&&(e[ti]?e[ti]():e[oi]&&e[oi]())}function Pc(e,l){e&&e.dispatchEvent(new Event(l))}const Zi=(e,l)=>{const i=[];return e.forEach(u=>{u.parentId=l?l.id:null,u.visible&&(u.children&&u.children.length&&u.children.some(w=>w.visible)?(i.push(u),i.push(...Zi(u.children,u))):i.push(u))}),i},$c=e=>{let l=1;const i=(b,y)=>{if(y&&(b.level=y.level+1,l<b.level&&(l=b.level)),b.children&&b.children.length&&b.children.some(D=>D.visible)){let D=0;b.children.forEach(B=>{B.visible&&(i(B,b),D+=B.colSpan)}),b.colSpan=D}else b.colSpan=1};e.forEach(b=>{b.level=1,i(b)});const u=[];for(let b=0;b<l;b++)u.push([]);return Zi(e).forEach(b=>{b.children&&b.children.length&&b.children.some(y=>y.visible)?b.rowSpan=1:b.rowSpan=l-b.level+1,u[b.level-1].push(b)}),u};function cs(e,l,i){const u=e.internalData;return e.clearScroll().then(()=>{if(l||i)return u.lastScrollLeft=0,u.lastScrollTop=0,u.intoRunScroll=!1,u.inVirtualScroll=!1,u.inWheelScroll=!1,u.inHeaderScroll=!1,u.inBodyScroll=!1,u.inFooterScroll=!1,u.scrollRenderType="",e.scrollTo(l,i)})}function ds(){return s.uniqueId("row_")}function El(e){const{props:l}=e,{computeRowOpts:i}=e.getComputeMaps(),u=i.value;return`${l.rowId||u.keyField||"_X_ROW_KEY"}`}function Ce(e,l){const i=s.get(l,El(e));return Bc(i)}function Bc(e){return s.eqNull(e)?"":encodeURIComponent(e)}const lo=(e,l)=>l?s.isString(l)||s.isNumber(l)?e.getColumnByField(`${l}`):l:null,li=(e,l)=>{if(l){const i=s.isString(l)||s.isNumber(l)?l:Ce(e,l);return e.getRowById(i)}return null};function gr(e){if(e){const l=getComputedStyle(e),i=s.toNumber(l.paddingLeft),u=s.toNumber(l.paddingRight);return i+u}return 0}function an(e){if(e){const l=getComputedStyle(e),i=s.toNumber(l.marginLeft),u=s.toNumber(l.marginRight);return e.offsetWidth+i+u}return 0}function Cl(e,l){return e.querySelector(".vxe-cell"+l)}function Qi(e){return e&&s.isArray(e)?e.map(({label:l,value:i,data:u,resetValue:w,checked:b})=>({label:l,value:i,data:u,resetValue:w,checked:!!b,_checked:!!b})):e}function Vc(e){return e.map((l,i)=>i%2===0?Number(l)+1:".").join("")}function go(e,l){return s.get(e,l.field)}function dl(e,l,i){return s.set(e,l.field,i)}function Je(e){if(e){const l=e.value;if(l)return l.$el||l}return null}function Ji(e){return e==="unset"?0:e||0}function ni(e){const{$table:l,column:i,cell:u}=e,w=l.props,b=l.internalData,{computeResizableOpts:y}=l.getComputeMaps(),D=y.value,{minWidth:B}=D;if(B){const le=s.isFunction(B)?B(e):B;if(le!=="auto")return Math.max(1,s.toNumber(le))}const{elemStore:p}=b,{showHeaderOverflow:c}=w,{showHeaderOverflow:v,minWidth:N}=i,G=s.isUndefined(v)||s.isNull(v)?c:v,T=G==="title"||(G===!0||G==="tooltip")||G==="ellipsis",I=s.floor((s.toNumber(getComputedStyle(u).fontSize)||14)*1.6),j=gr(u)+gr(Cl(u,""));let te=I+j;if(T){const le=gr(Cl(u,">.vxe-cell--drag-handle")),C=gr(Cl(u,">.vxe-cell--checkbox")),O=an(Cl(u,">.vxe-cell--required-icon")),S=an(Cl(u,">.vxe-cell--edit-icon")),q=an(Cl(u,">.vxe-cell-title-prefix-icon")),Y=an(Cl(u,">.vxe-cell-title-suffix-icon")),ne=an(Cl(u,">.vxe-cell--sort")),X=an(Cl(u,">.vxe-cell--filter"));te+=le+C+O+S+q+Y+X+ne}if(N){const le=Je(p["main-body-scroll"]);if(le){if(gn(N)){const O=(le.clientWidth-1)/100;return Math.max(te,Math.floor(s.toInteger(N)*O))}else if(ws(N))return Math.max(te,s.toInteger(N))}}return te}function Dr(e){return e&&(e.constructor===vs||e instanceof vs)}function zc(e,l,i){return Dr(l)?l:fl(new vs(e,l,i))}function ea(e,l,i){Object.keys(l).forEach(u=>{yt(()=>l[u],w=>{i.update(u,w),e&&(u==="filters"?(e.setFilter(i,w),e.handleUpdateDataQueue()):["visible","fixed","width","minWidth","maxWidth"].includes(u)&&e.handleRefreshColumnQueue())})})}function ta(e,l,i,u){const{reactData:w}=e,{staticColumns:b}=w,y=l.parentNode,D=u?u.columnConfig:null,B=D?D.children:b;y&&B&&(B.splice(s.arrayIndexOf(y.children,l),0,i),w.staticColumns=b.slice(0))}function oa(e,l){const{reactData:i}=e,{staticColumns:u}=i,w=s.findTree(u,b=>b.id===l.id,{children:"children"});w&&w.items.splice(w.index,1),i.staticColumns=u.slice(0)}function ri(e,l){const{internalData:i}=e,{fullColumnIdData:u}=i;if(!l)return null;let w=l.parentId;for(;u[w];){const b=u[w].column;if(w=b.parentId,!w)return b}return l}const jc={mini:3,small:2,medium:1},la=(e,l)=>{let i=1;if(!e)return i;const{$table:u}=l,{computeTreeOpts:w}=u.getComputeMaps(),b=w.value,{transform:y,mapChildrenField:D}=b,B=b.children||b.childrenField,p=e[y?D:B];if(p&&u.isTreeExpandByRow(e))for(let c=0;c<p.length;c++)i+=la(p[c],l);return i},na=e=>{const{computeSize:l}=e.getComputeMaps(),i=l.value;return i&&jc[i]||0};function Nc(e,l){const{$table:i,row:u}=e,w=i.props,b=i.reactData,y=i.internalData,{showOverflow:D}=w,{scrollYLoad:B}=b,{fullAllDataRowIdData:p}=y,{computeRowOpts:c,computeCellOpts:v,computeDefaultRowHeight:N}=i.getComputeMaps(),G=c.value,K=v.value,V=N.value,_=Ce(i,u),T=p[_],I=T.resizeHeight||K.height||G.height||T.height||V;let j=1;l&&(j=la(l,e));let te=I;const le=T.height;return B&&(D||(te=le||I)),te*j-(l?1:12-na(i))}function ra(e,l,i){for(let u=0;u<e.length;u++){const{row:w,col:b,rowspan:y,colspan:D}=e[u];if(b>-1&&w>-1&&y&&D){if(w===l&&b===i)return{rowspan:y,colspan:D};if(l>=w&&l<w+y&&i>=b&&i<b+D)return{rowspan:0,colspan:0}}}}function _c(e){const{props:l,internalData:i}=e;return i.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearPendingRow(),e.clearFilter&&e.clearFilter(),e.clearSelected&&(l.keyboardConfig||l.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&l.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}function Wc(e){return e.clearFilter&&e.clearFilter(),_c(e)}function si(e,l){const i=e.props,u=e.reactData,w=e.internalData,{computeLeftFixedWidth:b,computeRightFixedWidth:y,computeRowOpts:D,computeCellOpts:B,computeDefaultRowHeight:p}=e.getComputeMaps(),{showOverflow:c}=i,{scrollYLoad:v}=u,{elemStore:N,afterFullData:G,fullAllDataRowIdData:K,isResizeCellHeight:V}=w,_=D.value,T=B.value,I=p.value,j=b.value,te=y.value,le=Je(N["main-body-scroll"]),C=Ce(e,l);if(le){const O=le.clientHeight,S=le.scrollTop,q=le.querySelector(`[rowid="${C}"]`);if(q){const Y=q.offsetParent,ne=q.offsetTop+(Y?Y.offsetTop:0),X=q.clientHeight;if(ne<S||ne>S+O)return e.scrollTo(null,ne);if(ne+X>=O+S)return e.scrollTo(null,S+X)}else if(v){if(!(V||T.height||_.height)&&c)return e.scrollTo(null,(e.findRowIndexOf(G,l)-1)*I);let ne=0;const X=K[C]||{},ie=X.resizeHeight||T.height||_.height||X.height||I;for(let Re=0;Re<G.length;Re++){const me=G[Re],Ee=Ce(e,me);if(me===l||Ee===C)break;const Ve=K[Ee]||{};ne+=Ve.resizeHeight||T.height||_.height||Ve.height||I}return ne<S?e.scrollTo(null,ne-j-1):e.scrollTo(null,ne+ie-(O-te-1))}}return Promise.resolve()}function ii(e,l,i){const u=e.reactData,w=e.internalData,{computeLeftFixedWidth:b,computeRightFixedWidth:y}=e.getComputeMaps(),{scrollXLoad:D}=u,{elemStore:B,visibleColumn:p}=w,c=b.value,v=y.value,N=Je(B["main-body-scroll"]);if(l.fixed)return Promise.resolve();if(N){const G=N.clientWidth,K=N.scrollLeft;let V=null;if(i){const _=Ce(e,i);V=N.querySelector(`[rowid="${_}"] .${l.id}`)}if(V||(V=N.querySelector(`.${l.id}`)),V){const _=V.offsetParent,T=V.offsetLeft+(_?_.offsetLeft:0),I=V.clientWidth;if(T<K+c)return e.scrollTo(T-c-1);if(T+I-K>G-v)return e.scrollTo(T+I-(G-v-1))}else if(D){let _=0;const T=l.renderWidth;for(let I=0;I<p.length;I++){const j=p[I];if(j===l||j.id===l.id)break;_+=j.renderWidth}return _<K?e.scrollTo(_-c-1):e.scrollTo(_+T-(G-v-1))}}return Promise.resolve()}function Al(e){return"on"+e.substring(0,1).toLocaleUpperCase()+e.substring(1)}function sa(e){switch(e.name){case"input":case"textarea":return"input";case"select":return"change"}return"update:modelValue"}function ia(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeNumberInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function So(e){return e==null?[]:s.isArray(e)?e:[e]}const{getI18n:mr,getIcon:Gt,renderer:Zn,formats:ai,renderEmptyElement:Kl}=ue;function qc(e){const{$table:l,column:i}=e,u=i.titlePrefix||i.titleHelp;return u?g("i",{class:["vxe-cell-title-prefix-icon",u.icon||Gt().TABLE_TITLE_PREFIX],onMouseenter(w){l.triggerHeaderTitleEvent(w,u,e)},onMouseleave(w){l.handleTargetLeaveEvent(w)}}):Kl(l)}function Xc(e){const{$table:l,column:i}=e,u=i.titleSuffix;return u?g("i",{class:["vxe-cell-title-suffix-icon",u.icon||Gt().TABLE_TITLE_SUFFIX],onMouseenter(w){l.triggerHeaderTitleEvent(w,u,e)},onMouseleave(w){l.handleTargetLeaveEvent(w)}}):Kl(l)}function ci(e){const{$table:l,column:i}=e,{context:u}=l,w=u.slots,b=l.props,{slots:y}=i,{dragConfig:D}=b,{computeRowDragOpts:B}=l.getComputeMaps(),p=B.value,{icon:c,trigger:v,disabledMethod:N}=p,G=N||(D?D.rowDisabledMethod:null),K=G&&G(e),V=(y?y.rowDragIcon||y["row-drag-icon"]:null)||w.rowDragIcon||w["row-drag-icon"],_={};return v!=="cell"&&(_.onMousedown=T=>{K||l.handleCellDragMousedownEvent(T,e)},_.onMouseup=l.handleCellDragMouseupEvent),g("span",Object.assign({key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":K}]},_),V?l.callSlot(V,e):[g("i",{class:c||(D?D.rowIcon:"")||Gt().TABLE_DRAG_ROW})])}function yo(e,l){const{$table:i,column:u,level:w}=e,{dragSort:b}=u,y=i.props,{treeConfig:D,dragConfig:B}=y,{computeRowOpts:p,computeRowDragOpts:c,computeTreeOpts:v}=i.getComputeMaps(),N=p.value,G=c.value,K=v.value,{showIcon:V,isPeerDrag:_,isCrossDrag:T,visibleMethod:I}=G,j=I||(B?B.rowVisibleMethod:null),te=s.isArray(l)?l:[l];return b&&N.drag&&(V||B&&B.showRowIcon)&&(!j||j(e))&&(D?K.transform&&(_||T||!w)&&te.unshift(ci(e)):te.unshift(ci(e))),te}function Kc(e){const{$table:l,column:i}=e,{context:u}=l,w=u.slots,{slots:b}=i,{computeColumnOpts:y,computeColumnDragOpts:D}=l.getComputeMaps(),B=y.value,p=D.value,{showIcon:c,icon:v,trigger:N,isPeerDrag:G,isCrossDrag:K,visibleMethod:V,disabledMethod:_}=p;if(B.drag&&c&&(!V||V(e))&&!i.fixed&&(G||K||!i.parentId)){const T=_&&_(e),I=(b?b.columnDragIcon||b["column-drag-icon"]:null)||w.columnDragIcon||w["column-drag-icon"],j={};return N!=="cell"&&(j.onMousedown=te=>{T||l.handleHeaderCellDragMousedownEvent(te,e)},j.onMouseup=l.handleHeaderCellDragMouseupEvent),g("span",Object.assign({key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":T}]},j),I?l.callSlot(I,e):[g("i",{class:v||Gt().TABLE_DRAG_COLUMN})])}return Kl(l)}function sl(e,l){return[qc(e),Kc(e),...s.isArray(l)?l:[l],Xc(e)]}function Fl(e,l){const{$table:i,column:u}=e,w=i.props,b=i.reactData,{computeTooltipOpts:y}=i.getComputeMaps(),{showHeaderOverflow:D}=w,{type:B,showHeaderOverflow:p}=u,v=y.value.showAll,N=s.isUndefined(p)||s.isNull(p)?D:p,G=N==="title",K=N===!0||N==="tooltip",V={};return(G||K||v)&&(V.onMouseenter=_=>{b.isDragResize||(G?Os(_.currentTarget,u):(K||v)&&i.triggerHeaderTooltipEvent(_,e))}),(K||v)&&(V.onMouseleave=_=>{b.isDragResize||(K||v)&&i.handleTargetLeaveEvent(_)}),[B==="html"&&s.isString(l)?g("span",Object.assign({class:"vxe-cell--title",innerHTML:l},V)):g("span",Object.assign({class:"vxe-cell--title"},V),So(l))]}function Yc(e){const{$table:l,column:i,_columnIndex:u,items:w,row:b}=e,{slots:y,editRender:D,cellRender:B,footerFormatter:p}=i,c=D||B,v=y?y.footer:null;if(v)return l.callSlot(v,e);let N="";s.isArray(w)?N=w[u]:N=s.get(b,i.field);const G=Object.assign(e,{itemValue:N});if(p){if(s.isFunction(p))return`${p(G)}`;const K=s.isArray(p),V=K?ai.get(p[0]):ai.get(p),_=V?V.tableFooterCellFormatMethod:null;return _?`${K?_(G,...p.slice(1)):_(G)}`:""}if(c){const K=Zn.get(c.name);if(K){const V=K.renderTableFooter||K.renderFooter;if(V)return So(V(c,G))}}return[ho(N,1)]}function di(e){const{$table:l,row:i,column:u}=e;return ho(l.getCellLabel(i,u),1)}function Uc(e){const{column:l,$table:i}=e,u=i.props,{editConfig:w}=u,{type:b,treeNode:y,editRender:D}=l,{computeEditOpts:B,computeCheckboxOpts:p}=i.getComputeMaps(),c=p.value,v=B.value;switch(b){case"seq":return y?ct.renderTreeIndexCell(e):ct.renderSeqCell(e);case"radio":return y?ct.renderTreeRadioCell(e):ct.renderRadioCell(e);case"checkbox":return c.checkField?y?ct.renderTreeSelectionCellByProp(e):ct.renderCheckboxCellByProp(e):y?ct.renderTreeSelectionCell(e):ct.renderCheckboxCell(e);case"expand":return ct.renderExpandCell(e);case"html":return y?ct.renderTreeHTMLCell(e):ct.renderHTMLCell(e)}return ft(w)&&D?v.mode==="cell"?y?ct.renderTreeCellEdit(e):ct.renderCellEdit(e):y?ct.renderTreeRowEdit(e):ct.renderRowEdit(e):y?ct.renderTreeCell(e):ct.renderDefaultCell(e)}function Gc(e){const{column:l,$table:i}=e,u=i.props,{editConfig:w}=u,{type:b,filters:y,sortable:D,editRender:B}=l;switch(b){case"seq":return ct.renderSeqHeader(e);case"radio":return ct.renderRadioHeader(e);case"checkbox":return ct.renderCheckboxHeader(e);case"html":if(y&&D)return ct.renderSortAndFilterHeader(e);if(D)return ct.renderSortHeader(e);if(y)return ct.renderFilterHeader(e);break}return w&&B?ct.renderEditHeader(e):y&&D?ct.renderSortAndFilterHeader(e):D?ct.renderSortHeader(e):y?ct.renderFilterHeader(e):ct.renderDefaultHeader(e)}function Zc(e){return ct.renderDefaultFooter(e)}const ct={createColumn(e,l){const{type:i}=l,u={renderHeader:Gc,renderCell:Uc,renderFooter:Zc};return i==="expand"&&(u.renderData=ct.renderExpandData),zc(e,l,u)},renderHeaderTitle(e){const{$table:l,column:i}=e,{slots:u,editRender:w,cellRender:b}=i,y=w||b,D=u?u.header:null;if(D)return Fl(e,l.callSlot(D,e));if(y){const B=Zn.get(y.name);if(B){const p=B.renderTableHeader||B.renderHeader;if(p)return Fl(e,So(p(y,e)))}}return Fl(e,ho(i.getTitle(),1))},renderDefaultHeader(e){return sl(e,ct.renderHeaderTitle(e))},renderDefaultCell(e){const{$table:l,row:i,column:u}=e,{slots:w,editRender:b,cellRender:y}=u,D=b||y,B=w?w.default:null;if(B)return yo(e,l.callSlot(B,e));if(D){const v=Zn.get(D.name);if(v){const N=v.renderTableCell||v.renderCell,G=v.renderTableDefault||v.renderDefault,K=b?N:G;if(K)return yo(e,So(K(D,Object.assign({$type:b?"edit":"cell"},e))))}}const p=l.getCellLabel(i,u),c=b?b.placeholder:"";return yo(e,[g("span",{class:"vxe-cell--label"},[b&&cl(p)?g("span",{class:"vxe-cell--placeholder"},ho(hl(c),1)):g("span",ho(p,1))])])},renderTreeCell(e){return ct.renderTreeIcon(e,ct.renderDefaultCell(e))},renderDefaultFooter(e){return Yc(e)},renderTreeIcon(e,l){const{$table:i,isHidden:u}=e,w=i.reactData,b=i.internalData,{computeTreeOpts:y}=i.getComputeMaps(),{treeExpandedMaps:D,treeExpandLazyLoadedMaps:B}=w,{fullAllDataRowIdData:p}=b,c=y.value,{row:v,column:N,level:G}=e,{slots:K}=N,{indent:V,lazy:_,trigger:T,iconLoaded:I,showIcon:j,iconOpen:te,iconClose:le}=c,C=c.children||c.childrenField,O=c.hasChild||c.hasChildField,S=v[C],q=S&&S.length,Y=K?K.icon:null;let ne=!1,X=!1,ie=!1,Re=!1;const me={};if(Y)return i.callSlot(Y,e);if(!u){const Ee=Ce(i,v);if(X=!!D[Ee],_){const Ve=p[Ee];ie=!!B[Ee],ne=v[O],Re=!!Ve.treeLoaded}}return(!T||T==="default")&&(me.onClick=Ee=>{i.triggerTreeExpandEvent(Ee,e)}),[g("div",{class:["vxe-cell--tree-node",{"is--active":X}],style:{paddingLeft:`${G*V}px`}},[j&&(_?Re?q:q||ne:q)?[g("div",Object.assign({class:"vxe-tree--btn-wrapper"},me),[g("i",{class:["vxe-tree--node-btn",ie?I||Gt().TABLE_TREE_LOADED:X?te||Gt().TABLE_TREE_OPEN:le||Gt().TABLE_TREE_CLOSE]})])]:null,g("div",{class:"vxe-tree-cell"},l)])]},renderSeqHeader(e){const{$table:l,column:i}=e,{slots:u}=i,w=u?u.header:null;return sl(e,Fl(e,w?l.callSlot(w,e):ho(i.getTitle(),1)))},renderSeqCell(e){const{$table:l,column:i}=e,u=l.props,{treeConfig:w}=u,{computeSeqOpts:b}=l.getComputeMaps(),y=b.value,{slots:D}=i,B=D?D.default:null;if(B)return yo(e,l.callSlot(B,e));const{seq:p}=e,c=y.seqMethod;return yo(e,[g("span",`${ho(c?c(e):w?p:(y.startIndex||0)+p,1)}`)])},renderTreeIndexCell(e){return ct.renderTreeIcon(e,ct.renderSeqCell(e))},renderRadioHeader(e){const{$table:l,column:i}=e,{slots:u}=i,w=u?u.header:null,b=u?u.title:null;return sl(e,Fl(e,w?l.callSlot(w,e):[g("span",{class:"vxe-radio--label"},b?l.callSlot(b,e):ho(i.getTitle(),1))]))},renderRadioCell(e){const{$table:l,column:i,isHidden:u}=e,w=l.reactData,{computeRadioOpts:b}=l.getComputeMaps(),{selectRadioRow:y}=w,D=b.value,{slots:B}=i,{labelField:p,checkMethod:c,visibleMethod:v}=D,{row:N}=e,G=B?B.default:null,K=B?B.radio:null,V=l.eqRow(N,y),_=!v||v({row:N});let T=!!c,I;u||(I={onClick(le){!T&&_&&l.triggerRadioRowEvent(le,e)}},c&&(T=!c({row:N})));const j=Object.assign(Object.assign({},e),{checked:V,disabled:T,visible:_});if(K)return yo(e,l.callSlot(K,j));const te=[];return _&&te.push(g("span",{class:["vxe-radio--icon",V?Gt().TABLE_RADIO_CHECKED:Gt().TABLE_RADIO_UNCHECKED]})),(G||p)&&te.push(g("span",{class:"vxe-radio--label"},G?l.callSlot(G,j):s.get(N,p))),yo(e,[g("span",Object.assign({class:["vxe-cell--radio",{"is--checked":V,"is--disabled":T}]},I),te)])},renderTreeRadioCell(e){return ct.renderTreeIcon(e,ct.renderRadioCell(e))},renderCheckboxHeader(e){const{$table:l,column:i,isHidden:u}=e,w=l.reactData,{computeIsAllCheckboxDisabled:b,computeCheckboxOpts:y}=l.getComputeMaps(),{isAllSelected:D,isIndeterminate:B}=w,p=b.value,{slots:c}=i,v=c?c.header:null,N=c?c.title:null,G=y.value,K=i.getTitle(),V={};u||(V.onClick=T=>{p||l.triggerCheckAllEvent(T,!D)});const _=Object.assign(Object.assign({},e),{checked:D,disabled:p,indeterminate:B});return v?sl(e,Fl(_,l.callSlot(v,_))):(G.checkStrictly?!G.showHeader:G.showHeader===!1)?sl(e,Fl(_,[g("span",{class:"vxe-checkbox--label"},N?l.callSlot(N,_):K)])):sl(e,Fl(_,[g("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":D,"is--disabled":p,"is--indeterminate":B}],title:mr("vxe.table.allTitle")},V),[g("span",{class:["vxe-checkbox--icon",B?Gt().TABLE_CHECKBOX_INDETERMINATE:D?Gt().TABLE_CHECKBOX_CHECKED:Gt().TABLE_CHECKBOX_UNCHECKED]})].concat(N||K?[g("span",{class:"vxe-checkbox--label"},N?l.callSlot(N,_):K)]:[]))]))},renderCheckboxCell(e){const{$table:l,row:i,column:u,isHidden:w}=e,b=l.props,y=l.reactData,{treeConfig:D}=b,{selectCheckboxMaps:B,treeIndeterminateMaps:p}=y,{computeCheckboxOpts:c}=l.getComputeMaps(),v=c.value,{labelField:N,checkMethod:G,visibleMethod:K}=v,{slots:V}=u,_=V?V.default:null,T=V?V.checkbox:null;let I=!1,j=!1;const te=!K||K({row:i});let le=!!G;const C={};if(!w){const q=Ce(l,i);j=!!B[q],C.onClick=Y=>{!le&&te&&l.triggerCheckRowEvent(Y,e,!j)},G&&(le=!G({row:i})),D&&(I=!!p[q])}const O=Object.assign(Object.assign({},e),{checked:j,disabled:le,visible:te,indeterminate:I});if(T)return yo(e,l.callSlot(T,O));const S=[];return te&&S.push(g("span",{class:["vxe-checkbox--icon",I?Gt().TABLE_CHECKBOX_INDETERMINATE:j?Gt().TABLE_CHECKBOX_CHECKED:Gt().TABLE_CHECKBOX_UNCHECKED]})),(_||N)&&S.push(g("span",{class:"vxe-checkbox--label"},_?l.callSlot(_,O):s.get(i,N))),yo(e,[g("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":j,"is--disabled":le,"is--indeterminate":I,"is--hidden":!te}]},C),S)])},renderTreeSelectionCell(e){return ct.renderTreeIcon(e,ct.renderCheckboxCell(e))},renderCheckboxCellByProp(e){const{$table:l,row:i,column:u,isHidden:w}=e,b=l.props,y=l.reactData,{treeConfig:D}=b,{treeIndeterminateMaps:B}=y,{computeCheckboxOpts:p}=l.getComputeMaps(),c=p.value,{labelField:v,checkField:N,checkMethod:G,visibleMethod:K}=c,V=c.indeterminateField||c.halfField,{slots:_}=u,T=_?_.default:null,I=_?_.checkbox:null;let j=!1,te=!1;const le=!K||K({row:i});let C=!!G;const O={};if(!w){const Y=Ce(l,i);te=s.get(i,N),O.onClick=ne=>{!C&&le&&l.triggerCheckRowEvent(ne,e,!te)},G&&(C=!G({row:i})),D&&(j=!!B[Y])}const S=Object.assign(Object.assign({},e),{checked:te,disabled:C,visible:le,indeterminate:j});if(I)return yo(e,l.callSlot(I,S));const q=[];return le&&(q.push(g("span",{class:["vxe-checkbox--icon",j?Gt().TABLE_CHECKBOX_INDETERMINATE:te?Gt().TABLE_CHECKBOX_CHECKED:Gt().TABLE_CHECKBOX_UNCHECKED]})),(T||v)&&q.push(g("span",{class:"vxe-checkbox--label"},T?l.callSlot(T,S):s.get(i,v)))),yo(e,[g("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":te,"is--disabled":C,"is--indeterminate":V&&!te?i[V]:j,"is--hidden":!le}]},O),q)])},renderTreeSelectionCellByProp(e){return ct.renderTreeIcon(e,ct.renderCheckboxCellByProp(e))},renderExpandCell(e){const{$table:l,isHidden:i,row:u,column:w}=e,b=l.reactData,{rowExpandedMaps:y,rowExpandLazyLoadedMaps:D}=b,{computeExpandOpts:B}=l.getComputeMaps(),p=B.value,{lazy:c,labelField:v,iconLoaded:N,showIcon:G,iconOpen:K,iconClose:V,visibleMethod:_}=p,{slots:T}=w,I=T?T.default:null,j=T?T.icon:null;let te=!1,le=!1;if(j)return yo(e,l.callSlot(j,e));if(!i){const C=Ce(l,u);te=!!y[C],c&&(le=!!D[C])}return yo(e,[G&&(!_||_(e))?g("span",{class:["vxe-table--expanded",{"is--active":te}],onMousedown(C){C.stopPropagation()},onClick(C){l.triggerRowExpandEvent(C,e)}},[g("i",{class:["vxe-table--expand-btn",le?N||Gt().TABLE_EXPAND_LOADED:te?K||Gt().TABLE_EXPAND_OPEN:V||Gt().TABLE_EXPAND_CLOSE]})]):Kl(l),I||v?g("span",{class:"vxe-table--expand-label"},I?l.callSlot(I,e):s.get(u,v)):Kl(l)])},renderExpandData(e){const{$table:l,column:i}=e,{slots:u,contentRender:w}=i,b=u?u.content:null;if(b)return l.callSlot(b,e);if(w){const y=Zn.get(w.name);if(y){const D=y.renderTableExpand||y.renderExpand;if(D)return So(D(w,e))}}return[]},renderHTMLCell(e){const{$table:l,column:i}=e,{slots:u}=i,w=u?u.default:null;return w?yo(e,l.callSlot(w,e)):yo(e,[g("span",{class:"vxe-cell--html",innerHTML:di(e)})])},renderTreeHTMLCell(e){return ct.renderTreeIcon(e,ct.renderHTMLCell(e))},renderSortAndFilterHeader(e){return sl(e,ct.renderHeaderTitle(e).concat(ct.renderSortIcon(e).concat(ct.renderFilterIcon(e))))},renderSortHeader(e){return sl(e,ct.renderHeaderTitle(e).concat(ct.renderSortIcon(e)))},renderSortIcon(e){const{$table:l,column:i}=e,{computeSortOpts:u}=l.getComputeMaps(),w=u.value,{showIcon:b,allowBtn:y,iconLayout:D,iconAsc:B,iconDesc:p,iconVisibleMethod:c}=w,{order:v}=i;return b&&(!c||c(e))?[g("span",{class:["vxe-cell--sort",`vxe-cell--sort-${D}-layout`]},[g("i",{class:["vxe-sort--asc-btn",B||Gt().TABLE_SORT_ASC,{"sort--active":v==="asc"}],title:mr("vxe.table.sortAsc"),onClick:y?N=>{N.stopPropagation(),l.triggerSortEvent(N,i,"asc")}:void 0}),g("i",{class:["vxe-sort--desc-btn",p||Gt().TABLE_SORT_DESC,{"sort--active":v==="desc"}],title:mr("vxe.table.sortDesc"),onClick:y?N=>{N.stopPropagation(),l.triggerSortEvent(N,i,"desc")}:void 0})])]:[]},renderFilterHeader(e){return sl(e,ct.renderHeaderTitle(e).concat(ct.renderFilterIcon(e)))},renderFilterIcon(e){const{$table:l,column:i,hasFilter:u}=e,w=l.reactData,{filterStore:b}=w,{computeFilterOpts:y}=l.getComputeMaps(),D=y.value,{showIcon:B,iconNone:p,iconMatch:c,iconVisibleMethod:v}=D;return B&&(!v||v(e))?[g("span",{class:["vxe-cell--filter",{"is--active":b.visible&&b.column===i}]},[g("i",{class:["vxe-filter--btn",u?c||Gt().TABLE_FILTER_MATCH:p||Gt().TABLE_FILTER_NONE],title:mr("vxe.table.filter"),onClick(N){l.triggerFilterEvent&&l.triggerFilterEvent(N,e.column,e)}})])]:[]},renderEditHeader(e){const{$table:l,column:i}=e,u=l.props,{computeEditOpts:w}=l.getComputeMaps(),{editConfig:b,editRules:y}=u,D=w.value,{sortable:B,filters:p,editRender:c}=i;let v=!1;if(y){const G=s.get(y,i.field);G&&(v=G.some(K=>K.required))}let N=[];return ft(b)&&(N=[v&&D.showAsterisk?g("i",{class:"vxe-cell--required-icon"}):Kl(l),ft(c)&&D.showIcon?g("i",{class:["vxe-cell--edit-icon",D.icon||Gt().TABLE_EDIT]}):Kl(l)]),sl(e,N.concat(ct.renderHeaderTitle(e)).concat(B?ct.renderSortIcon(e):[]).concat(p?ct.renderFilterIcon(e):[]))},renderRowEdit(e){const{$table:l,column:i}=e,u=l.reactData,{editStore:w}=u,{actived:b}=w,{editRender:y}=i;return ct.runRenderer(e,ft(y)&&b&&b.row===e.row)},renderTreeRowEdit(e){return ct.renderTreeIcon(e,ct.renderRowEdit(e))},renderCellEdit(e){const{$table:l,column:i}=e,u=l.reactData,{editStore:w}=u,{actived:b}=w,{editRender:y}=i;return ct.runRenderer(e,ft(y)&&b&&b.row===e.row&&b.column===e.column)},renderTreeCellEdit(e){return ct.renderTreeIcon(e,ct.renderCellEdit(e))},runRenderer(e,l){const{$table:i,column:u}=e,{slots:w,editRender:b,formatter:y}=u,D=w?w.default:null,B=w?w.edit:null,p=Zn.get(b.name),c=p?p.renderTableEdit||p.renderEdit:null,v=Object.assign({$type:"",isEdit:l},e);return l?(v.$type="edit",B?i.callSlot(B,v):c?So(c(b,v)):[]):D?yo(e,i.callSlot(D,v)):y?yo(e,[g("span",{class:"vxe-cell--label"},di(v))]):ct.renderDefaultCell(v)}},aa={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],maxWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],footerFormatter:[Function,Array,String],padding:{type:Boolean,default:null},verticalAlign:{type:String,default:null},sortable:Boolean,sortBy:[String,Function],sortType:String,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,treeNode:Boolean,dragSort:Boolean,rowResize:Boolean,visible:{type:Boolean,default:null},headerExportMethod:Function,exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,titleSuffix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,params:Object},Ll=Wo({name:"VxeColumn",props:aa,setup(e,{slots:l}){const i=$e(),u=Mo("$xeTable",null),w=Mo("$xeColgroup",null);if(!u)return()=>Ke();const b=ct.createColumn(u,e);b.slots=l;const y=()=>g("div",{ref:i}),D={columnConfig:b,renderVN:y};return ea(u,e,b),Ul(()=>{const B=i.value;B&&ta(u,B,b,w)}),Gl(()=>{oa(u,b)}),Yl("$xeColumn",D),Yl("$xeGrid",null),y}}),Ms=Object.assign({},Ll,{install(e){e.component(Ll.name,Ll),e.component("VxeTableColumn",Ll)}});ue.dynamicApp&&(ue.dynamicApp.component(Ll.name,Ll),ue.dynamicApp.component("VxeTableColumn",Ll));ue.component(Ll);const Qc=Ms,Hl=Wo({name:"VxeColgroup",props:aa,setup(e,{slots:l}){const i=$e(),u=Mo("$xeTable",null),w=Mo("$xeColgroup",null);if(!u)return()=>Ke();const b=ct.createColumn(u,e),y={};l.header&&(y.header=l.header),b.slots=y,b.children=[],ea(u,e,b),Ul(()=>{const p=i.value;p&&ta(u,p,b,w)}),Gl(()=>{oa(u,b)});const D=()=>g("div",{ref:i},l.default?l.default():[]);return Yl("$xeColgroup",{columnConfig:b}),Yl("$xeGrid",null),D}}),Ds=Object.assign({},Hl,{install(e){e.component(Hl.name,Hl),e.component("VxeTableColgroup",Hl)}});ue.dynamicApp&&(ue.dynamicApp.component(Hl.name,Hl),ue.dynamicApp.component("VxeTableColgroup",Hl));ue.component(Hl);const Jc=Ds,{getI18n:ed,renderer:ui,renderEmptyElement:us}=ue,br="body",fi=Wo({name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:""}},setup(e){const l=Mo("$xeTable",{}),{xID:i,props:u,context:w,reactData:b,internalData:y}=l,{computeEditOpts:D,computeMouseOpts:B,computeAreaOpts:p,computeDefaultRowHeight:c,computeEmptyOpts:v,computeTooltipOpts:N,computeRadioOpts:G,computeExpandOpts:K,computeTreeOpts:V,computeCheckboxOpts:_,computeCellOpts:T,computeValidOpts:I,computeRowOpts:j,computeColumnOpts:te,computeRowDragOpts:le,computeColumnDragOpts:C,computeResizableOpts:O}=l.getComputeMaps(),S=$e(),q=$e(),Y=$e(),ne=$e(),X=$e(),ie=$e(),Re=$e(),me=$e(),Ee=()=>{const{delayHover:k}=u,{lastScrollTime:z,isDragResize:Z}=b;return!!(Z||z&&Date.now()<z+k)},Ve=(k,z)=>{const{row:Z,column:U}=k,{afterFullData:re}=y,{treeConfig:ge}=u,be=V.value,{slots:de,treeNode:we}=U,{fullAllDataRowIdData:P}=y;if(de&&de.line)return l.callSlot(de.line,k);const ae=Ce(l,Z),ve=P[ae];let se=0,J=null;ve&&(se=ve.level,J=ve.items[ve.treeIndex-1]);const Se=l.eqRow(re[0],Z);return ge&&we&&(be.showLine||be.line)?[g("div",{key:"tl",class:"vxe-tree--line-wrapper"},[g("div",{class:"vxe-tree--line",style:{height:`${Se?1:Nc(k,J)}px`,bottom:`-${Math.floor(z/2)}px`,left:`${se*be.indent+(se?2-na(l):0)+16}px`}})])]:[]},Oe=(k,z,Z,U,re,ge,be,de,we,P,ae,ve,se)=>{const{fullAllDataRowIdData:J}=y,{columnKey:Se,resizable:ye,showOverflow:He,border:Ue,height:qe,cellClassName:Ze,cellStyle:ht,align:xt,spanMethod:gt,mouseConfig:st,editConfig:it,editRules:ut,tooltipConfig:Ne,padding:Le}=u,{tableData:ke,dragRow:ot,overflowX:he,currentColumn:_e,scrollXLoad:lt,scrollYLoad:rt,calcCellHeightFlag:H,resizeHeightFlag:ee,mergeList:ce,editStore:Me,isAllOverflow:Ie,validErrorMaps:Xe}=b,{afterFullData:et,scrollXStore:nt,scrollYStore:ze}=y,pt=T.value,Lt=I.value,mt=_.value,Ct=D.value,$t=N.value,It=O.value,{isAllColumnDrag:Ht,isAllRowDrag:mo}=It,Mt=j.value,Zt=le.value,$o=c.value,wt=H?pt.height||Mt.height:0,{disabledMethod:xo,isCrossDrag:io,isPeerDrag:kt}=Zt,ro=te.value,Pt=B.value,so=p.value,{selectCellToRow:Oo}=so,{type:ao,cellRender:Co,editRender:Do,align:Dt,showOverflow:dt,className:Fo,treeNode:Ut,rowResize:Qt,padding:po,verticalAlign:yl,slots:Pl}=P,{verticalAlign:er}=pt,{actived:Rn}=Me,Sn=J[z],$l=P.id,tr=Do||Co,el=tr?ui.get(tr.name):null,_r=el?el.tableCellClassName||el.cellClassName:null,d=el?el.tableCellStyle||el.cellStyle:"",Bl=$t.showAll,On=l.getColumnIndex(P),Rl=l.getVTColumnIndex(P),or=ft(Do),Mn=ee?Sn.resizeHeight:0;let Bo=Z?P.fixed!==Z:P.fixed&&he;const Dn=s.eqNull(po)?Le===null?pt.padding:Le:po,gl=s.eqNull(dt)?He:dt,Tn=gl==="ellipsis",ml=gl==="title",tl=gl===!0||gl==="tooltip",Zl=Ie||ml||tl||Tn,lr=s.isBoolean(P.resizable)?P.resizable:ro.resizable||ye,Ql=!!wt,Jl=Mn>0;let Fn;const bl={},In=Dt||(el?el.tableCellAlign:"")||xt,kn=s.eqNull(yl)?er:yl,xl=Xe[`${z}:${$l}`],An=ut&&Lt.showMessage&&(Lt.message==="default"?qe||ke.length>1:Lt.message==="inline"),Uo={colid:$l},no={$table:l,$grid:l.xegrid,isEdit:!1,seq:k,rowid:z,row:ge,rowIndex:be,$rowIndex:de,_rowIndex:we,column:P,columnIndex:On,$columnIndex:ae,_columnIndex:Rl,fixed:Z,type:br,isHidden:!!Bo,level:re,visibleData:et,data:ke,items:se};let ol=!1,Ln=!1;Mt.drag&&(ol=Zt.trigger==="row"||P.dragSort&&Zt.trigger==="cell"),ol&&(Ln=!!(xo&&xo(no))),(ml||tl||Bl||Ne)&&(bl.onMouseenter=At=>{Ee()||(ml?Os(At.currentTarget,P):(tl||Bl)&&l.triggerBodyTooltipEvent(At,no),l.dispatchEvent("cell-mouseenter",Object.assign({cell:At.currentTarget},no),At))}),(tl||Bl||Ne)&&(bl.onMouseleave=At=>{Ee()||((tl||Bl)&&l.handleTargetLeaveEvent(At),l.dispatchEvent("cell-mouseleave",Object.assign({cell:At.currentTarget},no),At))}),(ol||mt.range||st)&&(bl.onMousedown=At=>{l.triggerCellMousedownEvent(At,no)}),ol&&(bl.onMouseup=l.triggerCellMouseupEvent),bl.onClick=At=>{l.triggerCellClickEvent(At,no)},bl.onDblclick=At=>{l.triggerCellDblclickEvent(At,no)};let en=!1;if(ce.length){const At=ra(ce,we,Rl);if(At){const{rowspan:qo,colspan:Ml}=At;if(!qo||!Ml)return null;qo>1&&(en=!0,Uo.rowspan=qo),Ml>1&&(en=!0,Uo.colspan=Ml)}}else if(gt){const{rowspan:At=1,colspan:qo=1}=gt(no)||{};if(!At||!qo)return null;At>1&&(Uo.rowspan=At),qo>1&&(Uo.colspan=qo)}Bo&&ce&&(Uo.colspan>1||Uo.rowspan>1)&&(Bo=!1),!Bo&&it&&(Do||Co)&&(Ct.showStatus||Ct.showUpdateStatus)&&(Fn=l.isUpdateByRow(ge,P.field));const Vl=rt&&!Zl,ll=Sn.resizeHeight||pt.height||Mt.height||Sn.height||$o,Wr=ae===ve.length-1,bo=!P.resizeWidth&&(P.minWidth==="auto"||P.width==="auto");let nl=!1;en||(!ot||Ce(l,ot)!==z)&&(rt&&(we<ze.visibleStartIndex-ze.preloadSize||we>ze.visibleEndIndex+ze.preloadSize)||lt&&!P.fixed&&(Rl<nt.visibleStartIndex-nt.preloadSize||Rl>nt.visibleEndIndex+nt.preloadSize))&&(nl=!0);const Sl={};rt||Zl||Ql||Jl?Sl.height=`${ll}px`:Sl.minHeight=`${ll}px`;const Ol=[];if(Bo&&Ie)Ol.push(g("div",{key:"tc",class:["vxe-cell",{"c--title":ml,"c--tooltip":tl,"c--ellipsis":Tn}],style:Sl}));else if(Ol.push(...Ve(no,ll),g("div",{key:"tc",class:["vxe-cell",{"c--title":ml,"c--tooltip":tl,"c--ellipsis":Tn}],style:Sl,title:ml?l.getCellLabel(ge,P):null},nl?[]:[g("div",{colid:$l,rowid:z,class:"vxe-cell--wrapper"},P.renderCell(no))])),An&&xl){const At=xl.rule,qo=Pl?Pl.valid:null,Ml=Object.assign(Object.assign(Object.assign({},no),xl),{rule:xl});Ol.push(g("div",{key:"tcv",class:["vxe-cell--valid-error-tip",kl(Lt.className,Ml)],style:At&&At.maxWidth?{width:`${At.maxWidth}px`}:null},[g("div",{class:`vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-${Lt.theme||"normal"}`},[qo?l.callSlot(qo,Ml):[g("span",{class:"vxe-cell--valid-error-msg"},xl.content)]])]))}let nr=!1;return st&&Pt.area&&Oo&&(!Rl&&Oo===!0||Oo===P.field)&&(nr=!0),!Bo&&lr&&Ht&&Ol.push(g("div",{key:"tcc",class:["vxe-cell--col-resizable",{"is--line":!Ue||Ue==="none"}],onMousedown:At=>l.handleColResizeMousedownEvent(At,Z,no),onDblclick:At=>l.handleColResizeDblclickEvent(At,no)})),(Qt||mo)&&Mt.resizable&&Ol.push(g("div",{key:"tcr",class:"vxe-cell--row-resizable",onMousedown:At=>l.handleRowResizeMousedownEvent(At,no),onDblclick:At=>l.handleRowResizeDblclickEvent(At,no)})),g("td",Object.assign(Object.assign(Object.assign({class:["vxe-body--column",$l,kn?`col--vertical-${kn}`:"",In?`col--${In}`:"",ao?`col--${ao}`:"",{"col--last":Wr,"col--tree-node":Ut,"col--edit":or,"col--ellipsis":Zl,"col--cs-height":Ql,"col--rs-height":Jl,"col--to-row":nr,"col--auto-height":Vl,"fixed--width":!bo,"fixed--hidden":Bo,"is--padding":Dn,"is--progress":Bo&&Ie||nl,"is--drag-cell":ol&&(io||kt||!re),"is--drag-disabled":Ln,"col--dirty":Fn,"col--active":it&&or&&Rn.row===ge&&(Rn.column===P||Ct.mode==="row"),"col--valid-error":!!xl,"col--current":_e===P},kl(_r,no),kl(Fo,no),kl(Ze,no)],key:Se||lt||rt||ro.useKey||Mt.useKey||ro.drag?$l:ae},Uo),{style:Object.assign({},s.isFunction(d)?d(no):d,s.isFunction(ht)?ht(no):ht)}),bl),U&&Bo?[]:Ol)},Te=(k,z,Z,U)=>{const{stripe:re,rowKey:ge,highlightHoverRow:be,rowClassName:de,rowStyle:we,editConfig:P,treeConfig:ae}=u,{hasFixedColumn:ve,treeExpandedMaps:se,isColLoading:J,scrollXLoad:Se,scrollYLoad:ye,isAllOverflow:He,rowExpandedMaps:Ue,expandColumn:qe,selectRadioRow:Ze,pendingRowMaps:ht,isDragColMove:xt,rowExpandHeightFlag:gt}=b,{fullAllDataRowIdData:st}=y,it=_.value,ut=G.value,Ne=V.value,Le=D.value,ke=j.value,ot=te.value,he=C.value,{transform:_e,seqMode:lt}=Ne,rt=Ne.children||Ne.childrenField,H=[];return Z.forEach((ee,ce)=>{const Me={};let Ie=ce;Ie=l.getRowIndex(ee),(ke.isHover||be)&&(Me.onMouseenter=Mt=>{Ee()||l.triggerHoverEvent(Mt,{row:ee,rowIndex:Ie})},Me.onMouseleave=()=>{Ee()||l.clearHoverRow()});const Xe=Ce(l,ee),et=st[Xe];let nt=0,ze=-1,pt=0;et&&(nt=et.level,ae&&_e&&lt==="increasing"?ze=et._index+1:ze=et.seq,pt=et._index);const Lt={$table:l,seq:ze,rowid:Xe,fixed:k,type:br,level:nt,row:ee,rowIndex:Ie,$rowIndex:ce,_rowIndex:pt},mt=qe&&!!Ue[Xe];let Ct=!1,$t=[],It=!1;P&&(It=l.isInsertByRow(ee)),ae&&!ye&&!_e&&($t=ee[rt],Ct=$t&&$t.length>0&&!!se[Xe]),ke.drag&&(!ae||_e)&&(Me.onDragstart=l.handleRowDragDragstartEvent,Me.onDragend=l.handleRowDragDragendEvent,Me.onDragover=l.handleRowDragDragoverEvent);const Ht=["vxe-body--row",ae?`row--level-${nt}`:"",{"row--stripe":re&&(pt+1)%2===0,"is--new":It,"is--expand-row":mt,"is--expand-tree":Ct,"row--new":It&&(Le.showStatus||Le.showInsertStatus),"row--radio":ut.highlight&&l.eqRow(Ze,ee),"row--checked":it.highlight&&l.isCheckedByCheckboxRow(ee),"row--pending":!!ht[Xe]},kl(de,Lt)],mo=U.map((Mt,Zt)=>Oe(ze,Xe,k,z,nt,ee,Ie,ce,pt,Mt,Zt,U,Z));if(H.push(!J&&ot.drag&&he.animation?g(yn,Object.assign({name:`vxe-header--col-list${xt?"":"-disabled"}`,tag:"tr",class:Ht,rowid:Xe,style:we?s.isFunction(we)?we(Lt):we:null,key:ge||Se||ye||ke.useKey||ke.drag||ot.drag||ae?Xe:ce},Me),{default:()=>mo}):g("tr",Object.assign({class:Ht,rowid:Xe,style:we?s.isFunction(we)?we(Lt):we:null,key:ge||Se||ye||ke.useKey||ke.drag||ot.drag||ae?Xe:ce},Me),mo)),mt){const Mt=K.value,{height:Zt,padding:$o,mode:wt}=Mt;if(wt==="fixed")H.push(g("tr",{class:"vxe-body--row-expanded-place",key:`expand_${Xe}`,rowid:Xe},[g("td",{class:"vxe-body--row-expanded-place-column",colspan:U.length,style:{height:`${gt?et.expandHeight||Zt:0}px`}})]));else{const xo={};Zt&&(xo.height=`${Zt}px`),ae&&(xo.paddingLeft=`${nt*Ne.indent+30}px`);const{showOverflow:io}=qe,kt=s.isUndefined(io)||s.isNull(io)?He:io,ro={$table:l,seq:ze,column:qe,fixed:k,type:br,level:nt,row:ee,rowIndex:Ie,$rowIndex:ce,_rowIndex:pt};H.push(g("tr",{class:["vxe-body--expanded-row",{"is--padding":$o}],key:`expand_${Xe}`},[g("td",{class:["vxe-body--expanded-column",{"fixed--hidden":k&&!ve,"col--ellipsis":kt}],colspan:U.length},[g("div",{class:["vxe-body--expanded-cell",{"is--ellipsis":Zt}],style:xo},[qe.renderData(ro)])])]))}}Ct&&H.push(...Te(k,z,$t,U))}),H};return Ul(()=>{pe(()=>{const{fixedType:k}=e,{elemStore:z}=y,Z=`${k||"main"}-body-`;z[`${Z}wrapper`]=S,z[`${Z}scroll`]=q,z[`${Z}table`]=Y,z[`${Z}colgroup`]=ne,z[`${Z}list`]=X,z[`${Z}xSpace`]=ie,z[`${Z}ySpace`]=Re,z[`${Z}emptyBlock`]=me})}),Gl(()=>{const{fixedType:k}=e,{elemStore:z}=y,Z=`${k||"main"}-body-`;z[`${Z}wrapper`]=null,z[`${Z}scroll`]=null,z[`${Z}table`]=null,z[`${Z}colgroup`]=null,z[`${Z}list`]=null,z[`${Z}xSpace`]=null,z[`${Z}ySpace`]=null,z[`${Z}emptyBlock`]=null}),()=>{const{slots:k}=w,{fixedColumn:z,fixedType:Z,tableColumn:U}=e,{spanMethod:re,footerSpanMethod:ge,mouseConfig:be}=u,{isGroup:de,tableData:we,isRowLoading:P,isColLoading:ae,overflowX:ve,scrollXLoad:se,scrollYLoad:J,isAllOverflow:Se,isDragRowMove:ye,expandColumn:He,dragRow:Ue,dragCol:qe}=b,{visibleColumn:Ze,fullAllDataRowIdData:ht,fullColumnIdData:xt}=y,gt=j.value,st=v.value,it=B.value,ut=le.value,Ne=K.value;let Le=we,ke=U,ot=!1;if((se||J||Se)&&(He&&Ne.mode!=="fixed"||re||ge||(ot=!0)),(Z||!ve)&&(ke=Ze),Z&&ot&&(ke=z||[]),J&&Ue&&Le.length>2){const rt=ht[Ce(l,Ue)];if(rt){const H=rt._index,ee=Le[0],ce=Le[Le.length-1],Me=ht[Ce(l,ee)],Ie=ht[Ce(l,ce)];if(Me&&Ie){const Xe=Me._index,et=Ie._index;H<Xe?Le=[Ue].concat(Le):H>et&&(Le=Le.concat([Ue]))}}}if(!Z&&!de&&se&&qe&&ke.length>2){const rt=xt[qe.id];if(rt){const H=rt._index,ee=ke[0],ce=ke[ke.length-1],Me=xt[ee.id],Ie=xt[ce.id];if(Me&&Ie){const Xe=Me._index,et=Ie._index;H<Xe?ke=[qe].concat(ke):H>et&&(ke=ke.concat([qe]))}}}let he;const _e=k?k.empty:null;if(_e)he=l.callSlot(_e,{$table:l,$grid:l.xegrid});else{const rt=st.name?ui.get(st.name):null,H=rt?rt.renderTableEmpty||rt.renderTableEmptyView||rt.renderEmpty:null;H?he=So(H(st,{$table:l})):he=u.emptyText||ed("vxe.table.emptyText")}const lt={onScroll(rt){l.triggerBodyScrollEvent(rt,Z)}};return g("div",{ref:S,class:["vxe-table--body-wrapper",Z?`fixed-${Z}--wrapper`:"body--wrapper"],xid:i},[g("div",Object.assign({ref:q,class:"vxe-table--body-inner-wrapper"},lt),[Z?us(l):g("div",{ref:ie,class:"vxe-body--x-space"}),g("div",{ref:Re,class:"vxe-body--y-space"}),g("table",{ref:Y,class:"vxe-table--body",xid:i,cellspacing:0,cellpadding:0,border:0},[g("colgroup",{ref:ne},ke.map((rt,H)=>g("col",{name:rt.id,key:H}))),!(P||ae)&&gt.drag&&ut.animation?g(yn,{ref:X,name:`vxe-body--row-list${ye?"":"-disabled"}`,tag:"tbody"},{default:()=>Te(Z,ot,Le,ke)}):g("tbody",{ref:X},Te(Z,ot,Le,ke))]),g("div",{class:"vxe-table--checkbox-range"}),be&&it.area?g("div",{class:"vxe-table--cell-area"},[g("span",{class:"vxe-table--cell-main-area"},it.extension?[g("span",{class:"vxe-table--cell-main-area-btn",onMousedown(rt){l.triggerCellAreaExtendMousedownEvent&&l.triggerCellAreaExtendMousedownEvent(rt,{$table:l,fixed:Z,type:br})}})]:[]),g("span",{class:"vxe-table--cell-copy-area"}),g("span",{class:"vxe-table--cell-extend-area"}),g("span",{class:"vxe-table--cell-multi-area"}),g("span",{class:"vxe-table--cell-active-area"}),g("span",{class:"vxe-table--cell-row-status-area"})]):us(l),Z?us(l):g("div",{class:"vxe-table--empty-block",ref:me},[g("div",{class:"vxe-table--empty-content"},he)])])])}}}),{renderer:td,renderEmptyElement:fs}=ue,pi="header",hi=Wo({name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},setup(e){const l=Mo("$xeTable",{}),{xID:i,props:u,reactData:w,internalData:b}=l,{computeColumnOpts:y,computeColumnDragOpts:D,computeCellOpts:B,computeMouseOpts:p,computeHeaderCellOpts:c,computeDefaultRowHeight:v}=l.getComputeMaps(),N=$e([]),G=$e(),K=$e(),V=$e(),_=$e(),T=$e(),I=$e(),j=$e(),te=()=>{const{isGroup:S}=w;N.value=S?$c(e.tableGroupColumn):[]},le=(S,q,Y,ne)=>{const{fixedType:X}=e,{resizable:ie,columnKey:Re,headerCellClassName:me,headerCellStyle:Ee,showHeaderOverflow:Ve,headerAlign:Oe,align:Te,mouseConfig:tt}=u,{currentColumn:k,dragCol:z,scrollXLoad:Z,scrollYLoad:U,overflowX:re}=w,{scrollXStore:ge}=b,be=y.value,de=D.value,we=B.value,P=v.value,ae=c.value,ve=Ji(ae.height||we.height)||P,{disabledMethod:se,isCrossDrag:J,isPeerDrag:Se}=de;return Y.map((ye,He)=>{const{type:Ue,showHeaderOverflow:qe,headerAlign:Ze,align:ht,filters:xt,headerClassName:gt,editRender:st,cellRender:it}=ye,ut=ye.id,Ne=st||it,Le=Ne?td.get(Ne.name):null,ke=ye.children&&ye.children.length,ot=X?ye.fixed!==X&&!ke:!!ye.fixed&&re,he=s.isBoolean(ae.padding)?ae.padding:we.padding,_e=s.eqNull(qe)?Ve:qe,lt=Ze||(Le?Le.tableHeaderCellAlign:"")||Oe||ht||(Le?Le.tableCellAlign:"")||Te;let rt=_e==="ellipsis";const H=_e==="title",ee=_e===!0||_e==="tooltip";let ce=H||ee||rt,Me=!1,Ie=null;xt&&(Ie=xt[0],Me=xt.some(Mt=>Mt.checked));const Xe=l.getColumnIndex(ye),et=l.getVTColumnIndex(ye),nt={$table:l,$grid:l.xegrid,$rowIndex:ne,column:ye,columnIndex:Xe,$columnIndex:He,_columnIndex:et,firstFilterOption:Ie,fixed:X,type:pi,isHidden:ot,hasFilter:Me},ze={colid:ut,colspan:ye.colSpan>1?ye.colSpan:null,rowspan:ye.rowSpan>1?ye.rowSpan:null},pt={onClick:Mt=>l.triggerHeaderCellClickEvent(Mt,nt),onDblclick:Mt=>l.triggerHeaderCellDblclickEvent(Mt,nt)};Z&&!ce&&(rt=ce=!0);const Lt=be.drag&&de.trigger==="cell";let mt=!1;Lt&&(mt=!!(se&&se(nt))),(tt||Lt)&&(pt.onMousedown=Mt=>l.triggerHeaderCellMousedownEvent(Mt,nt)),be.drag&&(pt.onDragstart=l.handleHeaderCellDragDragstartEvent,pt.onDragend=l.handleHeaderCellDragDragendEvent,pt.onDragover=l.handleHeaderCellDragDragoverEvent,Lt&&(pt.onMouseup=l.handleHeaderCellDragMouseupEvent));const Ct=He===Y.length-1,$t=s.isBoolean(ye.resizable)?ye.resizable:be.resizable||ie,It=!ye.resizeWidth&&(ye.minWidth==="auto"||ye.width==="auto");let Ht=!1;S||(!z||z.id!==ut)&&Z&&!ye.fixed&&(et<ge.visibleStartIndex-ge.preloadSize||et>ge.visibleEndIndex+ge.preloadSize)&&(Ht=!0);const mo={};return ce?mo.height=`${ve}px`:mo.minHeight=`${ve}px`,g("th",Object.assign(Object.assign(Object.assign({class:["vxe-header--column",ut,{[`col--${lt}`]:lt,[`col--${Ue}`]:Ue,"col--last":Ct,"col--fixed":ye.fixed,"col--group":ke,"col--ellipsis":ce,"fixed--width":!It,"fixed--hidden":ot,"is--padding":he,"is--sortable":ye.sortable,"col--filter":!!xt,"is--filter-active":Me,"is--drag-active":be.drag&&!ye.fixed&&!mt&&(J||Se||!ye.parentId),"is--drag-disabled":be.drag&&mt,"col--current":k===ye},gt?s.isFunction(gt)?gt(nt):gt:"",me?s.isFunction(me)?me(nt):me:""],style:Ee?s.isFunction(Ee)?Ee(nt):Ee:null},ze),pt),{key:Re||Z||U||be.useKey||be.drag||ke?ut:He}),[g("div",{class:["vxe-cell",{"c--title":H,"c--tooltip":ee,"c--ellipsis":rt}],style:mo},Ht||q&&ot?[]:[g("div",{colid:ut,class:"vxe-cell--wrapper"},ye.renderHeader(nt))]),!ot&&$t?g("div",{class:"vxe-cell--col-resizable",onMousedown:Mt=>l.handleColResizeMousedownEvent(Mt,X,nt),onDblclick:Mt=>l.handleColResizeDblclickEvent(Mt,nt)}):fs(l)])})},C=(S,q,Y)=>{const{fixedType:ne}=e,{headerRowClassName:X,headerRowStyle:ie}=u,{isColLoading:Re,isDragColMove:me}=w,Ee=y.value,Ve=D.value;return Y.map((Oe,Te)=>{const tt={$table:l,$rowIndex:Te,fixed:ne,type:pi};return!Re&&Ee.drag&&Ve.animation?g(yn,{key:Te,name:`vxe-header--col-list${me?"":"-disabled"}`,tag:"tr",class:["vxe-header--row",X?s.isFunction(X)?X(tt):X:""],style:ie?s.isFunction(ie)?ie(tt):ie:null},{default:()=>le(S,q,Oe,Te)}):g("tr",{key:Te,class:["vxe-header--row",X?s.isFunction(X)?X(tt):X:""],style:ie?s.isFunction(ie)?ie(tt):ie:null},le(S,q,Oe,Te))})},O=()=>{const{fixedType:S,fixedColumn:q,tableColumn:Y}=e,{mouseConfig:ne,showHeaderOverflow:X,spanMethod:ie,footerSpanMethod:Re}=u,{isGroup:me,overflowX:Ee,scrollXLoad:Ve,scrollYLoad:Oe,dragCol:Te}=w,{visibleColumn:tt,fullColumnIdData:k}=b,z=p.value;let Z=N.value,U=Y,re=!1;if(me?U=tt:((Ve||Oe||X)&&(ie||Re||(re=!0)),(S||!Ee)&&(U=tt),S&&re&&(U=q||[]),Z=[U]),!S&&!me&&Ve&&Te&&U.length>2){const ge=k[Te.id];if(ge){const be=ge._index,de=U[0],we=U[U.length-1],P=k[de.id],ae=k[we.id];if(P&&ae){const ve=P._index,se=ae._index;be<ve?(U=[Te].concat(U),Z=[[Te].concat(Z[0])].concat(Z.slice(1))):be>se&&(U=U.concat([Te]),Z=[Z[0].concat([Te])].concat(Z.slice(1)))}}}return g("div",{ref:G,class:["vxe-table--header-wrapper",S?`fixed-${S}--wrapper`:"body--wrapper"],xid:i},[g("div",{ref:K,class:"vxe-table--header-inner-wrapper",onScroll(ge){l.triggerHeaderScrollEvent(ge,S)}},[S?fs(l):g("div",{ref:I,class:"vxe-body--x-space"}),g("table",{ref:V,class:"vxe-table--header",xid:i,cellspacing:0,cellpadding:0,border:0},[g("colgroup",{ref:_},U.map((ge,be)=>g("col",{name:ge.id,key:be}))),g("thead",{ref:T},C(me,re,Z))]),ne&&z.area?g("div",{class:"vxe-table--cell-area"},[g("span",{class:"vxe-table--cell-main-area"}),g("span",{class:"vxe-table--cell-copy-area"}),g("span",{class:"vxe-table--cell-extend-area"}),g("span",{class:"vxe-table--cell-multi-area"}),g("span",{class:"vxe-table--cell-active-area"}),g("span",{class:"vxe-table--cell-col-status-area"})]):fs(l)])])};return yt(()=>e.tableColumn,te),Ul(()=>{pe(()=>{const{fixedType:S}=e,{internalData:q}=l,{elemStore:Y}=q,ne=`${S||"main"}-header-`;Y[`${ne}wrapper`]=G,Y[`${ne}scroll`]=K,Y[`${ne}table`]=V,Y[`${ne}colgroup`]=_,Y[`${ne}list`]=T,Y[`${ne}xSpace`]=I,Y[`${ne}repair`]=j,te()})}),Gl(()=>{const{fixedType:S}=e,{internalData:q}=l,{elemStore:Y}=q,ne=`${S||"main"}-header-`;Y[`${ne}wrapper`]=null,Y[`${ne}scroll`]=null,Y[`${ne}table`]=null,Y[`${ne}colgroup`]=null,Y[`${ne}list`]=null,Y[`${ne}xSpace`]=null,Y[`${ne}repair`]=null}),O}}),{renderer:od,renderEmptyElement:gi}=ue,mi="footer";function ld(e,l,i){for(let u=0;u<e.length;u++){const{row:w,col:b,rowspan:y,colspan:D}=e[u];if(b>-1&&w>-1&&y&&D){if(w===l&&b===i)return{rowspan:y,colspan:D};if(l>=w&&l<w+y&&i>=b&&i<b+D)return{rowspan:0,colspan:0}}}}const bi=Wo({name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},setup(e){const l=Mo("$xeTable",{}),{xID:i,props:u,reactData:w,internalData:b}=l,{computeTooltipOpts:y,computeColumnOpts:D,computeColumnDragOpts:B,computeCellOpts:p,computeFooterCellOpts:c,computeDefaultRowHeight:v,computeResizableOpts:N}=l.getComputeMaps(),G=$e(),K=$e(),V=$e(),_=$e(),T=$e(),I=$e(),j=(C,O,S,q,Y)=>{const{fixedType:ne}=e,{resizable:X,border:ie,footerCellClassName:Re,footerCellStyle:me,footerAlign:Ee,footerSpanMethod:Ve,align:Oe,columnKey:Te,showFooterOverflow:tt}=u,{scrollXLoad:k,scrollYLoad:z,overflowX:Z,currentColumn:U,mergeFooterList:re}=w,{scrollXStore:ge}=b,be=y.value,de=N.value,{isAllColumnDrag:we}=de,P=D.value,ae=v.value,ve=p.value,se=c.value,J=Ji(se.height||ve.height)||ae;return C.map((Se,ye)=>{const{type:He,showFooterOverflow:Ue,footerAlign:qe,align:Ze,footerClassName:ht,editRender:xt,cellRender:gt}=Se,st=Se.id,it=xt||gt,ut=it?od.get(it.name):null,Ne=be.showAll,Le=Se.children&&Se.children.length,ke=ne?Se.fixed!==ne&&!Le:Se.fixed&&Z,ot=s.isBoolean(se.padding)?se.padding:ve.padding,he=s.eqNull(Ue)?tt:Ue,_e=qe||(ut?ut.tableFooterCellAlign:"")||Ee||Ze||(ut?ut.tableCellAlign:"")||Oe;let lt=he==="ellipsis";const rt=he==="title",H=he===!0||he==="tooltip";let ee=rt||H||lt;const ce=s.isBoolean(Se.resizable)?Se.resizable:P.resizable||X,Me={colid:st},Ie={},Xe=l.getColumnIndex(Se),et=l.getVTColumnIndex(Se),nt=et,ze={$table:l,$grid:l.xegrid,row:S,rowIndex:Y,_rowIndex:Y,$rowIndex:q,column:Se,columnIndex:Xe,$columnIndex:ye,_columnIndex:et,itemIndex:nt,items:S,fixed:ne,type:mi,data:O};k&&!ee&&(lt=ee=!0),(rt||H||Ne)&&(Ie.onMouseenter=It=>{rt?Os(It.currentTarget,Se):(H||Ne)&&l.triggerFooterTooltipEvent(It,ze)}),(H||Ne)&&(Ie.onMouseleave=It=>{(H||Ne)&&l.handleTargetLeaveEvent(It)}),Ie.onClick=It=>{l.dispatchEvent("footer-cell-click",Object.assign({cell:It.currentTarget},ze),It)},Ie.onDblclick=It=>{l.dispatchEvent("footer-cell-dblclick",Object.assign({cell:It.currentTarget},ze),It)};let pt=!1;if(re.length){const It=ld(re,Y,et);if(It){const{rowspan:Ht,colspan:mo}=It;if(!Ht||!mo)return null;Ht>1&&(pt=!0,Me.rowspan=Ht),mo>1&&(pt=!0,Me.colspan=mo)}}else if(Ve){const{rowspan:It=1,colspan:Ht=1}=Ve(ze)||{};if(!It||!Ht)return null;It>1&&(Me.rowspan=It),Ht>1&&(Me.colspan=Ht)}const Lt=ye===C.length-1,mt=!Se.resizeWidth&&(Se.minWidth==="auto"||Se.width==="auto");let Ct=!1;pt||k&&!Se.fixed&&(et<ge.visibleStartIndex-ge.preloadSize||et>ge.visibleEndIndex+ge.preloadSize)&&(Ct=!0);const $t={};return ee?$t.height=`${J}px`:$t.minHeight=`${J}px`,g("td",Object.assign(Object.assign(Object.assign(Object.assign({class:["vxe-footer--column",Se.id,{[`col--${_e}`]:_e,[`col--${He}`]:He,"col--last":Lt,"fixed--width":!mt,"fixed--hidden":ke,"is--padding":ot,"col--ellipsis":ee,"col--current":U===Se},kl(ht,ze),kl(Re,ze)]},Me),{style:me?s.isFunction(me)?me(ze):me:null}),Ie),{key:Te||k||z||P.useKey||P.drag?Se.id:ye}),[g("div",{class:["vxe-cell",{"c--title":rt,"c--tooltip":H,"c--ellipsis":lt}],style:$t},Ct?[]:[g("div",{colid:st,class:"vxe-cell--wrapper"},Se.renderFooter(ze))]),!ke&&ce&&we?g("div",{class:["vxe-cell--col-resizable",{"is--line":!ie||ie==="none"}],onMousedown:It=>l.handleColResizeMousedownEvent(It,ne,ze),onDblclick:It=>l.handleColResizeDblclickEvent(It,ze)}):gi(l)])})},te=C=>{const{fixedType:O,footerTableData:S}=e,{footerRowClassName:q,footerRowStyle:Y}=u,{isColLoading:ne,isDragColMove:X}=w,ie=D.value,Re=B.value;return S.map((me,Ee)=>{const Ve=Ee,Oe={$table:l,row:me,_rowIndex:Ve,$rowIndex:Ee,fixed:O,type:mi};return!ne&&ie.drag&&Re.animation?g(yn,{key:Ee,name:`vxe-header--col-list${X?"":"-disabled"}`,tag:"tr",class:["vxe-footer--row",q?s.isFunction(q)?q(Oe):q:""],style:Y?s.isFunction(Y)?Y(Oe):Y:null},{default:()=>j(C,S,me,Ee,Ve)}):g("tr",{key:Ee,class:["vxe-footer--row",q?s.isFunction(q)?q(Oe):q:""],style:Y?s.isFunction(Y)?Y(Oe):Y:null},j(C,S,me,Ee,Ve))})},le=()=>{const{fixedType:C,fixedColumn:O,tableColumn:S}=e,{spanMethod:q,footerSpanMethod:Y,showFooterOverflow:ne}=u,{visibleColumn:X,fullColumnIdData:ie}=b,{isGroup:Re,overflowX:me,scrollXLoad:Ee,scrollYLoad:Ve,dragCol:Oe}=w;let Te=S,tt=!1;if((Ee||Ve||ne)&&(q||Y||(tt=!0)),(C||!me)&&(Te=X),C&&tt&&(Te=O||[]),!C&&!Re&&Ee&&Oe&&Te.length>2){const k=ie[Oe.id];if(k){const z=k._index,Z=Te[0],U=Te[Te.length-1],re=ie[Z.id],ge=ie[U.id];if(re&&ge){const be=re._index,de=ge._index;z<be?Te=[Oe].concat(Te):z>de&&(Te=Te.concat([Oe]))}}}return g("div",{ref:G,class:["vxe-table--footer-wrapper",C?`fixed-${C}--wrapper`:"body--wrapper"],xid:i},[g("div",{ref:K,class:"vxe-table--footer-inner-wrapper",onScroll(k){l.triggerFooterScrollEvent(k,C)}},[C?gi(l):g("div",{ref:I,class:"vxe-body--x-space"}),g("table",{ref:V,class:"vxe-table--footer",xid:i,cellspacing:0,cellpadding:0,border:0},[g("colgroup",{ref:_},Te.map((k,z)=>g("col",{name:k.id,key:z}))),g("tfoot",{ref:T},te(Te))])])])};return Ul(()=>{pe(()=>{const{fixedType:C}=e,{elemStore:O}=b,S=`${C||"main"}-footer-`;O[`${S}wrapper`]=G,O[`${S}scroll`]=K,O[`${S}table`]=V,O[`${S}colgroup`]=_,O[`${S}list`]=T,O[`${S}xSpace`]=I})}),Gl(()=>{const{fixedType:C}=e,{elemStore:O}=b,S=`${C||"main"}-footer-`;O[`${S}wrapper`]=null,O[`${S}scroll`]=null,O[`${S}table`]=null,O[`${S}colgroup`]=null,O[`${S}list`]=null,O[`${S}xSpace`]=null}),le}}),{getConfig:eo}=ue,kr={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>eo().table.minHeight},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>eo().table.resizable},stripe:{type:Boolean,default:()=>eo().table.stripe},border:{type:[Boolean,String],default:()=>eo().table.border},padding:{type:Boolean,default:null},round:{type:Boolean,default:()=>eo().table.round},size:{type:String,default:()=>eo().table.size||eo().size},fit:{type:Boolean,default:()=>eo().table.fit},loading:Boolean,align:{type:String,default:()=>eo().table.align},headerAlign:{type:String,default:()=>eo().table.headerAlign},footerAlign:{type:String,default:()=>eo().table.footerAlign},showHeader:{type:Boolean,default:()=>eo().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>eo().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>eo().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>eo().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>eo().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>eo().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>eo().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>eo().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>eo().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>eo().table.emptyText},keepSource:{type:Boolean,default:()=>eo().table.keepSource},autoResize:{type:Boolean,default:()=>eo().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,cellConfig:Object,headerCellConfig:Object,footerCellConfig:Object,rowConfig:Object,dragConfig:Object,rowDragConfig:Object,columnDragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:Object,importConfig:Object,printConfig:Object,expandConfig:Object,treeConfig:Object,menuConfig:Object,mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:Object,validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:Object,customConfig:Object,scrollX:Object,scrollY:Object,virtualXConfig:Object,virtualYConfig:Object,scrollbarConfig:Object,animat:{type:Boolean,default:()=>eo().table.animat},delayHover:{type:Number,default:()=>eo().table.delayHover},params:Object},Ts=["update:data","keydown-start","keydown","keydown-end","paste","copy","cut","current-change","radio-change","checkbox-change","checkbox-all","checkbox-range-start","checkbox-range-change","checkbox-range-end","checkbox-range-select","cell-click","cell-dblclick","cell-menu","cell-mouseenter","cell-mouseleave","cell-selected","cell-delete-value","cell-backspace-value","header-cell-click","header-cell-dblclick","header-cell-menu","footer-cell-click","footer-cell-dblclick","footer-cell-menu","clear-merge","sort-change","clear-sort","filter-change","filter-visible","clear-filter","resizable-change","column-resizable-change","row-resizable-change","toggle-row-expand","toggle-tree-expand","menu-click","edit-closed","row-dragstart","row-dragover","row-dragend","column-dragstart","column-dragover","column-dragend","enter-append-row","edit-actived","edit-activated","edit-disabled","valid-error","scroll","scroll-boundary","custom","change-fnr","open-fnr","show-fnr","hide-fnr","fnr-change","fnr-find","fnr-find-all","fnr-replace","fnr-replace-all","cell-area-copy","cell-area-cut","cell-area-paste","cell-area-merge","clear-cell-area-selection","clear-cell-area-merge","header-cell-area-selection","cell-area-selection-invalid","cell-area-selection-start","cell-area-selection-drag","cell-area-selection-end","cell-area-extension-start","cell-area-extension-drag","cell-area-extension-end","cell-area-selection-all-start","cell-area-selection-all-end","cell-area-arrows-start","cell-area-arrows-end","active-cell-change-start","active-cell-change-end"],{getI18n:Nt,getIcon:fo,renderEmptyElement:xr}=ue,nd=Wo({name:"TableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},setup(e){const l=ue.getComponent("VxeModal"),i=ue.getComponent("VxeDrawer"),u=ue.getComponent("VxeButton"),w=ue.getComponent("VxeNumberInput"),b=ue.getComponent("VxeRadioGroup"),y=Mo("$xeTable",{}),{props:D,reactData:B,internalData:p}=y,{computeCustomOpts:c,computeColumnDragOpts:v,computeColumnOpts:N,computeIsMaxFixedColumn:G,computeResizableOpts:K}=y.getComputeMaps(),V=$e(),_=$e(),T=$e(),I=$e(),j=$e();let te,le=!1,C;const O=P=>{const{customStore:ae}=e;ae.activeWrapper=!0,y.customOpenEvent(P)},S=P=>{const{customStore:ae}=e;ae.activeWrapper=!1,setTimeout(()=>{!ae.activeBtn&&!ae.activeWrapper&&y.customCloseEvent(P)},300)},q=({$event:P})=>{B.isCustomStatus=!0,y.saveCustom(),y.closeCustom(),y.emitCustomEvent("confirm",P)},Y=({$event:P})=>{y.closeCustom(),y.emitCustomEvent("close",P)},ne=({$event:P})=>{y.cancelCustom(),y.closeCustom(),y.emitCustomEvent("cancel",P)},X=P=>{y.resetCustom(!0),y.closeCustom(),y.emitCustomEvent("reset",P)},ie=({$event:P})=>{ue.modal?ue.modal.confirm({content:Nt("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(ae=>{ae==="confirm"&&X(P)}):X(P)},Re=P=>{const{customColumnList:ae}=B,ve=s.findTree(ae,se=>se===P);if(ve&&ve.parent){const{parent:se}=ve;se.children&&se.children.length&&(se.renderVisible=se.children.every(J=>J.renderVisible),se.halfVisible=!se.renderVisible&&se.children.some(J=>J.renderVisible||J.halfVisible),Re(se))}},me=P=>{const ae=!P.renderVisible;c.value.immediate?(s.eachTree([P],se=>{se.visible=ae,se.renderVisible=ae,se.halfVisible=!1}),B.isCustomStatus=!0,y.handleCustom(),y.saveCustomStore("update:visible")):s.eachTree([P],se=>{se.renderVisible=ae,se.halfVisible=!1}),Re(P),y.checkCustomStatus()},Ee=P=>{c.value.immediate&&P.renderResizeWidth!==P.renderWidth&&(P.resizeWidth=P.renderResizeWidth,P.renderWidth=P.renderResizeWidth,B.isCustomStatus=!0,y.handleCustom(),y.saveCustomStore("update:width"))},Ve=(P,ae)=>{const ve=G.value;c.value.immediate?(P.renderFixed===ae?s.eachTree([P],J=>{J.fixed="",J.renderFixed=""}):(!ve||P.renderFixed)&&s.eachTree([P],J=>{J.fixed=ae,J.renderFixed=ae}),B.isCustomStatus=!0,y.handleCustom(),y.saveCustomStore("update:fixed")):P.renderFixed===ae?s.eachTree([P],J=>{J.renderFixed=""}):(!ve||P.renderFixed)&&s.eachTree([P],J=>{J.renderFixed=ae})},Oe=()=>{y.toggleCustomAllCheckbox()},Te=(P,ae,ve,se)=>{const J=_.value;if(!J)return;const Se=J.getBoundingClientRect();if(ae){const He=T.value;if(He)if(ve){const Ue=ae.getBoundingClientRect();He.style.display="block",He.style.top=`${Math.max(1,Ue.y+J.scrollTop-Se.y)}px`,He.style.height=`${Ue.height}px`,He.style.width=`${Ue.width}px`,He.setAttribute("drag-pos",se),He.setAttribute("drag-to-child",le?"y":"n")}else He.style.display=""}const ye=I.value;ye&&(ye.style.display="block",ye.style.top=`${Math.min(J.clientHeight+J.scrollTop-ye.clientHeight,P.clientY+J.scrollTop-Se.y)}px`,ye.style.left=`${Math.min(J.clientWidth+J.scrollLeft-ye.clientWidth,P.clientX+J.scrollLeft-Se.x)}px`,ye.setAttribute("drag-status",ve?le?"sub":"normal":"disabled"))},tt=()=>{const P=I.value,ae=T.value;P&&(P.style.display=""),ae&&(ae.style.display="")},k=P=>{const J=P.currentTarget.parentElement.parentElement.parentElement,Se=J.getAttribute("colid"),ye=y.getColumnById(Se);J.draggable=!0,j.value=ye,Zo(J,"active--drag-origin")},z=P=>{const J=P.currentTarget.parentElement.parentElement.parentElement;tt(),J.draggable=!1,j.value=null,Po(J,"active--drag-origin")},Z=P=>{P.dataTransfer&&P.dataTransfer.setDragImage(Cs(),0,0)},U=P=>{const{mouseConfig:ae}=D,{customColumnList:ve}=B,{collectColumn:se}=p,J=c.value,{immediate:Se}=J,ye=P.currentTarget,He=j.value,Ue=v.value,{isCrossDrag:qe,isSelfToChildDrag:Ze,isToChildDrag:ht,dragEndMethod:xt}=Ue,gt=C==="bottom"?1:0;if(te&&He&&te!==He){const st=He,it=te;Promise.resolve(xt?xt({oldColumn:st,newColumn:it,dragColumn:st,dragPos:C,dragToChild:!!le,offsetIndex:gt}):!0).then(ut=>{if(!ut)return;let Ne=-1,Le=-1;const ke={};s.eachTree([st],he=>{ke[he.id]=he});let ot=!1;if(Se){if(st.parentId&&it.parentId){if(!qe)return;if(ke[it.id]&&(ot=!0,!(qe&&Ze))){ue.modal&&ue.modal.message({status:"error",content:Nt("vxe.error.treeDragChild")});return}}else if(st.parentId){if(!qe)return}else if(it.parentId){if(!qe)return;if(ke[it.id]&&(ot=!0,!(qe&&Ze))){ue.modal&&ue.modal.message({status:"error",content:Nt("vxe.error.treeDragChild")});return}}const he=s.findTree(se,lt=>lt.id===st.id);if(ot&&qe&&Ze){if(he){const{items:lt,index:rt}=he,H=st.children||[];H.forEach(ee=>{ee.parentId=st.parentId}),lt.splice(rt,1,...H),st.children=[]}}else if(he){const{items:lt,index:rt,parent:H}=he;lt.splice(rt,1),H||(Ne=rt)}const _e=s.findTree(se,lt=>lt.id===it.id);if(_e){const{items:lt,index:rt,parent:H}=_e;qe&&ht&&le?(st.parentId=it.id,it.children=(it.children||[]).concat([st])):(st.parentId=it.parentId,lt.splice(rt+gt,0,st)),H||(Le=rt)}s.eachTree(se,(lt,rt,H,ee,ce)=>{if(!ce){const Me=rt+1;lt.renderSortNumber=Me}})}else Ne=s.findIndexOf(ve,he=>he.id===st.id),ve.splice(Ne,1),Le=s.findIndexOf(ve,he=>he.id===it.id),ve.splice(Le+gt,0,st);B.isDragColMove=!0,ae&&(y.clearSelected&&y.clearSelected(),y.clearCellAreas&&(y.clearCellAreas(),y.clearCopyCellArea())),y.dispatchEvent("column-dragend",{oldColumn:st,newColumn:it,dragColumn:st,dragPos:C,offsetIndex:gt,_index:{newIndex:Le,oldIndex:Ne}},P),Se&&(B.customColumnList=se.slice(0),y.handleColDragSwapColumn())}).catch(()=>{})}tt(),j.value=null,ye.draggable=!1,ye.removeAttribute("drag-pos"),Po(ye,"active--drag-target"),Po(ye,"active--drag-origin")},re=P=>{const ae=c.value,{immediate:ve}=ae,se=v.value,{isCrossDrag:J,isToChildDrag:Se}=se,ye=P.currentTarget,He=P.ctrlKey,Ue=ye.getAttribute("colid"),qe=y.getColumnById(Ue),Ze=j.value;if(qe&&(J||qe.level===1)){P.preventDefault();const xt=P.clientY-ye.getBoundingClientRect().y<ye.clientHeight/2?"top":"bottom";if(Ze&&Ze.id===qe.id||!J&&qe.level>1||!ve&&qe.level>1||qe.renderFixed){Te(P,ye,!1,xt);return}le=!!(J&&Se&&He&&ve),te=qe,C=xt,Te(P,ye,!0,xt)}},ge=()=>{const P=j.value,ae=v.value;return g("div",{},[g("div",{ref:T,class:["vxe-table-custom-popup--drag-line",{"is--guides":ae.showGuidesStatus}]}),g("div",{ref:I,class:"vxe-table-custom-popup--drag-tip"},[g("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[g("div",{class:"vxe-table-custom-popup--drag-tip-status"},[g("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",fo().TABLE_DRAG_STATUS_ROW]}),g("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",fo().TABLE_DRAG_STATUS_SUB_ROW]}),g("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",fo().TABLE_DRAG_DISABLED]})]),g("div",{class:"vxe-table-custom-popup--drag-tip-content"},Nt("vxe.custom.cstmDragTarget",[P&&P.type!=="html"?P.getTitle():""]))])])])},be=()=>{const{customStore:P}=e,{isCustomStatus:ae,customColumnList:ve}=B,se=c.value,{immediate:J}=se,Se=v.value,{maxHeight:ye}=P,{checkMethod:He,visibleMethod:Ue,allowVisible:qe,allowSort:Ze,allowFixed:ht,trigger:xt,placement:gt}=se,st=G.value,{isCrossDrag:it}=Se,ut=se.slots||{},Ne=ut.header,Le=ut.top,ke=ut.bottom,ot=ut.default,he=ut.footer,_e=[],lt={},rt=P.isAll,H=P.isIndeterminate;xt==="hover"&&(lt.onMouseenter=O,lt.onMouseleave=S);const ee={$table:y,$grid:y.xegrid,columns:ve,isAllChecked:rt,isAllIndeterminate:H,isCustomStatus:ae};return s.eachTree(ve,(ce,Me,Ie,Xe,et)=>{if(Ue?Ue({column:ce}):!0){const ze=ce.renderVisible,pt=ce.halfVisible,Lt=ce.children&&ce.children.length,mt=ho(ce.getTitle(),1),Ct=He?!He({column:ce}):!1,$t=!ze;_e.push(g("li",{key:ce.id,colid:ce.id,class:["vxe-table-custom--option",`level--${ce.level}`,{"is--hidden":Ct||$t,"is--group":Lt}],onDragstart:Z,onDragend:U,onDragover:re},[qe?g("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":ze,"is--indeterminate":pt,"is--disabled":Ct}],title:Nt("vxe.custom.setting.colVisible"),onClick:()=>{Ct||me(ce)}},[g("span",{class:["vxe-checkbox--icon",pt?fo().TABLE_CHECKBOX_INDETERMINATE:ze?fo().TABLE_CHECKBOX_CHECKED:fo().TABLE_CHECKBOX_UNCHECKED]})]):Ke(),g("div",{class:"vxe-table-custom--name-option"},[Ze&&(it&&J||ce.level===1)?g("div",{class:"vxe-table-custom--sort-option"},[g("span",Object.assign({class:["vxe-table-custom--sort-btn",{"is--disabled":Ct||$t||ce.renderFixed}],title:Nt("vxe.custom.setting.sortHelpTip")},Ct||$t||ce.renderFixed?{}:{onMousedown:k,onMouseup:z}),[g("i",{class:fo().TABLE_CUSTOM_SORT})])]):Ke(),ce.type==="html"?g("div",{key:"1",class:"vxe-table-custom--checkbox-label",innerHTML:mt}):g("div",{key:"0",class:"vxe-table-custom--checkbox-label"},mt)]),!et&&ht?g("div",{class:"vxe-table-custom--fixed-option"},[u?g(u,{mode:"text",icon:ce.renderFixed==="left"?fo().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:fo().TOOLBAR_TOOLS_FIXED_LEFT,status:ce.renderFixed==="left"?"primary":"",disabled:Ct||$t||st&&!ce.renderFixed,title:Nt(ce.renderFixed==="left"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft"),onClick:()=>{Ve(ce,"left")}}):Ke(),u?g(u,{mode:"text",icon:ce.renderFixed==="right"?fo().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:fo().TOOLBAR_TOOLS_FIXED_RIGHT,status:ce.renderFixed==="right"?"primary":"",disabled:Ct||$t||st&&!ce.renderFixed,title:Nt(ce.renderFixed==="right"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight"),onClick:()=>{Ve(ce,"right")}}):Ke()]):Ke()]))}}),g("div",{ref:V,key:"simple",class:["vxe-table-custom-wrapper",`placement--${gt}`,{"is--active":P.visible}],style:ye&&!["left","right"].includes(gt)?{maxHeight:`${ye}px`}:{}},P.visible?[g("div",{class:"vxe-table-custom--header"},Ne?y.callSlot(Ne,ee):[g("ul",{class:"vxe-table-custom--panel-list"},[g("li",{class:"vxe-table-custom--option"},[qe?g("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":rt,"is--indeterminate":H}],title:Nt("vxe.table.allTitle"),onClick:Oe},[g("span",{class:["vxe-checkbox--icon",H?fo().TABLE_CHECKBOX_INDETERMINATE:rt?fo().TABLE_CHECKBOX_CHECKED:fo().TABLE_CHECKBOX_UNCHECKED]}),g("span",{class:"vxe-checkbox--label"},Nt("vxe.toolbar.customAll"))]):g("span",{class:"vxe-checkbox--label"},Nt("vxe.table.customTitle"))])])]),g("div",{ref:_,class:"vxe-table-custom--body"},[Le?g("div",{class:"vxe-table-custom--panel-top"},y.callSlot(Le,ee)):xr(y),ot?g("div",{class:"vxe-table-custom--panel-body"},y.callSlot(ot,ee)):g(yn,Object.assign({class:"vxe-table-custom--panel-list",name:"vxe-table-custom--list",tag:"ul"},lt),{default:()=>_e}),ke?g("div",{class:"vxe-table-custom--panel-bottom"},y.callSlot(ke,ee)):xr(y),ge()]),se.showFooter?g("div",{class:"vxe-table-custom--footer"},he?y.callSlot(he,ee):[g("div",{class:"vxe-table-custom--footer-buttons"},[u?g(u,{mode:"text",content:se.resetButtonText||Nt("vxe.table.customRestore"),disabled:!ae,onClick:ie}):Ke(),J?u?g(u,{mode:"text",content:se.closeButtonText||Nt("vxe.table.customClose"),onClick:Y}):Ke():u?g(u,{mode:"text",content:se.cancelButtonText||Nt("vxe.table.customCancel"),onClick:ne}):Ke(),J?Ke():u?g(u,{mode:"text",status:"primary",content:se.confirmButtonText||Nt("vxe.table.customConfirm"),onClick:q}):Ke()])]):null]:[])},de=()=>{const{customStore:P}=e,{resizable:ae}=D,{isCustomStatus:ve,customColumnList:se}=B,J=c.value,{immediate:Se}=J,ye=v.value,{mode:He,modalOptions:Ue,drawerOptions:qe,allowVisible:Ze,allowSort:ht,allowFixed:xt,allowResizable:gt,checkMethod:st,visibleMethod:it}=J,ut=N.value,{maxFixedSize:Ne}=ut,Le=K.value,{minWidth:ke,maxWidth:ot}=Le,he=Object.assign({},Ue),_e=Object.assign({},qe),lt=G.value,{isCrossDrag:rt}=ye,H=J.slots||{},ee=H.header,ce=H.top,Me=H.bottom,Ie=H.default,Xe=H.footer,et=[],nt=P.isAll,ze=P.isIndeterminate,pt={$table:y,$grid:y.xegrid,columns:se,isAllChecked:nt,isAllIndeterminate:ze,isCustomStatus:ve};s.eachTree(se,(mt,Ct,$t,It,Ht)=>{if(it?it({column:mt}):!0){let Mt=0,Zt=0;if(gt){const Pt={$table:y,column:mt,columnIndex:Ct,$columnIndex:Ct,$rowIndex:-1};ke&&(Mt=s.toNumber(s.isFunction(ke)?ke(Pt):ke)),ot&&(Zt=s.toNumber(s.isFunction(ot)?ot(Pt):ot))}const $o=mt.renderVisible,wt=mt.halfVisible,xo=ho(mt.getTitle(),1),io=mt.children&&mt.children.length,kt=st?!st({column:mt}):!1,ro=!$o;et.push(g("tr",{key:mt.id,colid:mt.id,class:[`vxe-table-custom-popup--row level--${mt.level}`,{"is--group":io}],onDragstart:Z,onDragend:U,onDragover:re},[Ze?g("td",{class:"vxe-table-custom-popup--column-item col--visible"},[g("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":$o,"is--indeterminate":wt,"is--disabled":kt}],title:Nt("vxe.custom.setting.colVisible"),onClick:()=>{kt||me(mt)}},[g("span",{class:["vxe-checkbox--icon",wt?fo().TABLE_CHECKBOX_INDETERMINATE:$o?fo().TABLE_CHECKBOX_CHECKED:fo().TABLE_CHECKBOX_UNCHECKED]})])]):Ke(),g("td",{class:"vxe-table-custom-popup--column-item col--name"},[g("div",{class:"vxe-table-custom-popup--name"},[ht?rt&&Se||mt.level===1?g("div",Object.assign({class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":kt||ro||mt.renderFixed}],title:Nt("vxe.custom.setting.sortHelpTip")},kt||ro||mt.renderFixed?{}:{onMousedown:k,onMouseup:z}),[g("i",{class:fo().TABLE_CUSTOM_SORT})]):g("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):Ke(),mt.type==="html"?g("div",{key:"1",class:"vxe-table-custom-popup--title",innerHTML:xo}):g("div",{key:"0",class:"vxe-table-custom-popup--title",title:xo},xo)])]),gt?g("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[mt.children&&mt.children.length||!(s.isBoolean(mt.resizable)?mt.resizable:ut.resizable||ae)?g("span","-"):w?g(w,{type:"integer",immediate:!1,disabled:kt||ro,modelValue:mt.renderResizeWidth,min:Mt||void 0,max:Zt||void 0,"onUpdate:modelValue"(Pt){const so=Math.max(0,Number(Pt));mt.renderResizeWidth=so},onChange(){Ee(mt)}}):Ke()]):Ke(),xt?g("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[Ht?g("span","-"):b?g(b,{modelValue:mt.renderFixed||"",type:"button",size:"mini",disabled:kt||ro,options:[{label:Nt("vxe.custom.setting.fixedLeft"),value:"left",disabled:kt||ro||lt},{label:Nt("vxe.custom.setting.fixedUnset"),value:"",disabled:kt||ro},{label:Nt("vxe.custom.setting.fixedRight"),value:"right",disabled:kt||ro||lt}],"onUpdate:modelValue"(Pt){Ve(mt,Pt)}}):Ke()]):Ke()]))}});const Lt={default:()=>Ie?y.callSlot(Ie,pt):g("div",{ref:_,class:"vxe-table-custom-popup--body"},[ce?g("div",{class:"vxe-table-custom-popup--table-top"},y.callSlot(ce,pt)):xr(y),g("div",{class:"vxe-table-custom-popup--table-wrapper"},[g("table",{},[g("colgroup",{},[Ze?g("col",{class:"vxe-table-custom-popup--table-col-seq"}):Ke(),g("col",{class:"vxe-table-custom-popup--table-col-title"}),gt?g("col",{class:"vxe-table-custom-popup--table-col-width"}):Ke(),xt?g("col",{class:"vxe-table-custom-popup--table-col-fixed"}):Ke()]),g("thead",{},[g("tr",{},[Ze?g("th",{},[g("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":nt,"is--indeterminate":ze}],title:Nt("vxe.table.allTitle"),onClick:Oe},[g("span",{class:["vxe-checkbox--icon",ze?fo().TABLE_CHECKBOX_INDETERMINATE:nt?fo().TABLE_CHECKBOX_CHECKED:fo().TABLE_CHECKBOX_UNCHECKED]}),g("span",{class:"vxe-checkbox--label"},Nt("vxe.toolbar.customAll"))])]):Ke(),g("th",{},Nt("vxe.custom.setting.colTitle")),gt?g("th",{},Nt("vxe.custom.setting.colResizable")):Ke(),xt?g("th",{},Nt(`vxe.custom.setting.${Ne?"colFixedMax":"colFixed"}`,[Ne])):Ke()])]),g(yn,{class:"vxe-table-custom--panel-list",tag:"tbody",name:"vxe-table-custom--list"},{default:()=>et})])]),Me?g("div",{class:"vxe-table-custom-popup--table-bottom"},y.callSlot(Me,pt)):xr(y),ge()]),footer:()=>Xe?y.callSlot(Xe,pt):g("div",{class:"vxe-table-custom-popup--footer"},[u?g(u,{content:J.resetButtonText||Nt("vxe.custom.cstmRestore"),disabled:!ve,onClick:ie}):Ke(),Se?u?g(u,{content:J.closeButtonText||Nt("vxe.table.customClose"),onClick:Y}):Ke():u?g(u,{content:J.cancelButtonText||Nt("vxe.table.customCancel"),onClick:ne}):Ke(),Se?Ke():u?g(u,{status:"primary",content:J.confirmButtonText||Nt("vxe.custom.cstmConfirm"),onClick:q}):Ke()])};return ee&&(Lt.header=()=>y.callSlot(ee,pt)),He==="drawer"?i?g(i,{key:"drawer",className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",_e.className||""].join(" "),modelValue:P.visible,title:_e.title||Nt("vxe.custom.cstmTitle"),width:_e.width||Math.min(880,Math.floor(document.documentElement.clientWidth*.6)),position:_e.position,resize:!!_e.resize,escClosable:!!_e.escClosable,maskClosable:!!_e.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(mt){P.visible=mt}},Lt):Ke():l?g(l,{key:"modal",className:["vxe-table-custom-modal-wrapper","vxe-table--ignore-clear",he.className||""].join(" "),modelValue:P.visible,title:he.title||Nt("vxe.custom.cstmTitle"),width:he.width||Math.min(880,document.documentElement.clientWidth),minWidth:he.minWidth||700,height:he.height||Math.min(680,document.documentElement.clientHeight),minHeight:he.minHeight||400,showZoom:he.showZoom,showMaximize:he.showMaximize,showMinimize:he.showMinimize,mask:he.mask,lockView:he.lockView,resize:he.resize,escClosable:!!he.escClosable,maskClosable:!!he.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(mt){P.visible=mt}},Lt):Ke()},we=()=>{const P=c.value;return["modal","drawer","popup"].includes(`${P.mode}`)?de():be()};return pe(()=>{const P=c.value,{mode:ae}=P;l||Ye("vxe.error.reqComp",["vxe-modal"]),!i&&ae==="drawer"&&Ye("vxe.error.reqComp",["vxe-drawer"]),u||Ye("vxe.error.reqComp",["vxe-button"]),w||Ye("vxe.error.reqComp",["vxe-number-input"]),b||Ye("vxe.error.reqComp",["vxe-radio-group"])}),we}}),{getI18n:vr,getIcon:Kn,renderer:xi}=ue,rd=Wo({name:"VxeTableFilterPanel",props:{filterStore:Object},setup(e){const l=Mo("$xeTable",{}),{reactData:i,internalData:u,getComputeMaps:w}=l,{computeFilterOpts:b}=w(),y=Be(()=>{const{filterStore:I}=e;return I&&I.options.some(j=>j.checked)}),D=(I,j)=>{const{filterStore:te}=e;te.options.forEach(le=>{le._checked=j,le.checked=j}),te.isAllSelected=j,te.isIndeterminate=!1},B=I=>{l.handleFilterConfirmFilter(I)},p=(I,j,te)=>{l.handleFilterChangeRadioOption(I,j,te)},c=I=>{l.handleFilterResetFilter(I)},v=(I,j,te)=>{l.handleFilterChangeMultipleOption(I,j,te)},N=(I,j,te)=>{l.handleFilterChangeOption(I,j,te)},G=(I,j)=>{const{filterStore:te}=e;te.multiple?D(I,j):c(I)},K={changeRadioOption:p,changeMultipleOption:v,changeAllOption:G,changeOption:N,confirmFilter:B,resetFilter:c},V=(I,j)=>{const{filterStore:te}=e,{column:le,multiple:C,maxHeight:O}=te,S=le?le.slots:null,q=S?S.filter:null,Y=Object.assign({},u._currFilterParams,{$panel:K,$table:l}),ne=j?j.renderTableFilter||j.renderFilter:null;if(q)return[g("div",{class:"vxe-table--filter-template"},l.callSlot(q,Y))];if(ne)return[g("div",{class:"vxe-table--filter-template"},So(ne(I,Y)))];const X=C?te.isAllSelected:!te.options.some(Re=>Re._checked),ie=C&&te.isIndeterminate;return[g("ul",{class:"vxe-table--filter-header"},[g("li",{class:["vxe-table--filter-option",{"is--checked":X,"is--indeterminate":ie}],title:vr(C?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:Re=>{G(Re,!te.isAllSelected)}},(C?[g("span",{class:["vxe-checkbox--icon",ie?Kn().TABLE_CHECKBOX_INDETERMINATE:X?Kn().TABLE_CHECKBOX_CHECKED:Kn().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([g("span",{class:"vxe-checkbox--label"},vr("vxe.table.allFilter"))]))]),g("ul",{class:"vxe-table--filter-body",style:O?{maxHeight:`${O}px`}:{}},te.options.map(Re=>{const me=Re._checked;return g("li",{class:["vxe-table--filter-option",{"is--checked":Re._checked}],title:Re.label,onClick:Ee=>{N(Ee,!Re._checked,Re)}},(C?[g("span",{class:["vxe-checkbox--icon",me?Kn().TABLE_CHECKBOX_CHECKED:Kn().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([g("span",{class:"vxe-checkbox--label"},ho(Re.label,1))]))}))]},_=()=>{const{filterStore:I}=e,{column:j,multiple:te}=I,le=b.value,C=y.value,{filterRender:O}=j,S=ft(O)?xi.get(O.name):null,q=!C&&!I.isAllSelected&&!I.isIndeterminate;return te&&(!S||!(S.showTableFilterFooter===!1||S.showFilterFooter===!1||S.isFooter===!1))?[g("div",{class:"vxe-table--filter-footer"},[g("button",{class:{"is--disabled":q},disabled:q,onClick:B},le.confirmButtonText||vr("vxe.table.confirmFilter")),g("button",{onClick:c},le.resetButtonText||vr("vxe.table.resetFilter"))])]:[]};return()=>{const{filterStore:I}=e,{initStore:j}=i,{visible:te,multiple:le,column:C}=I,O=C?C.filterRender:null,S=ft(O)?xi.get(O.name):null,q=S?S.tableFilterClassName||S.filterClassName:"",Y=Object.assign({},u._currFilterParams,{$panel:K,$table:l}),ne=b.value,{destroyOnClose:X}=ne;return g("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",kl(q,Y),{"is--animat":l.props.animat,"is--multiple":le,"is--active":te}],style:I.style},j.filter&&(!X||te)&&C?V(O,S).concat(_()):[])}}}),{getI18n:ql,getIcon:sd}=ue,id=Wo({name:"VxeTableImportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const l=ue.getComponent("VxeModal"),i=ue.getComponent("VxeButton"),u=ue.getComponent("VxeSelect"),w=Mo("$xeTable",{}),{computeImportOpts:b}=w.getComputeMaps(),y=fl({loading:!1}),D=$e(),B=Be(()=>{const{storeData:T}=e;return`${T.filename}.${T.type}`}),p=Be(()=>{const{storeData:T}=e;return T.file&&T.type}),c=Be(()=>{const{storeData:T}=e,{type:I,typeList:j}=T;if(I){const te=s.find(j,le=>I===le.value);return te?te.label:"*.*"}return`*.${j.map(te=>te.value).join(", *.")}`}),v=()=>{const{storeData:T}=e;Object.assign(T,{filename:"",sheetName:"",type:""})},N=()=>{const{storeData:T,defaultOptions:I}=e;w.readFile(I).then(j=>{const{file:te}=j;Object.assign(T,Vi(te),{file:te})}).catch(j=>j)},G=()=>{pe(()=>{const T=D.value;T&&T.focus()})},K=()=>{const{storeData:T}=e;T.visible=!1},V=()=>{const{storeData:T,defaultOptions:I}=e,j=b.value;y.loading=!0,w.importByFile(T.file,Object.assign({},j,I)).then(()=>{y.loading=!1,T.visible=!1}).catch(()=>{y.loading=!1})},_=()=>{const{defaultOptions:T,storeData:I}=e,j=B.value,te=p.value,le=c.value,C=T.slots||{},O=C.top,S=C.bottom,q=C.default,Y=C.footer;return l?g(l,{id:"VXE_IMPORT_MODAL",modelValue:I.visible,title:ql("vxe.import.impTitle"),className:"vxe-table-export-popup-wrapper",width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:y.loading,"onUpdate:modelValue"(ne){I.visible=ne},onShow:G},{default:()=>{const ne={$table:w,$grid:w.xegrid,options:T,params:T.params};return g("div",{class:"vxe-table-export--panel"},[O?g("div",{class:"vxe-table-export--panel-top"},w.callSlot(O,ne)):Ke(),g("div",{class:"vxe-table-export--panel-body"},q?w.callSlot(q,ne):[g("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[g("tbody",[g("tr",[g("td",ql("vxe.import.impFile")),g("td",[te?g("div",{class:"vxe-table-export--selected--file",title:j},[g("span",j),g("i",{class:sd().INPUT_CLEAR,onClick:v})]):g("button",{ref:D,class:"vxe-table-export--select--file",onClick:N},ql("vxe.import.impSelect"))])]),g("tr",[g("td",ql("vxe.import.impType")),g("td",le)]),g("tr",[g("td",ql("vxe.import.impMode")),g("td",[u?g(u,{modelValue:T.mode,options:I.modeList,"onUpdate:modelValue"(X){T.mode=X}}):Ke()])])])])]),S?g("div",{class:"vxe-table-export--panel-bottom"},w.callSlot(S,ne)):Ke()])},footer(){const ne={$table:w,$grid:w.xegrid,options:T,params:T.params};return g("div",{class:"vxe-table-export--panel-footer"},Y?w.callSlot(Y,ne):[g("div",{class:"vxe-table-export--panel-btns"},[i?g(i,{content:ql("vxe.import.impCancel"),onClick:K}):Ke(),i?g(i,{status:"primary",disabled:!te||y.loading,content:ql("vxe.import.impConfirm"),onClick:V}):Ke()])])}}):Ke()};return pe(()=>{l||Ye("vxe.error.reqComp",["vxe-modal"]),i||Ye("vxe.error.reqComp",["vxe-button"]),u||Ye("vxe.error.reqComp",["vxe-select"])}),_}}),{getI18n:Yt,getIcon:cn}=ue,ad=Wo({name:"VxeTableExportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const l=ue.getComponent("VxeModal"),i=ue.getComponent("VxeButton"),u=ue.getComponent("VxeSelect"),w=ue.getComponent("VxeInput"),b=ue.getComponent("VxeCheckbox"),y=Mo("$xeTable",{}),{computeExportOpts:D,computePrintOpts:B}=y.getComputeMaps(),p=fl({isAll:!1,isIndeterminate:!1,loading:!1}),c=$e(),v=$e(),N=$e(),G=Be(()=>{const{storeData:X}=e;return X.columns.every(ie=>ie.checked)}),K=Be(()=>{const{defaultOptions:X}=e;return["html","xml","xlsx","pdf"].indexOf(X.type)>-1}),V=Be(()=>{const{storeData:X,defaultOptions:ie}=e;return!ie.original&&ie.mode==="current"&&(X.isPrint||["html","xlsx"].indexOf(ie.type)>-1)}),_=Be(()=>{const{defaultOptions:X}=e;return!X.original&&["xlsx"].indexOf(X.type)>-1}),T=X=>{const{storeData:ie}=e,Re=s.findTree(ie.columns,me=>me===X);if(Re&&Re.parent){const{parent:me}=Re;me.children&&me.children.length&&(me.checked=me.children.every(Ee=>Ee.checked),me.halfChecked=!me.checked&&me.children.some(Ee=>Ee.checked||Ee.halfChecked),T(me))}},I=()=>{const{storeData:X}=e,ie=X.columns;p.isAll=ie.every(Re=>Re.disabled||Re.checked),p.isIndeterminate=!p.isAll&&ie.some(Re=>!Re.disabled&&(Re.checked||Re.halfChecked))},j=X=>{const ie=!X.checked;s.eachTree([X],Re=>{Re.checked=ie,Re.halfChecked=!1}),T(X),I()},te=()=>{const{storeData:X}=e,ie=!p.isAll;s.eachTree(X.columns,Re=>{Re.disabled||(Re.checked=ie,Re.halfChecked=!1)}),p.isAll=ie,I()},le=()=>{pe(()=>{const X=v.value,ie=N.value,Re=c.value,me=X||ie||Re;me&&me.focus()}),I()},C=()=>{const{storeData:X,defaultOptions:ie}=e,{hasMerge:Re,columns:me}=X,Ee=G.value,Ve=V.value,Oe=s.searchTree(me,Te=>Te.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},ie,{columns:Oe,isMerge:Re&&Ve&&Ee?ie.isMerge:!1})},O=()=>{const{storeData:X}=e,ie=B.value;X.visible=!1,y.print(Object.assign({},ie,C()))},S=()=>{const{storeData:X}=e,ie=D.value;p.loading=!0,y.exportData(Object.assign({},ie,C())).then(()=>{p.loading=!1,X.visible=!1}).catch(()=>{p.loading=!1})},q=()=>{const{storeData:X}=e;X.visible=!1},Y=()=>{const{storeData:X}=e;X.isPrint?O():S()},ne=()=>{const{defaultOptions:X,storeData:ie}=e,{isAll:Re,isIndeterminate:me}=p,{hasTree:Ee,hasMerge:Ve,isPrint:Oe,hasColgroup:Te,columns:tt}=ie,{isHeader:k}=X,z=[],Z=G.value,U=K.value,re=V.value,ge=_.value,be=X.slots||{},de=be.top,we=be.bottom,P=be.default,ae=be.footer,ve=be.parameter;return s.eachTree(tt,se=>{const J=ho(se.getTitle(),1),Se=se.children&&se.children.length,ye=se.checked,He=se.halfChecked,Ue=se.type==="html";z.push(g("li",{key:se.id,class:["vxe-table-export--panel-column-option",`level--${se.level}`,{"is--group":Se,"is--checked":ye,"is--indeterminate":He,"is--disabled":se.disabled}],title:Ue?"":J,onClick:()=>{se.disabled||j(se)}},[g("span",{class:["vxe-checkbox--icon",He?cn().TABLE_CHECKBOX_INDETERMINATE:ye?cn().TABLE_CHECKBOX_CHECKED:cn().TABLE_CHECKBOX_UNCHECKED]}),Ue?g("span",{key:"1",class:"vxe-checkbox--label",innerHTML:J}):g("span",{key:"0",class:"vxe-checkbox--label"},J)]))}),l?g(l,{id:"VXE_EXPORT_MODAL",modelValue:ie.visible,title:Yt(Oe?"vxe.export.printTitle":"vxe.export.expTitle"),className:"vxe-table-export-popup-wrapper",width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:p.loading,"onUpdate:modelValue"(se){ie.visible=se},onShow:le},{default:()=>{const se={$table:y,$grid:y.xegrid,options:X,columns:tt,params:X.params},J=X.mode==="empty";return g("div",{class:"vxe-table-export--panel"},[de?g("div",{class:"vxe-table-export--panel-top"},y.callSlot(de,se)):Ke(),g("div",{class:"vxe-table-export--panel-body"},P?y.callSlot(P,se):[g("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[g("tbody",[[Oe?Ke():g("tr",[g("td",Yt("vxe.export.expName")),g("td",[w?g(w,{ref:v,modelValue:X.filename,type:"text",clearable:!0,placeholder:Yt("vxe.export.expNamePlaceholder"),"onUpdate:modelValue"(Se){X.filename=Se}}):Ke()])]),Oe?Ke():g("tr",[g("td",Yt("vxe.export.expType")),g("td",[u?g(u,{modelValue:X.type,options:ie.typeList,"onUpdate:modelValue"(Se){X.type=Se}}):Ke()])]),Oe||U?g("tr",[g("td",Yt("vxe.export.expSheetName")),g("td",[w?g(w,{ref:N,modelValue:X.sheetName,type:"text",clearable:!0,placeholder:Yt("vxe.export.expSheetNamePlaceholder"),"onUpdate:modelValue"(Se){X.sheetName=Se}}):Ke()])]):Ke(),g("tr",[g("td",Yt("vxe.export.expMode")),g("td",[u?g(u,{modelValue:X.mode,options:ie.modeList.map(Se=>({value:Se.value,label:Yt(Se.label)})),"onUpdate:modelValue"(Se){X.mode=Se}}):Ke()])]),g("tr",[g("td",[Yt("vxe.export.expColumn")]),g("td",[g("div",{class:"vxe-table-export--panel-column"},[g("ul",{class:"vxe-table-export--panel-column-header"},[g("li",{class:["vxe-table-export--panel-column-option",{"is--checked":Re,"is--indeterminate":me}],title:Yt("vxe.table.allTitle"),onClick:te},[g("span",{class:["vxe-checkbox--icon",me?cn().TABLE_CHECKBOX_INDETERMINATE:Re?cn().TABLE_CHECKBOX_CHECKED:cn().TABLE_CHECKBOX_UNCHECKED]}),g("span",{class:"vxe-checkbox--label"},Yt("vxe.export.expCurrentColumn"))])]),g("ul",{class:"vxe-table-export--panel-column-body"},z)])])]),g("tr",[g("td",Yt("vxe.export.expOpts")),ve?g("td",[g("div",{class:"vxe-table-export--panel-option-row"},y.callSlot(ve,se))]):g("td",[g("div",{class:"vxe-table-export--panel-option-row"},[b?g(b,{modelValue:J||X.isHeader,disabled:J,title:Yt("vxe.export.expHeaderTitle"),content:Yt("vxe.export.expOptHeader"),"onUpdate:modelValue"(Se){X.isHeader=Se}}):Ke(),b?g(b,{modelValue:X.isFooter,disabled:!ie.hasFooter,title:Yt("vxe.export.expFooterTitle"),content:Yt("vxe.export.expOptFooter"),"onUpdate:modelValue"(Se){X.isFooter=Se}}):Ke(),b?g(b,{modelValue:J?!1:X.original,disabled:J,title:Yt("vxe.export.expOriginalTitle"),content:Yt("vxe.export.expOptOriginal"),"onUpdate:modelValue"(Se){X.original=Se}}):Ke()]),g("div",{class:"vxe-table-export--panel-option-row"},[b?g(b,{modelValue:k&&Te&&re?X.isColgroup:!1,title:Yt("vxe.export.expColgroupTitle"),disabled:!k||!Te||!re,content:Yt("vxe.export.expOptColgroup"),"onUpdate:modelValue"(Se){X.isColgroup=Se}}):Ke(),b?g(b,{modelValue:Ve&&re&&Z?X.isMerge:!1,title:Yt("vxe.export.expMergeTitle"),disabled:J||!Ve||!re||!Z,content:Yt("vxe.export.expOptMerge"),"onUpdate:modelValue"(Se){X.isMerge=Se}}):Ke(),Oe||!b?Ke():g(b,{modelValue:ge?X.useStyle:!1,disabled:!ge,title:Yt("vxe.export.expUseStyleTitle"),content:Yt("vxe.export.expOptUseStyle"),"onUpdate:modelValue"(Se){X.useStyle=Se}}),b?g(b,{modelValue:Ee?X.isAllExpand:!1,disabled:J||!Ee,title:Yt("vxe.export.expAllExpandTitle"),content:Yt("vxe.export.expOptAllExpand"),"onUpdate:modelValue"(Se){X.isAllExpand=Se}}):Ke()])])])]])])]),we?g("div",{class:"vxe-table-export--panel-bottom"},y.callSlot(we,se)):Ke()])},footer(){const se={$table:y,$grid:y.xegrid,options:X,columns:tt,params:X.params};return g("div",{class:"vxe-table-export--panel-footer"},ae?y.callSlot(ae,se):[g("div",{class:"vxe-table-export--panel-btns"},[i?g(i,{content:Yt("vxe.export.expCancel"),onClick:q}):Ke(),i?g(i,{ref:c,status:"primary",content:Yt(Oe?"vxe.export.expPrint":"vxe.export.expConfirm"),onClick:Y}):Ke()])])}}):Ke()};return pe(()=>{l||Ye("vxe.error.reqComp",["vxe-modal"]),i||Ye("vxe.error.reqComp",["vxe-button"]),u||Ye("vxe.error.reqComp",["vxe-select"]),w||Ye("vxe.error.reqComp",["vxe-input"]),b||Ye("vxe.error.reqComp",["vxe-checkbox"])}),ne}}),{getIcon:cd}=ue,dd=Wo({name:"VxeTableMenuPanel",setup(e,l){const i=s.uniqueId(),u=Mo("$xeTable",{}),{reactData:w}=u,b=$e(),y={refElem:b},D={xID:i,props:e,context:l,getRefMaps:()=>y},B=()=>{const{ctxMenuStore:p}=w,{computeMenuOpts:c}=u.getComputeMaps(),v=c.value;return g(lc,{to:"body",disabled:!1},[g("div",{ref:b,class:["vxe-table--context-menu-wrapper",v.className,{"is--visible":p.visible}],style:p.style},p.list.map((N,G)=>N.every(K=>K.visible===!1)?Ke():g("ul",{class:"vxe-context-menu--option-wrapper",key:G},N.map((K,V)=>{const _=K.children&&K.children.some(j=>j.visible!==!1),T=Object.assign({},K.prefixConfig),I=Object.assign({},K.suffixConfig);return K.visible===!1?null:g("li",{class:[K.className,{"link--disabled":K.disabled,"link--active":K===p.selected}],key:`${G}_${V}`},[g("a",{class:"vxe-context-menu--link",onClick(j){u.ctxMenuLinkEvent(j,K)},onMouseover(j){u.ctxMenuMouseoverEvent(j,K)},onMouseout(j){u.ctxMenuMouseoutEvent(j,K)}},[g("div",{class:["vxe-context-menu--link-prefix",T.className||""]},[g("i",{class:T.icon||K.prefixIcon}),T.content?g("span",{},`${T.content}`):Ke()]),g("div",{class:"vxe-context-menu--link-content"},hl(K.name)),g("div",{class:["vxe-context-menu--link-suffix",I.className||""]},[g("i",{class:I.icon||K.suffixIcon||(_?cd().TABLE_MENU_OPTIONS:"")}),I.content?g("span",`${I.content}`):Ke()])]),_?g("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":K===p.selected&&p.showChild}]},K.children.map((j,te)=>{const le=Object.assign({},j.prefixConfig),C=Object.assign({},j.suffixConfig);return j.visible===!1?null:g("li",{class:[j.className,{"link--disabled":j.disabled,"link--active":j===p.selectChild}],key:`${G}_${V}_${te}`},[g("a",{class:"vxe-context-menu--link",onClick(O){u.ctxMenuLinkEvent(O,j)},onMouseover(O){u.ctxMenuMouseoverEvent(O,K,j)},onMouseout(O){u.ctxMenuMouseoutEvent(O,K)}},[g("div",{class:["vxe-context-menu--link-prefix",le.className||""]},[g("i",{class:le.icon||j.prefixIcon}),le.content?g("span",`${le.content}`):Ke()]),g("div",{class:"vxe-context-menu--link-content"},hl(j.name)),g("div",{class:["vxe-context-menu--link-suffix",C.className||""]},[g("i",{class:C.icon}),C.content?g("span",`${C.content}`):Ke()])])])})):null])}))))])};return D.renderVN=B,D},render(){return this.renderVN()}}),{getConfig:vt,getIcon:Cr,getI18n:il,renderer:vi,formats:Ci,createEvent:ud,globalResize:fd,interceptor:wi,hooks:pd,globalEvents:_t,GLOBAL_EVENT_KEYS:jo,useFns:hd,renderEmptyElement:Ro}=ue,Ei="VXE_CUSTOM_STORE",vn=Wo({name:"VxeTable",props:kr,emits:Ts,setup(e,l){const{slots:i,emit:u}=l,w=s.uniqueId(),b=ue.getComponent("VxeLoading"),y=ue.getComponent("VxeTooltip"),D=Mo("$xeTabs",null),{computeSize:B}=hd.useSize(e),p=fl({staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,lastScrollTime:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selectCheckboxMaps:{},currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},treeIndeterminateMaps:{},mergeList:[],mergeFooterList:[],upDataFlag:0,reColumnFlag:0,pendingRowMaps:{},initStore:{filter:!1,import:!1,export:!1,custom:!1},customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},customColumnList:[],filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null},insertMaps:{},removeMaps:{}},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1},rowHeightStore:{default:48,medium:44,small:40,mini:36},scrollVMLoading:!1,scrollYHeight:0,scrollYTop:0,isScrollYBig:!1,scrollXLeft:0,scrollXWidth:0,isScrollXBig:!1,rowExpandHeightFlag:1,calcCellHeightFlag:1,resizeHeightFlag:1,isCustomStatus:!1,isDragRowMove:!1,dragRow:null,isDragColMove:!1,dragCol:null,dragTipText:"",isDragResize:!1,isRowLoading:!1,isColLoading:!1}),c={tZindex:0,elemStore:{},scrollXStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},scrollYStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},sourceDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1};let v={},N={};const G=$e(),K=$e(),V=$e(),_=$e(),T=$e(),I=$e(),j=$e(),te=$e(),le=$e(),C=$e(),O=$e(),S=$e(),q=$e(),Y=$e(),ne=$e(),X=$e(),ie=$e(),Re=$e(),me=$e(),Ee=$e(),Ve=$e(),Oe=$e(),Te=$e(),tt=$e(),k=$e(),z=$e(),Z=$e(),U=$e(),re=$e(),ge=$e(),be=$e(),de=$e(),we=$e(),P=$e(),ae=$e(),ve=$e(),se=$e(),J=$e(),Se=$e(),ye=$e(),He=Mo("$xeGrid",null);let Ue;const qe=Be(()=>{const{id:t}=e;return t?s.isFunction(t)?`${t({$table:d,$grid:He})||""}`:`${t}`:""}),Ze=Be(()=>Object.assign({},vt().table.validConfig,e.validConfig)),ht=Be(()=>st.value),xt=Be(()=>{const t=ht.value,{threshold:o}=t;return o?s.toNumber(o):0}),gt=Be(()=>it.value),st=Be(()=>Object.assign({},vt().table.scrollX,vt().table.virtualXConfig,e.scrollX,e.virtualXConfig)),it=Be(()=>Object.assign({},vt().table.scrollY,vt().table.virtualYConfig,e.scrollY,e.virtualYConfig)),ut=Be(()=>Object.assign({},vt().table.scrollbarConfig,e.scrollbarConfig)),Ne=Be(()=>{const t=ut.value;return!!(t.x&&t.x.position==="top")}),Le=Be(()=>{const t=ut.value;return!!(t.y&&t.y.position==="left")}),ke=Be(()=>{const t=gt.value,{threshold:o}=t;return o?s.toNumber(o):0}),ot=Be(()=>p.rowHeightStore),he=Be(()=>{const t=B.value;return ot.value[t||"default"]||18}),_e=Be(()=>Object.assign({},vt().table.columnConfig,e.columnConfig)),lt=Be(()=>Object.assign({},vt().table.cellConfig,e.cellConfig)),rt=Be(()=>Object.assign({},vt().table.headerCellConfig,e.headerCellConfig)),H=Be(()=>Object.assign({},vt().table.footerCellConfig,e.footerCellConfig)),ee=Be(()=>Object.assign({},vt().table.rowConfig,e.rowConfig)),ce=Be(()=>Object.assign({},vt().table.rowDragConfig,e.rowDragConfig)),Me=Be(()=>Object.assign({},vt().table.columnDragConfig,e.columnDragConfig)),Ie=Be(()=>Object.assign({},vt().table.resizeConfig,e.resizeConfig)),Xe=Be(()=>Object.assign({},vt().table.resizableConfig,e.resizableConfig)),et=Be(()=>Object.assign({startIndex:0},vt().table.seqConfig,e.seqConfig)),nt=Be(()=>Object.assign({},vt().table.radioConfig,e.radioConfig)),ze=Be(()=>Object.assign({},vt().table.checkboxConfig,e.checkboxConfig)),pt=Be(()=>Object.assign({},vt().tooltip,vt().table.tooltipConfig,e.tooltipConfig)),Lt=Be(()=>{const{tooltipStore:t}=p,o=pt.value;return Object.assign({},o,t.currOpts)}),mt=Be(()=>{const t=pt.value;return Object.assign({},t)}),Ct=Be(()=>Object.assign({},vt().table.editConfig,e.editConfig)),$t=Be(()=>Object.assign({orders:["asc","desc",null]},vt().table.sortConfig,e.sortConfig)),It=Be(()=>Object.assign({},vt().table.filterConfig,e.filterConfig)),Ht=Be(()=>Object.assign({},vt().table.mouseConfig,e.mouseConfig)),mo=Be(()=>Object.assign({},vt().table.areaConfig,e.areaConfig)),Mt=Be(()=>Object.assign({},vt().table.keyboardConfig,e.keyboardConfig)),Zt=Be(()=>Object.assign({},vt().table.clipConfig,e.clipConfig)),$o=Be(()=>Object.assign({},vt().table.fnrConfig,e.fnrConfig)),wt=Be(()=>Object.assign({},vt().table.menuConfig,e.menuConfig)),xo=Be(()=>{const{columnStore:t}=p,{leftList:o}=t;let n=0;for(let r=0;r<o.length;r++){const a=o[r];n+=a.renderWidth}return n}),io=Be(()=>{const{columnStore:t}=p,{rightList:o}=t;let n=0;for(let r=0;r<o.length;r++){const a=o[r];n+=a.renderWidth}return n}),kt=Be(()=>{const o=wt.value.header;return o&&o.options?o.options:[]}),ro=Be(()=>{const o=wt.value.body;return o&&o.options?o.options:[]}),Pt=Be(()=>{const o=wt.value.footer;return o&&o.options?o.options:[]}),so=Be(()=>{const t=wt.value,o=kt.value,n=ro.value,r=Pt.value;return!!(e.menuConfig&&ft(t)&&(o.length||n.length||r.length))}),Oo=Be(()=>{const{ctxMenuStore:t}=p,o=[];return t.list.forEach(n=>{n.forEach(r=>{o.push(r)})}),o}),ao=Be(()=>Object.assign({},vt().table.exportConfig,e.exportConfig)),Co=Be(()=>Object.assign({},vt().table.importConfig,e.importConfig)),Do=Be(()=>Object.assign({},vt().table.printConfig,e.printConfig)),Dt=Be(()=>Object.assign({},vt().table.expandConfig,e.expandConfig)),dt=Be(()=>Object.assign({},vt().table.treeConfig,e.treeConfig)),Fo=Be(()=>Object.assign({},vt().table.emptyRender,e.emptyRender)),Ut=Be(()=>Object.assign({},vt().table.loadingConfig,e.loadingConfig)),Qt=Be(()=>e.border?Math.max(2,Math.ceil(p.scrollbarWidth/p.tableColumn.length)):1),po=Be(()=>Object.assign({},vt().table.customConfig,e.customConfig)),yl=Be(()=>{const{rowExpandedMaps:t,tableData:o,expandColumn:n}=p,r=[];if(n){const a={};o.forEach(f=>{a[Ce(d,f)]=!0}),s.each(t,(f,h)=>{a[h]&&r.push(f)})}return r}),Pl=Be(()=>{const{visibleColumn:t}=c,{tableColumn:o}=p;return o.length||t.length?t.filter(n=>n.width==="auto"||n.minWidth==="auto"):[]}),er=Be(()=>{const{tableColumn:t}=p,{collectColumn:o}=c;let n=0;return t.length&&o.length&&o.forEach(r=>{r.renderFixed&&n++}),n}),Rn=Be(()=>{const t=er.value,o=_e.value,{maxFixedSize:n}=o;return n?t>=n:!1}),Sn=Be(()=>{const{border:t}=e;return t===!0?"full":t||"default"}),$l=Be(()=>{const{treeConfig:t}=e,{tableData:o}=p,{tableFullData:n}=c,r=ze.value,{strict:a,checkMethod:f}=r;return a?o.length||n.length?f?n.every(h=>!f({row:h})):!1:!0:!1}),tr=Be(()=>{const{overflowX:t,scrollXLoad:o,overflowY:n,scrollYLoad:r}=p;return{x:t&&o,y:n&&r}}),el={refElem:G,refTooltip:V,refValidTooltip:T,refTableFilter:j,refTableCustom:te,refTableMenu:I,refTableHeader:C,refTableBody:O,refTableFooter:S,refTableLeftHeader:q,refTableLeftBody:Y,refTableLeftFooter:ne,refTableRightHeader:X,refTableRightBody:ie,refTableRightFooter:Re,refLeftContainer:me,refRightContainer:Ee,refColResizeBar:Ve,refRowResizeBar:Oe,refScrollXVirtualElem:re,refScrollYVirtualElem:ge,refScrollXHandleElem:be,refScrollYHandleElem:P,refScrollXSpaceElem:Se,refScrollYSpaceElem:ye},_r={computeSize:B,computeTableId:qe,computeValidOpts:Ze,computeVirtualXOpts:st,computeVirtualYOpts:it,computeScrollbarOpts:ut,computeScrollbarXToTop:Ne,computeScrollbarYToLeft:Le,computeColumnOpts:_e,computeScrollXThreshold:xt,computeScrollYThreshold:ke,computeDefaultRowHeight:he,computeCellOpts:lt,computeHeaderCellOpts:rt,computeFooterCellOpts:H,computeRowOpts:ee,computeRowDragOpts:ce,computeColumnDragOpts:Me,computeResizeOpts:Ie,computeResizableOpts:Xe,computeSeqOpts:et,computeRadioOpts:nt,computeCheckboxOpts:ze,computeTooltipOpts:pt,computeEditOpts:Ct,computeSortOpts:$t,computeFilterOpts:It,computeMouseOpts:Ht,computeAreaOpts:mo,computeKeyboardOpts:Mt,computeClipOpts:Zt,computeFNROpts:$o,computeHeaderMenu:kt,computeBodyMenu:ro,computeFooterMenu:Pt,computeIsMenu:so,computeMenuOpts:wt,computeExportOpts:ao,computeImportOpts:Co,computePrintOpts:Do,computeExpandOpts:Dt,computeTreeOpts:dt,computeEmptyOpts:Fo,computeLoadingOpts:Ut,computeCellOffsetWidth:Qt,computeCustomOpts:po,computeLeftFixedWidth:xo,computeRightFixedWidth:io,computeFixedColumnSize:er,computeIsMaxFixedColumn:Rn,computeIsAllCheckboxDisabled:$l,computeVirtualScrollBars:tr,computeSXOpts:ht,computeSYOpts:gt},d={xID:w,props:e,context:l,reactData:p,internalData:c,getRefMaps:()=>el,getComputeMaps:()=>_r,xegrid:He},Bl=(t,o,n)=>{const r=s.get(t,n),a=s.get(o,n);return cl(r)&&cl(a)?!0:s.isString(r)||s.isNumber(r)?""+r==""+a:s.isEqual(r,a)},On=t=>{const o=$t.value,{orders:n}=o,r=t.order||null,a=n.indexOf(r)+1;return n[a<n.length?a:0]},Rl=t=>{const o=vt().version,n=s.toStringJSON(localStorage.getItem(Ei)||""),r=n&&n._v===o?n:{_v:o};return(t?r[t]:r)||{}},or=(t,o)=>{const n=vt().version,r=Rl();r[t]=o||void 0,r._v=n,localStorage.setItem(Ei,s.toJSONString(r))},Mn=t=>{const{fullAllDataRowIdData:o}=c,n={};return s.each(t,(r,a)=>{o[a]&&(n[a]=r)}),n},Bo=t=>{const{fullDataRowIdData:o}=c,n=[];return s.each(t,(r,a)=>{o[a]&&d.findRowIndexOf(n,o[a].row)===-1&&n.push(o[a].row)}),n},Dn=()=>{const{elemStore:t,visibleColumn:o}=c,n=xo.value,r=io.value,a=Je(t["main-body-scroll"]);if(a){const{scrollLeft:f,clientWidth:h}=a,m=f+n,x=f+h-r;let E=-1,R=0,A=0;for(let F=0,L=o.length;F<L&&(R+=o[F].renderWidth,E===-1&&m<R&&(E=F),!(E>=0&&(A++,R>x)));F++);return{toVisibleIndex:Math.max(0,E),visibleSize:Math.max(1,A)}}return{toVisibleIndex:0,visibleSize:6}},gl=(t,o)=>{const{rowHeightStore:n}=p;o&&o.clientHeight&&(n[t]=o.clientHeight)},Tn=()=>{const{isAllOverflow:t}=p,o=C.value,n=O.value,r=n?n.$el:null,a=he.value;let f=0;if(t){if(r){const h=o?o.$el:null;let m;m=r.querySelector("tr"),!m&&h&&(m=h.querySelector("tr")),m&&(f=m.clientHeight)}f||(f=a)}else f=a;return Math.max(18,f)},ml=t=>{const{isAllOverflow:o,expandColumn:n,rowExpandedMaps:r}=p,{elemStore:a,isResizeCellHeight:f,afterFullData:h,fullAllDataRowIdData:m}=c,x=Dt.value,E=ee.value,R=lt.value,A=he.value,F=Je(a["main-body-scroll"]);if(F){const L=F.clientHeight,W=s.isNumber(t)?t:F.scrollTop,$=W+L;let oe=-1,Q=0,M=0;if(!(f||R.height||E.height)&&!n&&o)oe=Math.floor(W/A),M=Math.ceil(L/A)+1;else for(let De=0,Fe=h.length;De<Fe;De++){const xe=h[De],Ae=Ce(d,xe),Pe=m[Ae]||{};if(Q+=Pe.resizeHeight||R.height||E.height||Pe.height||A,oe===-1&&W<Q&&(oe=De),oe>=0&&(M++,Q>$))break;n&&r[Ae]&&(Q+=Pe.expandHeight||x.height||0)}return{toVisibleIndex:Math.max(0,oe),visibleSize:Math.max(6,M)}}return{toVisibleIndex:0,visibleSize:6}},tl=(t,o,n)=>{for(let r=0,a=t.length;r<a;r++){const f=t[r],{startIndex:h,endIndex:m}=o,x=f[n],E=f[n+"span"],R=x+E;x<h&&h<R&&(o.startIndex=x),x<m&&m<R&&(o.endIndex=R),(o.startIndex!==h||o.endIndex!==m)&&(r=-1)}},Zl=(t,o,n)=>{if(t){const{treeConfig:r}=e,{visibleColumn:a}=c;s.isArray(t)||(t=[t]),r&&t.length&&Ye("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(f=>{let{row:h,col:m,rowspan:x,colspan:E}=f;if(n&&s.isNumber(h)&&(h=n[h]),s.isNumber(m)&&(m=a[m]),(n?h:s.isNumber(h))&&m&&(x||E)&&(x=s.toNumber(x)||1,E=s.toNumber(E)||1,x>1||E>1)){const R=s.findIndexOf(o,F=>(F._row===h||Ce(d,F._row)===Ce(d,h))&&(F._col.id===m||F._col.id===m.id)),A=o[R];if(A)A.rowspan=x,A.colspan=E,A._rowspan=x,A._colspan=E;else{const F=n?d.findRowIndexOf(n,h):h,L=v.getVTColumnIndex(m);o.push({row:F,col:L,rowspan:x,colspan:E,_row:h,_col:m,_rowspan:x,_colspan:E})}}})}},lr=(t,o,n)=>{const r=[];if(t){const{treeConfig:a}=e,{visibleColumn:f}=c;s.isArray(t)||(t=[t]),a&&t.length&&Ye("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(h=>{let{row:m,col:x}=h;n&&s.isNumber(m)&&(m=n[m]),s.isNumber(x)&&(x=f[x]);const E=s.findIndexOf(o,R=>(R._row===m||Ce(d,R._row)===Ce(d,m))&&(R._col.id===x||R._col.id===x.id));if(E>-1){const R=o.splice(E,1);r.push(R[0])}})}return r},Ql=()=>{const{tableFullColumn:t}=c;t.forEach(o=>{o.order=null})},Jl=t=>{const{parentHeight:o}=p,n=e[t];let r=0;if(n)if(n==="100%"||n==="auto")r=o;else{const a=d.getExcludeHeight();gn(n)?r=Math.floor((s.toInteger(n)||1)/100*o):r=s.toNumber(n),r=Math.max(40,r-a)}return r},Fn=t=>{let{collectColumn:o}=c;const{resizableData:n,sortData:r,visibleData:a,fixedData:f}=t;let h=!1;n||r||a||f?(s.eachTree(o,(m,x,E,R,A)=>{const F=m.getKey();A||(f&&f[F]!==void 0&&(m.fixed=f[F]),r&&s.isNumber(r[F])&&(h=!0,m.renderSortNumber=r[F])),n&&s.isNumber(n[F])&&(m.resizeWidth=n[F]),a&&s.isBoolean(a[F])&&(m.visible=a[F])}),h&&(o=s.orderBy(o,"renderSortNumber"),c.collectColumn=o,c.tableFullColumn=ir(o)),p.isCustomStatus=!0):p.isCustomStatus=!1},bl=()=>{const{customConfig:t}=e,o=qe.value,n=po.value,{storage:r,restoreStore:a}=n,f=r===!0,h=f?{}:Object.assign({},r||{}),m=f||h.resizable,x=f||h.visible,E=f||h.fixed,R=f||h.sort;if((t?ft(n):n.enabled)&&(m||x||E||R)){if(!o){Ye("vxe.error.reqProp",["id"]);return}const A=Rl(o);return a?Promise.resolve(a({id:o,type:"restore",storeData:A})).then(F=>{if(F)return Fn(F)}).catch(F=>F):Fn(A)}},In=()=>{const{tableFullColumn:t,collectColumn:o}=c,n=c.fullColumnIdData={},r=c.fullColumnFieldData={},a=Ht.value,f=Dt.value,h=_e.value,m=Me.value,{isCrossDrag:x,isSelfToChildDrag:E}=m,R=po.value,{storage:A}=R,F=ee.value,L=o.some(bn);let W=!!e.showOverflow,$,oe,Q;const M=(fe,De,Fe,xe,Ae)=>{const{id:Pe,field:Qe,fixed:Ge,type:at,treeNode:je}=fe,We={$index:-1,_index:-1,column:fe,colid:Pe,index:De,items:Fe,parent:Ae||null,width:0,oLeft:0};Qe?(r[Qe]&&Ye("vxe.error.colRepet",["field",Qe]),r[Qe]=We):(A&&!at||h.drag&&(x||E))&&Ye("vxe.error.reqProp",[`${fe.getTitle()||at||""} -> column.field`]),!Q&&at==="html"&&(Q=fe),je?oe||(oe=fe):at==="expand"&&($||($=fe)),W&&fe.showOverflow===!1&&(W=!1),n[Pe]&&Ye("vxe.error.colRepet",["colId",Pe]),n[Pe]=We};L?s.eachTree(o,(fe,De,Fe,xe,Ae,Pe)=>{fe.level=Pe.length,M(fe,De,Fe,xe,Ae)}):t.forEach(M),$&&f.mode!=="fixed"&&a.area&&Ye("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),Q&&(h.useKey||Ye("vxe.error.reqProp",["column-config.useKey & column.type=html"]),F.useKey||Ye("vxe.error.reqProp",["row-config.useKey & column.type=html"])),p.isGroup=L,p.treeNodeColumn=oe,p.expandColumn=$,p.isAllOverflow=W},kn=()=>{c.customHeight=Jl("height"),c.customMinHeight=Jl("minHeight"),c.customMaxHeight=Jl("maxHeight")},xl=(t,o)=>{const n=o.querySelectorAll(`.vxe-cell--wrapper[colid="${t.id}"]`);let r=0;const a=n[0];if(a&&a.parentElement){const h=getComputedStyle(a.parentElement);r=Math.ceil(s.toNumber(h.paddingLeft)+s.toNumber(h.paddingRight))}let f=t.renderAutoWidth-r;for(let h=0;h<n.length;h++){const m=n[h];f=Math.max(f,m?Math.ceil(m.scrollWidth)+4:0)}return f+r},An=()=>{const t=Pl.value,{fullColumnIdData:o}=c,n=G.value;n&&(n.setAttribute("data-calc-col","Y"),t.forEach(r=>{const a=r.id,f=o[a],h=xl(r,n);f&&(f.width=Math.max(h,f.width)),r.renderAutoWidth=h}),d.analyColumnWidth(),n.removeAttribute("data-calc-col"))},Uo=()=>{const{elemStore:t}=c,o=ut.value,n=O.value,r=n?n.$el:null;if(!r)return;const a=P.value;if(!a)return;const f=be.value;if(!f)return;let h=0;const m=40,x=r.clientWidth;let E=x,R=E/100;const{fit:A}=e,{columnStore:F}=p,{resizeList:L,pxMinList:W,autoMinList:$,pxList:oe,scaleList:Q,scaleMinList:M,autoList:fe,remainList:De}=F;if(W.forEach(je=>{const We=s.toInteger(je.minWidth);h+=We,je.renderWidth=We}),$.forEach(je=>{const We=Math.max(60,s.toInteger(je.renderAutoWidth));h+=We,je.renderWidth=We}),M.forEach(je=>{const We=Math.floor(s.toInteger(je.minWidth)*R);h+=We,je.renderWidth=We}),Q.forEach(je=>{const We=Math.floor(s.toInteger(je.width)*R);h+=We,je.renderWidth=We}),oe.forEach(je=>{const We=s.toInteger(je.width);h+=We,je.renderWidth=We}),fe.forEach(je=>{const We=Math.max(60,s.toInteger(je.renderAutoWidth));h+=We,je.renderWidth=We}),L.forEach(je=>{const We=s.toInteger(je.resizeWidth);h+=We,je.renderWidth=We}),E-=h,R=E>0?Math.floor(E/(M.length+W.length+$.length+De.length)):0,A?E>0&&M.concat(W).concat($).forEach(je=>{h+=R,je.renderWidth+=R}):R=m,De.forEach(je=>{const We=Math.max(R,m);je.renderWidth=We,h+=We}),A){const je=Q.concat(M).concat(W).concat($).concat(De);let We=je.length-1;if(We>0){let Et=x-h;if(Et>0){for(;Et>0&&We>=0;)Et--,je[We--].renderWidth++;h=x}}}const Fe=r.offsetHeight,xe=a.scrollHeight>a.clientHeight;p.scrollbarWidth=Math.max(o.width||0,a.offsetWidth-a.clientWidth),p.overflowY=xe,c.tableWidth=h,c.tableHeight=Fe;const Ae=Je(t["main-header-table"]),Pe=Je(t["main-footer-table"]),Qe=Ae?Ae.clientHeight:0,Ge=h>x,at=Pe?Pe.clientHeight:0;p.scrollbarHeight=Math.max(o.height||0,f.offsetHeight-f.clientHeight),c.headerHeight=Qe,c.footerHeight=at,p.overflowX=Ge,kn(),p.parentHeight=Math.max(c.headerHeight+at+20,d.getParentHeight()),Ge&&d.checkScrolling()},no=(t,o)=>{const n=o.querySelectorAll(`.vxe-cell--wrapper[rowid="${t.rowid}"]`);let r=t.height;for(let a=0;a<n.length;a++){const f=n[a],h=f.parentElement,m=Math.ceil(s.toNumber(h.style.paddingTop)+s.toNumber(h.style.paddingBottom)),x=f?f.clientHeight:0;r=Math.max(r-m,Math.ceil(x))}return r},ol=()=>{const{tableData:t,isAllOverflow:o,scrollYLoad:n,scrollXLoad:r}=p,{fullAllDataRowIdData:a}=c,f=he.value,h=G.value;!o&&n&&h&&(h.setAttribute("data-calc-row","Y"),t.forEach(m=>{const x=Ce(d,m),E=a[x];if(E){const R=no(E,h);E.height=Math.max(f,r?Math.max(E.height,R):R)}h.removeAttribute("data-calc-row")}),p.calcCellHeightFlag++)},Ln=t=>{const{sortBy:o,sortType:n}=t;return r=>{let a;return o?a=s.isFunction(o)?o({row:r,column:t}):s.get(r,o):a=v.getCellLabel(r,t),!n||n==="auto"?isNaN(a)?a:s.toNumber(a):n==="number"?s.toNumber(a):n==="string"?s.toValueString(a):a}},en=()=>{const{treeConfig:t}=e,{afterFullData:o,fullDataRowIdData:n,fullAllDataRowIdData:r}=c,a={};o.forEach((f,h)=>{const m=Ce(d,f),x=r[m],E=h+1;if(x)t||(x.seq=E),x._index=h;else{const R={row:f,rowid:m,seq:E,index:-1,$index:-1,_index:h,treeIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};r[m]=R,n[m]=R}a[m]=f}),c.afterFullRowMaps=a},Vl=()=>{const{treeConfig:t}=e,{fullDataRowIdData:o,fullAllDataRowIdData:n,afterTreeFullData:r}=c,a=dt.value,{transform:f}=a,h=a.children||a.childrenField,m={};t&&(s.eachTree(r,(x,E,R,A)=>{const F=Ce(d,x),L=n[F],W=A.map(($,oe)=>oe%2===0?Number($)+1:".").join("");if(L)L.seq=W,L.treeIndex=E;else{const $={row:x,rowid:F,seq:W,index:-1,$index:-1,_index:-1,treeIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};n[F]=$,o[F]=$}m[F]=x},{children:f?a.mapChildrenField:h}),c.afterFullRowMaps=m),en()},ll=()=>{const{treeConfig:t}=e,{treeExpandedMaps:o}=p,{fullAllDataRowIdData:n}=c,r=dt.value,a=r.children||r.childrenField;if(t&&r.transform){const f=[],h={};return s.eachTree(c.afterTreeFullData,(m,x,E,R,A)=>{const F=Ce(d,m),L=Ce(d,A);if(!A||h[L]&&o[L]){const W=n[F];W&&(W._index=f.length),h[F]=1,f.push(m)}},{children:a}),c.afterFullData=f,ar(f),f}return c.afterFullData},Wr=()=>{const{treeConfig:t}=e,{tableFullColumn:o,tableFullData:n,tableFullTreeData:r}=c,a=It.value,f=$t.value,h=dt.value,m=h.children||h.childrenField,{transform:x,rowField:E,parentField:R,mapChildrenField:A}=h,{remote:F,filterMethod:L}=a,{remote:W,sortMethod:$,multiple:oe,chronological:Q}=f;let M=[],fe=[];if(!F||!W){const De=[];let Fe=[];if(o.forEach(xe=>{const{field:Ae,sortable:Pe,order:Qe,filters:Ge}=xe;if(!F&&Ge&&Ge.length){const at=[],je=[];Ge.forEach(We=>{We.checked&&(je.push(We),at.push(We.value))}),je.length&&De.push({column:xe,valueList:at,itemList:je})}!W&&Pe&&Qe&&Fe.push({column:xe,field:Ae,property:Ae,order:Qe,sortTime:xe.sortTime})}),oe&&Q&&Fe.length>1&&(Fe=s.orderBy(Fe,"sortTime")),!F&&De.length){const xe=Ae=>De.every(({column:Pe,valueList:Qe,itemList:Ge})=>{const{filterMethod:at,filterRender:je}=Pe,We=ft(je)?vi.get(je.name):null,Et=We?We.tableFilterMethod||We.filterMethod:null,Tt=We?We.tableFilterDefaultMethod||We.defaultTableFilterMethod||We.defaultFilterMethod:null,bt=go(Ae,Pe);return at?Ge.some(Wt=>at({value:Wt.value,option:Wt,cellValue:bt,row:Ae,column:Pe,$table:d})):Et?Ge.some(Wt=>Et({value:Wt.value,option:Wt,cellValue:bt,row:Ae,column:Pe,$table:d})):L?L({options:Ge,values:Qe,cellValue:bt,row:Ae,column:Pe}):Tt?Ge.some(Wt=>Tt({value:Wt.value,option:Wt,cellValue:bt,row:Ae,column:Pe,$table:d})):Qe.indexOf(s.get(Ae,Pe.field))>-1});t&&x?(fe=s.searchTree(r,xe,{original:!0,isEvery:!0,children:A,mapChildren:m}),M=fe):(M=t?r.filter(xe):n.filter(xe),fe=M)}else t&&x?(fe=s.searchTree(r,()=>!0,{original:!0,isEvery:!0,children:A,mapChildren:m}),M=fe):(M=t?r.slice(0):n.slice(0),fe=M);if(!W&&Fe.length)if(t&&x){if($){const xe=$({data:fe,sortList:Fe,$table:d});fe=s.isArray(xe)?xe:fe}else{const xe=s.toTreeArray(fe,{children:A});fe=s.toArrayTree(s.orderBy(xe,Fe.map(({column:Ae,order:Pe})=>[Ln(Ae),Pe])),{key:E,parentKey:R,children:m,mapChildren:A})}M=fe}else{if($){const xe=$({data:M,sortList:Fe,$table:d});M=s.isArray(xe)?xe:M}else M=s.orderBy(M,Fe.map(({column:xe,order:Ae})=>[Ln(xe),Ae]));fe=M}}else t&&x?(fe=s.searchTree(r,()=>!0,{original:!0,isEvery:!0,children:h.mapChildrenField,mapChildren:m}),M=fe):(M=t?r.slice(0):n.slice(0),fe=M);c.afterFullData=M,c.afterTreeFullData=fe,Vl()},bo=()=>{const{border:t,showHeaderOverflow:o,showFooterOverflow:n,mouseConfig:r,spanMethod:a,footerSpanMethod:f}=e,{isGroup:h,currentRow:m,tableColumn:x,scrollXLoad:E,scrollYLoad:R,overflowX:A,scrollbarWidth:F,overflowY:L,scrollbarHeight:W,columnStore:$,editStore:oe,isAllOverflow:Q,expandColumn:M}=p,{visibleColumn:fe,fullColumnIdData:De,tableHeight:Fe,tableWidth:xe,headerHeight:Ae,footerHeight:Pe,elemStore:Qe,customHeight:Ge,customMinHeight:at,customMaxHeight:je}=c,We=G.value;if(!We)return;const Et=["main","left","right"],Tt=L?F:0,bt=A?W:0,Wt=Te.value,Xt=Qt.value,Ft=Ht.value,Jt=Dt.value,to=Je(Qe["main-body-wrapper"]),oo=Je(Qe["main-body-table"]);Wt&&(Wt.style.top=`${Ae}px`,Wt.style.height=to?`${to.offsetHeight-bt}px`:"");let Vt=0,co=0;const wo=at-Ae-Pe-bt;je&&(co=Math.max(wo,je-Ae-Pe-bt)),Ge&&(Vt=Ge-Ae-Pe-bt),Vt||oo&&(Vt=oo.clientHeight),Vt&&(co&&(Vt=Math.min(co,Vt)),Vt=Math.max(wo,Vt));const zt=de.value,jt=we.value,Io=Ne.value,uo=re.value;uo&&(uo.style.height=`${bt}px`,uo.style.visibility=A?"visible":"hidden");const Vo=ve.value;Vo&&(Vo.style.left=Io?`${Tt}px`:"",Vo.style.width=`${We.clientWidth-Tt}px`),zt&&(zt.style.width=Io?`${Tt}px`:"",zt.style.display=Io&&Tt&&bt?"block":""),jt&&(jt.style.width=Io?"":`${Tt}px`,jt.style.display=Io?"":Tt&&bt?"block":"");const Xo=ge.value;Xo&&(Xo.style.width=`${Tt}px`,Xo.style.height=`${Vt+Ae+Pe}px`,Xo.style.visibility=L?"visible":"hidden");const rn=ae.value;rn&&(rn.style.height=`${Ae}px`,rn.style.display=Ae?"block":"");const jl=se.value;jl&&(jl.style.height=`${Vt}px`,jl.style.top=`${Ae}px`);const Nl=J.value;Nl&&(Nl.style.height=`${Pe}px`,Nl.style.top=`${Ae+Vt}px`,Nl.style.display=Pe?"block":"");const ss=Z.value;return ss&&(ss.style.height=`${Vt}px`,ss.style.top=`${Ae}px`),Et.forEach((Dl,Qa)=>{const vl=Qa>0?Dl:"",Ja=["header","body","footer"],Gs=vl==="left";let zn=[],jn;vl&&(zn=Gs?$.leftList:$.rightList,jn=Gs?me.value:Ee.value),Ja.forEach(Ko=>{const vo=Je(Qe[`${Dl}-${Ko}-wrapper`]),Tl=Je(Qe[`${Dl}-${Ko}-scroll`]),_l=Je(Qe[`${Dl}-${Ko}-table`]);if(Ko==="header"){let To=x,ko=!1;h?To=fe:((E||R||o)&&(a||f||(ko=!0)),vl&&(To=fe,ko&&(To=zn||[])));const Eo=To.reduce((Ao,Yo)=>Ao+Yo.renderWidth,0);vl&&(h?vo&&(vo.style.width=xe?`${xe}px`:""):ko?vo&&(vo.style.width=Eo?`${Eo}px`:""):vo&&(vo.style.width=xe?`${xe}px`:"")),Tl&&(Tl.style.height=`${Ae}px`),_l&&(_l.style.width=Eo?`${Eo}px`:"");const zo=Je(Qe[`${Dl}-${Ko}-list`]);h&&zo&&s.arrayEach(zo.querySelectorAll(".col--group"),Ao=>{const Yo=d.getColumnNode(Ao);if(Yo){const Wl=Yo.item,{showHeaderOverflow:rl}=Wl,Nn=s.isBoolean(rl)?rl:o,_n=Nn==="title"||(Nn===!0||Nn==="tooltip")||Nn==="ellipsis";let Wn=0,sn=0;_n&&s.eachTree(Wl.children,qn=>{(!qn.children||!Wl.children.length)&&sn++,Wn+=qn.renderWidth},{children:"children"}),Ao.style.width=_n?`${Wn-sn-(t?2:0)}px`:""}})}else if(Ko==="body"){Tl&&(Tl.style.maxHeight=je?`${co}px`:"",Tl.style.height=Ge?`${Vt}px`:"",Tl.style.minHeight=`${wo}px`),jn&&(vo&&(vo.style.top=`${Ae}px`),jn.style.height=`${Ge>0?Ge:Fe+Ae+Pe+bt}px`,jn.style.width=`${zn.reduce((Ao,Yo)=>Ao+Yo.renderWidth,0)}px`);let To=x,ko=!1;(E||R||Q)&&(M&&Jt.mode!=="fixed"||a||f||(ko=!0)),vl&&(To=fe,ko&&(To=zn||[]));const Eo=To.reduce((Ao,Yo)=>Ao+Yo.renderWidth,0);vl&&(ko?vo&&(vo.style.width=Eo?`${Eo}px`:""):vo&&(vo.style.width=xe?`${xe}px`:"")),_l&&(_l.style.width=Eo?`${Eo}px`:"",_l.style.paddingRight=Tt&&vl&&(Fr["-moz"]||Fr.safari)?`${Tt}px`:"");const zo=Je(Qe[`${Dl}-${Ko}-emptyBlock`]);zo&&(zo.style.width=Eo?`${Eo}px`:"")}else if(Ko==="footer"){let To=x,ko=!1;(E||R||n)&&(a||f||(ko=!0)),vl&&(To=fe,ko&&(To=zn||[]));const Eo=To.reduce((zo,Ao)=>zo+Ao.renderWidth,0);vl&&(ko?vo&&(vo.style.width=Eo?`${Eo}px`:""):vo&&(vo.style.width=xe?`${xe}px`:"")),Tl&&(Tl.style.height=`${Pe}px`,jn&&vo&&(vo.style.top=`${Ge>0?Ge-Pe-bt:Fe+Ae}px`)),_l&&(_l.style.width=Eo?`${Eo}px`:"")}const Zs=Je(Qe[`${Dl}-${Ko}-colgroup`]);Zs&&s.arrayEach(Zs.children,To=>{const ko=To.getAttribute("name");if(De[ko]){const zo=De[ko].column,{showHeaderOverflow:Ao,showFooterOverflow:Yo,showOverflow:Wl}=zo;let rl;To.style.width=`${zo.renderWidth}px`,Ko==="header"?rl=s.isUndefined(Ao)||s.isNull(Ao)?o:Ao:Ko==="footer"?rl=s.isUndefined(Yo)||s.isNull(Yo)?n:Yo:rl=s.isUndefined(Wl)||s.isNull(Wl)?Q:Wl;let hr=rl==="title"||(rl===!0||rl==="tooltip")||rl==="ellipsis";const _n=Je(Qe[`${Dl}-${Ko}-list`]);R&&!hr&&(hr=!0),_n&&s.arrayEach(_n.querySelectorAll(`.${zo.id}`),Wn=>{const sn=parseInt(Wn.getAttribute("colspan")||1),qn=Wn.querySelector(".vxe-cell");let Qs=zo.renderWidth;if(qn){if(sn>1){const oc=d.getColumnIndex(zo);for(let is=1;is<sn;is++){const Js=d.getColumns(oc+is);Js&&(Qs+=Js.renderWidth)}}qn.style.width=hr?`${Qs-Xt*sn}px`:""}})}})})}),m&&d.setCurrentRow(m),r&&Ft.selected&&oe.selected.row&&oe.selected.column&&d.addCellSelectedClass(),pe()},nl=t=>d.triggerValidate?d.triggerValidate(t):pe(),Sl=(t,o)=>{nl("blur").catch(n=>n).then(()=>{d.handleEdit(o,t).then(()=>nl("change")).catch(n=>n)})},Ol=()=>{const{sortConfig:t}=e;if(t){const o=$t.value;let{defaultSort:n}=o;n&&(s.isArray(n)||(n=[n]),n.length&&((t.multiple?n:n.slice(0,1)).forEach((r,a)=>{const{field:f,order:h}=r;if(f&&h){const m=v.getColumnByField(f);m&&m.sortable&&(m.order=h,m.sortTime=Date.now()+a)}}),o.remote||N.handleTableData(!0).then(bo)))}},nr=()=>{const{checkboxConfig:t}=e;if(t){const{fullDataRowIdData:o}=c,n=ze.value,{checkAll:r,checkRowKeys:a}=n;if(r)qr(!0,!0);else if(a){const f=[];a.forEach(h=>{o[h]&&f.push(o[h].row)}),zl(f,!0,!0)}}},At=()=>{const{radioConfig:t}=e;if(t){const{fullDataRowIdData:o}=c,n=nt.value,{checkRowKey:r,reserve:a}=n;if(r&&(o[r]&&Hn(o[r].row,!0),a)){const f=El(d);c.radioReserveRow={[f]:r}}}},qo=()=>{const{expandConfig:t}=e;if(t){const{fullDataRowIdData:o}=c,n=Dt.value,{expandAll:r,expandRowKeys:a}=n;if(r)v.setAllRowExpand(!0);else if(a){const f=[];a.forEach(h=>{o[h]&&f.push(o[h].row)}),v.setRowExpand(f,!0)}}},Ml=t=>{nt.value.reserve&&(c.radioReserveRow=t)},tn=(t,o)=>{const{checkboxReserveRowMap:n}=c;if(ze.value.reserve){const a=Ce(d,t);o?n[a]=t:n[a]&&delete n[a]}},Hn=(t,o)=>{const n=nt.value,{checkMethod:r}=n;return t&&(o||!r||r({row:t}))&&(p.selectRadioRow=t,Ml(t)),pe()},zl=(t,o,n)=>(t&&!s.isArray(t)&&(t=[t]),d.handleBatchSelectRows(t,!!o,n),d.checkSelectionStatus(),pe()),qr=(t,o)=>{const{treeConfig:n}=e,{selectCheckboxMaps:r}=p,{afterFullData:a,checkboxReserveRowMap:f}=c,h=dt.value,m=h.children||h.childrenField,x=ze.value,{checkField:E,reserve:R,checkMethod:A}=x,F=x.indeterminateField||x.halfField,L={};if(E){const W=$=>{(o||!A||A({row:$}))&&(t&&(L[Ce(d,$)]=$),s.set($,E,t)),n&&F&&s.set($,F,!1)};n?s.eachTree(a,W,{children:m}):a.forEach(W)}else n?t?s.eachTree(a,W=>{(o||!A||A({row:W}))&&(L[Ce(d,W)]=W)},{children:m}):!o&&A&&s.eachTree(a,W=>{const $=Ce(d,W);!A({row:W})&&r[$]&&(L[$]=W)},{children:m}):t?!o&&A?a.forEach(W=>{const $=Ce(d,W);(r[$]||A({row:W}))&&(L[$]=W)}):a.forEach(W=>{L[Ce(d,W)]=W}):!o&&A&&a.forEach(W=>{const $=Ce(d,W);!A({row:W})&&r[$]&&(L[$]=W)});return R&&(t?s.each(L,(W,$)=>{f[$]=W}):a.forEach(W=>tn(W,!1))),p.selectCheckboxMaps=E?{}:L,p.isAllSelected=t,p.isIndeterminate=!1,p.treeIndeterminateMaps={},c.treeIndeterminateRowMaps={},d.checkSelectionStatus(),pe()},Ca=()=>{const{treeConfig:t}=e,{expandColumn:o,currentRow:n,selectCheckboxMaps:r,selectRadioRow:a,rowExpandedMaps:f,treeExpandedMaps:h}=p,{fullDataRowIdData:m,fullAllDataRowIdData:x,radioReserveRow:E}=c,R=Dt.value,A=dt.value,F=nt.value,L=ze.value;if(a&&!x[Ce(d,a)]&&(p.selectRadioRow=null),F.reserve&&E){const W=Ce(d,E);m[W]&&Hn(m[W].row,!0)}p.selectCheckboxMaps=Mn(r),L.reserve&&zl(Bo(c.checkboxReserveRowMap),!0,!0),n&&!x[Ce(d,n)]&&(p.currentRow=null),p.rowExpandedMaps=o?Mn(f):{},o&&R.reserve&&d.setRowExpand(Bo(c.rowExpandedReserveRowMap),!0),p.treeExpandedMaps=t?Mn(h):{},t&&A.reserve&&d.setTreeExpand(Bo(c.treeExpandedReserveRowMap),!0)},wa=()=>{const{treeConfig:t}=e;if(t){const{tableFullData:o}=c,n=dt.value,{expandAll:r,expandRowKeys:a}=n,f=n.children||n.childrenField;if(r)v.setAllTreeExpand(!0);else if(a){const h=[],m=El(d);a.forEach(x=>{const E=s.findTree(o,R=>x===s.get(R,m),{children:f});E&&h.push(E.item)}),v.setTreeExpand(h,!0)}}},As=t=>{const o=dt.value,n=ze.value,{transform:r,loadMethod:a}=o,{checkStrictly:f}=n;return new Promise(h=>{if(a){const{treeExpandLazyLoadedMaps:m}=p,{fullAllDataRowIdData:x}=c,E=Ce(d,t),R=x[E];m[E]=t,Promise.resolve(a({$table:d,row:t})).then(A=>{if(R&&(R.treeLoaded=!0),m[E]&&delete m[E],s.isArray(A)||(A=[]),A)return v.loadTreeChildren(t,A).then(F=>{const{treeExpandedMaps:L}=p;return F.length&&!L[E]&&(L[E]=t),!f&&v.isCheckedByCheckboxRow(t)&&zl(F,!0),pe().then(()=>{if(r)return N.handleTableData(),Vl(),pe()})})}).catch(()=>{const{treeExpandLazyLoadedMaps:A}=p;R&&(R.treeLoaded=!1),A[E]&&delete A[E]}).finally(()=>{pe().then(()=>v.recalculate()).then(()=>h())})}else h()})},Ls=(t,o)=>{const{treeExpandedReserveRowMap:n}=c;if(dt.value.reserve){const a=Ce(d,t);o?n[a]=t:n[a]&&delete n[a]}},Hs=t=>new Promise(o=>{const n=Dt.value,{loadMethod:r}=n;if(r){const{fullAllDataRowIdData:a}=c,f=Object.assign({},p.rowExpandLazyLoadedMaps),h=Ce(d,t),m=a[h];f[h]=t,p.rowExpandLazyLoadedMaps=f,r({$table:d,row:t,rowIndex:v.getRowIndex(t),$rowIndex:v.getVMRowIndex(t)}).then(()=>{const x=Object.assign({},p.rowExpandedMaps);m&&(m.expandLoaded=!0),x[h]=t,p.rowExpandedMaps=x}).catch(()=>{m&&(m.expandLoaded=!1)}).finally(()=>{const x=Object.assign({},p.rowExpandLazyLoadedMaps);x[h]&&delete x[h],p.rowExpandLazyLoadedMaps=x,pe().then(()=>d.recalculate()).then(()=>d.updateCellAreas()).then(()=>o())})}else o()}),Ps=(t,o)=>{const{rowExpandedReserveRowMap:n}=c;if(Dt.value.reserve){const a=Ce(d,t);o?n[a]=t:n[a]&&delete n[a]}},Ea=()=>{const{mergeCells:t}=e;t&&v.setMergeCells(t)},ya=()=>{const{mergeFooterItems:t}=e;t&&v.setMergeFooterItems(t)},Xr=()=>pe().then(()=>{const{scrollXLoad:t,scrollYLoad:o}=p,{scrollXStore:n,scrollYStore:r}=c,a=it.value,f=st.value;if(t){const{toVisibleIndex:E,visibleSize:R}=Dn(),A=Math.max(0,f.oSize?s.toNumber(f.oSize):0);n.preloadSize=s.toNumber(f.preSize),n.offsetSize=A,n.visibleSize=R,n.endIndex=Math.max(n.startIndex+n.visibleSize+A,n.endIndex),n.visibleStartIndex=Math.max(n.startIndex,E),n.visibleEndIndex=Math.min(n.endIndex,E+R),d.updateScrollXData().then(()=>{on()})}else d.updateScrollXSpace();const h=Tn();r.rowHeight=h,p.rowHeight=h;const{toVisibleIndex:m,visibleSize:x}=ml();if(o){const E=Math.max(0,a.oSize?s.toNumber(a.oSize):0);r.preloadSize=s.toNumber(a.preSize),r.offsetSize=E,r.visibleSize=x,r.endIndex=Math.max(r.startIndex+x+E,r.endIndex),r.visibleStartIndex=Math.max(r.startIndex,m),r.visibleEndIndex=Math.min(r.endIndex,m+x),d.updateScrollYData().then(()=>{cr()})}else d.updateScrollYSpace();pe(()=>{bo()})}),Kr=t=>{const o=G.value;if(c.rceRunTime=Date.now(),!o||!o.clientWidth)return pe();const n=K.value;if(n){const[r,a,f,h]=n.children;gl("default",r),gl("medium",a),gl("small",f),gl("mini",h)}return An(),Uo(),bo(),Pn(),Xr().then(()=>{if(t===!0)return An(),Uo(),bo(),Pn(),Xr()})},rr=(t,o)=>{const{keepSource:n,treeConfig:r}=e,{editStore:a,scrollYLoad:f}=p,{scrollYStore:h,scrollXStore:m,lastScrollLeft:x,lastScrollTop:E}=c,R=dt.value,{transform:A}=R,F=R.children||R.childrenField;let L=[],W=fl(t?t.slice(0):[]);r&&(A?(R.rowField||Ye("vxe.error.reqProp",["tree-config.rowField"]),R.parentField||Ye("vxe.error.reqProp",["tree-config.parentField"]),F||Ye("vxe.error.reqProp",["tree-config.childrenField"]),R.mapChildrenField||Ye("vxe.error.reqProp",["tree-config.mapChildrenField"]),F===R.mapChildrenField&&Ye("vxe.error.errConflicts",["tree-config.childrenField","tree-config.mapChildrenField"]),L=s.toArrayTree(W,{key:R.rowField,parentKey:R.parentField,children:F,mapChildren:R.mapChildrenField}),W=L.slice(0)):L=W.slice(0)),h.startIndex=0,h.endIndex=1,m.startIndex=0,m.endIndex=1,p.isRowLoading=!0,p.scrollVMLoading=!1,a.insertMaps={},a.removeMaps={};const $=ar(W);return p.isDragColMove=!1,p.isDragRowMove=!1,c.tableFullData=W,c.tableFullTreeData=L,d.cacheRowMap(!0),c.tableSynchData=t,o&&(c.isResizeCellHeight=!1),n&&d.cacheSourceMap(W),d.clearCellAreas&&e.mouseConfig&&(d.clearCellAreas(),d.clearCopyCellArea()),v.clearMergeCells(),v.clearMergeFooterItems(),N.handleTableData(!0),v.updateFooter(),pe().then(()=>{kn(),bo()}).then(()=>{Xr()}).then(()=>($&&(h.endIndex=h.visibleSize),$&&(e.height||e.maxHeight||Ye("vxe.error.reqProp",["table.height | table.max-height | table.scroll-y={enabled: false}"]),e.spanMethod&&Ye("vxe.error.scrollErrProp",["table.span-method"])),Ca(),N.checkSelectionStatus(),new Promise(oe=>{pe().then(()=>v.recalculate()).then(()=>{let Q=x,M=E;const fe=ht.value,De=gt.value;fe.scrollToLeftOnChange&&(Q=0),De.scrollToTopOnChange&&(M=0),p.isRowLoading=!1,ol(),f===$?cs(d,Q,M).then(()=>{oe()}):setTimeout(()=>{cs(d,Q,M).then(()=>{oe()})})})})))},sr=()=>{nr(),At(),qo(),wa(),Ea(),ya(),pe(()=>setTimeout(()=>v.recalculate()))},Ra=()=>{Ol()},Yr=()=>{const{scrollXLoad:t}=p,{visibleColumn:o,scrollXStore:n,fullColumnIdData:r}=c,a=t?o.slice(n.startIndex,n.endIndex):o.slice(0);a.forEach((f,h)=>{const m=f.id,x=r[m];x&&(x.$index=h)}),p.tableColumn=a},$s=()=>{const t=s.orderBy(c.collectColumn,"renderSortNumber");c.collectColumn=t;const o=ir(t);c.tableFullColumn=o,In()},on=()=>{const{mergeList:t,mergeFooterList:o}=p,{scrollXStore:n}=c,{preloadSize:r,startIndex:a,endIndex:f,offsetSize:h}=n,{toVisibleIndex:m,visibleSize:x}=Dn(),E={startIndex:Math.max(0,m-1-h-r),endIndex:m+x+h+r};n.visibleStartIndex=m,n.visibleEndIndex=m+x,tl(t.concat(o),E,"col");const{startIndex:R,endIndex:A}=E;(m<=a||m>=f-x-1)&&(a!==R||f!==A)&&(n.startIndex=R,n.endIndex=A,d.updateScrollXData()),d.closeTooltip()},ir=t=>{const o=[];return t.forEach(n=>{o.push(...n.children&&n.children.length?ir(n.children):[n])}),o},Ur=t=>{const{showOverflow:o}=e,n=ee.value,r=[],a=[],f=[],{isGroup:h,columnStore:m}=p,x=ht.value,{collectColumn:E,tableFullColumn:R,scrollXStore:A,fullColumnIdData:F}=c;if(h){const $=[],oe=[],Q=[];s.eachTree(E,(M,fe,De,Fe,xe)=>{const Ae=bn(M);xe&&xe.fixed&&(M.fixed=xe.fixed),xe&&M.fixed!==xe.fixed&&Ye("vxe.error.groupFixed"),Ae?M.visible=!!s.findTree(M.children,Pe=>bn(Pe)?!1:Pe.visible):M.visible&&(M.fixed==="left"?r.push(M):M.fixed==="right"?f.push(M):a.push(M))}),E.forEach(M=>{M.visible&&(M.fixed==="left"?$.push(M):M.fixed==="right"?Q.push(M):oe.push(M))}),p.tableGroupColumn=$.concat(oe).concat(Q)}else R.forEach($=>{$.visible&&($.fixed==="left"?r.push($):$.fixed==="right"?f.push($):a.push($))});const L=r.concat(a).concat(f),W=!!x.enabled&&x.gt>-1&&(x.gt===0||x.gt<R.length);if(p.hasFixedColumn=r.length>0||f.length>0,Object.assign(m,{leftList:r,centerList:a,rightList:f}),W){if(o&&!n.height){const $=c.tableFullColumn.find(oe=>oe.showOverflow===!1);$&&Ye("vxe.error.errProp",[`column[field="${$.field}"].show-overflow=false`,"show-overflow=true"])}if(t){const{visibleSize:$}=Dn();A.startIndex=0,A.endIndex=$,A.visibleSize=$,A.visibleStartIndex=0,A.visibleEndIndex=$}}return(L.length!==c.visibleColumn.length||!c.visibleColumn.every(($,oe)=>$===L[oe]))&&(d.clearMergeCells(),d.clearMergeFooterItems()),p.scrollXLoad=W,L.forEach(($,oe)=>{const Q=$.id,M=F[Q];M&&(M._index=oe)}),c.visibleColumn=L,Yr(),t?d.updateFooter().then(()=>d.recalculate()).then(()=>(d.updateCellAreas(),d.recalculate())):d.updateFooter()},Sa=()=>{const{collectColumn:t}=c;t.forEach((o,n)=>{const r=n+1;o.sortNumber=r,o.renderSortNumber=r})},Bs=t=>{const o=Dt.value;c.collectColumn=t;const n=ir(t);return c.tableFullColumn=n,p.isColLoading=!0,p.isDragColMove=!1,Sa(),Promise.resolve(bl()).then(()=>{const{scrollXLoad:r,scrollYLoad:a,expandColumn:f}=p;return In(),Ur(!0).then(()=>{p.scrollXLoad&&on()}),d.clearMergeCells(),d.clearMergeFooterItems(),d.handleTableData(!0),(r||a)&&f&&o.mode!=="fixed"&&Rt("vxe.error.scrollErrProp",["column.type=expand"]),pe().then(()=>(Ue&&Ue.syncUpdate({collectColumn:c.collectColumn,$table:d}),d.handleUpdateCustomColumn&&d.handleUpdateCustomColumn(),p.isColLoading=!1,d.recalculate()))})},ar=t=>{const{treeConfig:o}=e,n=gt.value,r=dt.value,{transform:a}=r,f=t||c.tableFullData,h=(a||!o)&&!!n.enabled&&n.gt>-1&&(n.gt===0||n.gt<f.length);return p.scrollYLoad=h,h},Vs=(t,o)=>{const{treeExpandedMaps:n,treeExpandLazyLoadedMaps:r,treeNodeColumn:a}=p,f=Object.assign({},n),{fullAllDataRowIdData:h,tableFullData:m}=c,x=dt.value,{reserve:E,lazy:R,accordion:A,toggleMethod:F}=x,L=x.children||x.childrenField,W=x.hasChild||x.hasChildField,$=[],oe=v.getColumnIndex(a),Q=v.getVMColumnIndex(a);let M=F?t.filter(fe=>F({$table:d,expanded:o,column:a,columnIndex:oe,$columnIndex:Q,row:fe})):t;if(A){M=M.length?[M[M.length-1]]:[];const fe=s.findTree(m,De=>De===M[0],{children:L});fe&&fe.items.forEach(De=>{const Fe=Ce(d,De);f[Fe]&&delete f[Fe]})}return o?M.forEach(fe=>{const De=Ce(d,fe);if(!f[De]){const Fe=h[De];Fe&&(R&&fe[W]&&!Fe.treeLoaded&&!r[De]?$.push(As(fe)):fe[L]&&fe[L].length&&(f[De]=fe))}}):M.forEach(fe=>{const De=Ce(d,fe);f[De]&&delete f[De]}),E&&M.forEach(fe=>Ls(fe,o)),p.treeExpandedMaps=f,Promise.all($).then(()=>v.recalculate())},Oa=(t,o)=>Vs(t,o).then(()=>(ll(),N.handleTableData(),Vl(),pe())).then(()=>v.recalculate(!0)).then(()=>{setTimeout(()=>{v.updateCellAreas()},30)}),zs=(t,o)=>{qr(o),t&&Bt("checkbox-all",{records:d.getCheckboxRecords(),reserves:d.getCheckboxReserveRecords(),indeterminates:d.getCheckboxIndeterminateRecords(),checked:o},t)},cr=t=>{const{mergeList:o,isAllOverflow:n}=p,{scrollYStore:r}=c,{preloadSize:a,startIndex:f,endIndex:h,offsetSize:m}=r,x=n?m:m+1,{toVisibleIndex:E,visibleSize:R}=ml(t),A={startIndex:Math.max(0,E-1-m-a),endIndex:E+R+x+a};r.visibleStartIndex=E,r.visibleEndIndex=E+R,tl(o,A,"row");const{startIndex:F,endIndex:L}=A;(E<=f||E>=h-R-1)&&(f!==F||h!==L)&&(r.startIndex=F,r.endIndex=L,d.updateScrollYData())},dr=t=>function(o){const{fullAllDataRowIdData:n}=c;if(o){const r=Ce(d,o),a=n[r];if(a)return a[t]}return-1},Gr=t=>function(o){const{fullColumnIdData:n}=c;if(o){const r=n[o.id];if(r)return r[t]}return-1},Ma=()=>{const{lxTimeout:t,lxRunTime:o,scrollXStore:n}=c,{visibleSize:r}=n,a=Math.max(5,Math.min(10,Math.floor(r/3)));t&&clearTimeout(t),(!o||o+a<Date.now())&&(c.lxRunTime=Date.now(),on()),c.lxTimeout=setTimeout(()=>{c.lxTimeout=void 0,c.lxRunTime=void 0,on()},a)},Da=()=>{const{lyTimeout:t,lyRunTime:o,scrollYStore:n}=c,{visibleSize:r}=n,a=Math.floor(Math.max(4,Math.min(10,r/3)));t&&clearTimeout(t),(!o||o+a<Date.now())&&(c.lyRunTime=Date.now(),cr()),c.lyTimeout=setTimeout(()=>{c.lyTimeout=void 0,c.lyRunTime=void 0,cr()},a)},Ta=(t,o)=>{const{scrollXLoad:n,scrollYLoad:r}=p,{lcsTimeout:a}=c;a&&clearTimeout(a),c.lcsTimeout=setTimeout(()=>{c.lcsRunTime=Date.now(),c.lcsTimeout=void 0,c.intoRunScroll=!1,c.inVirtualScroll=!1,c.inWheelScroll=!1,c.inHeaderScroll=!1,c.inBodyScroll=!1,c.inFooterScroll=!1,c.scrollRenderType="",ol(),t&&n&&d.updateScrollXData(),o&&r&&d.updateScrollYData().then(()=>{ol(),d.updateScrollYSpace()}),d.updateCellAreas()},200)},Fa=t=>{let o=1;const n=Date.now();return t+25>n?o=1.18:t+30>n?o=1.15:t+40>n?o=1.12:t+55>n?o=1.09:t+75>n?o=1.06:t+100>n&&(o=1.03),o},Ia=(t,o)=>{requestAnimationFrame(()=>{o(t)})},ka=(t,o)=>{const n=Math.abs(t),r=performance.now();let a=0;const f=h=>{let m=(h-r)/n;m>1&&(m=1);const x=Math.pow(m,2),E=Math.floor(t*x)-a;a+=E,o(E),m<1&&requestAnimationFrame(f)};requestAnimationFrame(f)},Bt=(t,o,n)=>{u(t,ud(n,{$table:d,$grid:He},o))},Aa=(t,o)=>{const{fullColumnIdData:n}=c,r=lo(d,t);return r&&n[r.id]?ii(d,r,o):pe()},Zr=()=>{const t=G.value;t&&t.clientWidth&&t.clientHeight&&v.recalculate()},js=(t,o)=>{d.analyColumnWidth(),d.recalculate(!0).then(()=>{d.saveCustomStore("update:width"),d.updateCellAreas(),d.dispatchEvent("column-resizable-change",o,t),d.dispatchEvent("resizable-change",o,t),setTimeout(()=>d.recalculate(!0),300)})},Ns=(t,o)=>{p.resizeHeightFlag++,d.recalculate(!0).then(()=>{d.updateCellAreas(),d.dispatchEvent("row-resizable-change",o,t),setTimeout(()=>d.recalculate(!0),300)})},Pn=()=>{const{expandColumn:t,scrollYLoad:o,rowExpandedMaps:n}=p,r=Dt.value,a=ee.value,f=lt.value,h=he.value,{mode:m}=r;if(t&&m==="fixed"){const{elemStore:x,afterFullData:E,fullAllDataRowIdData:R}=c,A=Z.value,F=Je(x["main-body-scroll"]);if(A&&F){let L=!1;if(o){let W=0;for(let $=0,oe=E.length;$<oe;$++){const Q=E[$],M=Ce(d,Q),fe=R[M]||{};fe.oTop=W,W+=fe.resizeHeight||f.height||a.height||fe.height||h,t&&n[M]&&(W+=fe.expandHeight||r.height||0)}}s.arrayEach(A.children,W=>{const $=W,oe=$.getAttribute("rowid")||"",Q=R[oe];if(Q){const M=$.offsetHeight+1;if(o)$.style.top=Ir(Q.oTop+(Q.resizeHeight||f.height||a.height||Q.height||h));else{const fe=F.querySelector(`.vxe-body--row[rowid="${oe}"]`);fe&&($.style.top=Ir(fe.offsetTop+fe.offsetHeight))}L||Q.expandHeight!==M&&(L=!0),Q.expandHeight=M}}),L&&p.rowExpandHeightFlag++}}},La=()=>{const{elemStore:t}=c,o=Z.value,n=Je(t["main-body-scroll"]);o&&n&&(o.scrollTop=n.scrollTop)};v={dispatchEvent:Bt,getEl(){return G.value},clearAll(){return Wc(d)},syncData(){return Rt("vxe.error.delFunc",["syncData","getData"]),pe().then(()=>(p.tableData=[],u("update:data",c.tableFullData),pe()))},updateData(){const{scrollXLoad:t,scrollYLoad:o}=p;return N.handleTableData(!0).then(()=>{if(v.updateFooter(),t||o)return t&&N.updateScrollXSpace(),o&&N.updateScrollYSpace(),v.refreshScroll()}).then(()=>(v.updateCellAreas(),v.recalculate(!0))).then(()=>{setTimeout(()=>d.recalculate(),50)})},loadData(t){const{initStatus:o}=c;return rr(t,!1).then(()=>(c.inited=!0,c.initStatus=!0,o||sr(),v.recalculate()))},reloadData(t){return v.clearAll().then(()=>(c.inited=!0,c.initStatus=!0,rr(t,!0))).then(()=>(sr(),v.recalculate()))},setRow(t,o){if(t&&o){let n=t;s.isArray(t)||(n=[t]);const r=El(d);n.forEach(a=>{const f=Ce(d,a),h=s.clone(Object.assign({},o),!0);s.set(h,r,f),Object.assign(a,h)})}return pe()},reloadRow(t,o,n){const{keepSource:r}=e,{tableData:a}=p,{tableSourceData:f}=c;if(r){const h=v.getRowIndex(t),m=f[h];if(m&&t)if(n){const x=s.clone(s.get(o||t,n),!0);s.set(t,n,x),s.set(m,n,x)}else{const x=El(d),E=Ce(d,t),R=s.clone(Object.assign({},o),!0);s.set(R,x,E),s.destructuring(m,Object.assign(t,R))}p.tableData=a.slice(0)}return pe()},getParams(){return e.params},loadTreeChildren(t,o){const{keepSource:n}=e,{tableSourceData:r,fullDataRowIdData:a,fullAllDataRowIdData:f,sourceDataRowIdData:h}=c,m=dt.value,{transform:x,mapChildrenField:E}=m,R=m.children||m.childrenField,A=f[Ce(d,t)],F=A?A.level:0;return v.createData(o).then(L=>{if(n){const W=Ce(d,t),$=s.findTree(r,oe=>W===Ce(d,oe),{children:R});$&&($.item[R]=s.clone(L,!0)),L.forEach(oe=>{const Q=Ce(d,oe);h[Q]=s.clone(oe,!0)})}return s.eachTree(L,(W,$,oe,Q,M,fe)=>{const De=Ce(d,W),Fe=M||A.row,xe={row:W,rowid:De,seq:-1,index:$,_index:-1,$index:-1,treeIndex:-1,items:oe,parent:Fe,level:F+fe.length,height:0,resizeHeight:0,oTop:0,expandHeight:0};a[De]=xe,f[De]=xe},{children:R}),t[R]=L,x&&(t[E]=s.clone(L,!1)),Vl(),L})},loadColumn(t){const o=s.mapTree(t,n=>fl(ct.createColumn(d,n)));return Bs(o)},reloadColumn(t){return v.clearAll().then(()=>v.loadColumn(t))},getRowNode(t){if(t){const{fullAllDataRowIdData:o}=c,n=t.getAttribute("rowid");if(n){const r=o[n];if(r)return{rowid:r.rowid,item:r.row,index:r.index,items:r.items,parent:r.parent}}}return null},getColumnNode(t){if(t){const{fullColumnIdData:o}=c,n=t.getAttribute("colid");if(n){const r=o[n];if(r)return{colid:r.colid,item:r.column,index:r.index,items:r.items,parent:r.parent}}}return null},getRowSeq:dr("seq"),getRowIndex:dr("index"),getVTRowIndex:dr("_index"),getVMRowIndex:dr("$index"),getColumnIndex:Gr("index"),getVTColumnIndex:Gr("_index"),getVMColumnIndex:Gr("$index"),createData(t){return pe().then(()=>fl(N.defineField(t)))},createRow(t){const o=s.isArray(t);return o||(t=[t||{}]),v.createData(t).then(n=>o?n:n[0])},revertData(t,o){const{keepSource:n,treeConfig:r}=e,{fullAllDataRowIdData:a,fullDataRowIdData:f,tableSourceData:h,sourceDataRowIdData:m,tableFullData:x,afterFullData:E}=c,R=dt.value,{transform:A}=R;if(!n)return pe();let F=t;t?s.isArray(t)||(F=[t]):F=s.toArray(d.getUpdateRecords());let L=!1;return F.length&&F.forEach(W=>{const $=Ce(d,W),oe=a[$];if(oe){const Q=oe.row;if(!d.isInsertByRow(Q)){const M=m[$];M&&Q&&(o?s.set(Q,o,s.clone(s.get(M,o),!0)):s.destructuring(Q,s.clone(M,!0)),!f[$]&&d.isRemoveByRow(Q)&&(x.unshift(Q),E.unshift(Q),L=!0))}}}),t?(L&&(d.updateFooter(),d.cacheRowMap(!1),d.handleTableData(r&&A),r&&A||d.updateAfterDataIndex(),d.checkSelectionStatus(),p.scrollYLoad&&d.updateScrollYSpace()),pe().then(()=>(d.updateCellAreas(),d.recalculate()))):d.reloadData(h)},clearData(t,o){const{tableFullData:n,visibleColumn:r}=c;return arguments.length?t&&!s.isArray(t)&&(t=[t]):t=n,o?t.forEach(a=>s.set(a,o,null)):t.forEach(a=>{r.forEach(f=>{f.field&&dl(a,f,null)})}),pe()},getCellElement(t,o){const{elemStore:n}=c,r=lo(d,o);if(!r)return null;const a=Ce(d,t),f=Je(n["main-body-scroll"]),h=Je(n["left-body-scroll"]),m=Je(n["right-body-scroll"]);let x;return r&&(r.fixed&&(r.fixed==="left"?h&&(x=h):m&&(x=m)),x||(x=f),x)?x.querySelector(`.vxe-body--row[rowid="${a}"] .${r.id}`):null},getCellLabel(t,o){const n=lo(d,o);if(!n)return null;const r=n.formatter,a=go(t,n);let f=a;if(r){let h;const{fullAllDataRowIdData:m}=c,x=Ce(d,t),E=n.id,R=m[x];if(R&&(h=R.formatData,h||(h=m[x].formatData={}),R&&h[E]&&h[E].value===a))return h[E].label;const A={cellValue:a,row:t,rowIndex:v.getRowIndex(t),column:n,columnIndex:v.getColumnIndex(n)};if(s.isString(r)){const F=Ci.get(r),L=F?F.tableCellFormatMethod||F.cellFormatMethod:null;f=L?L(A):""}else if(s.isArray(r)){const F=Ci.get(r[0]),L=F?F.tableCellFormatMethod||F.cellFormatMethod:null;f=L?L(A,...r.slice(1)):""}else f=r(A);h&&(h[E]={value:a,label:f})}return f},isInsertByRow(t){const{editStore:o}=p,n=Ce(d,t);return!!o.insertMaps[n]},isRemoveByRow(t){const{editStore:o}=p,n=Ce(d,t);return!!o.removeMaps[n]},removeInsertRow(){const{editStore:t}=p;return t.insertMaps={},d.remove(d.getInsertRecords())},isUpdateByRow(t,o){const{keepSource:n}=e,{tableFullColumn:r,fullDataRowIdData:a,sourceDataRowIdData:f}=c;if(n){const h=s.isString(t)||s.isNumber(t)?t:Ce(d,t),m=a[h];if(!m)return!1;const x=m.row,E=f[h];if(E){if(arguments.length>1)return!Bl(E,x,o);for(let R=0,A=r.length;R<A;R++){const F=r[R].field;if(F&&!Bl(E,x,F))return!0}}}return!1},getColumns(t){const o=c.visibleColumn;return s.isUndefined(t)?o.slice(0):o[t]},getColid(t){const o=lo(d,t);return o?o.id:null},getColumnById(t){const o=c.fullColumnIdData;return t&&o[t]?o[t].column:null},getColumnByField(t){const o=c.fullColumnFieldData;return t&&o[t]?o[t].column:null},getParentColumn(t){const o=c.fullColumnIdData,n=lo(d,t);return n&&n.parentId&&o[n.parentId]?o[n.parentId].column:null},getTableColumn(){return{collectColumn:c.collectColumn.slice(0),fullColumn:c.tableFullColumn.slice(0),visibleColumn:c.visibleColumn.slice(0),tableColumn:p.tableColumn.slice(0)}},moveColumnTo(t,o,n){const{fullColumnIdData:r,visibleColumn:a}=c,{dragToChild:f,dragPos:h,isCrossDrag:m}=Object.assign({},n),x=lo(d,t);let E=null;const R=x?r[x.id]:null;let A="left";if(s.isNumber(o)){if(R&&o){let F=R.items,L=R._index+o;m&&(F=a,L=R._index+o),L>0&&L<F.length-1&&(E=F[L]),o>0&&(A="right")}}else{E=lo(d,o);const F=E?r[E.id]:null;R&&F&&F._index>R._index&&(A="right")}return d.handleColDragSwapEvent(null,!0,x,E,h||A,f===!0)},moveRowTo(t,o,n){const{treeConfig:r}=e,{fullAllDataRowIdData:a,afterFullData:f}=c,{dragToChild:h,dragPos:m,isCrossDrag:x}=Object.assign({},n),E=dt.value,R=li(d,t);let A=null,F="top";const L=R?a[Ce(d,R)]:null;if(s.isNumber(o)){if(L&&o){let W=f,$=L._index+o;r&&(W=L.items,E.transform&&($=L.treeIndex+o,x&&(W=f,$=L._index+o))),$>=0&&$<=W.length-1&&(A=W[$]),o>0&&(F="bottom")}}else{A=li(d,o);const W=A?a[Ce(d,A)]:null;L&&W&&W._index>L._index&&(F="bottom")}return d.handleRowDragSwapEvent(null,!0,R,A,m||F,h===!0)},getFullColumns(){const{collectColumn:t}=c;return t.slice(0)},getData(t){const o=e.data||c.tableSynchData;return s.isUndefined(t)?o.slice(0):o[t]},getCheckboxRecords(t){const{treeConfig:o}=e,{tableFullData:n,afterFullData:r,afterTreeFullData:a,tableFullTreeData:f,fullDataRowIdData:h,afterFullRowMaps:m}=c,x=dt.value,E=ze.value,{transform:R,mapChildrenField:A}=x,{checkField:F}=E,L=x.children||x.childrenField;let W=[];const $=t?R?f:n:R?a:r;if(F)o?W=s.filterTree($,oe=>s.get(oe,F),{children:R?A:L}):W=$.filter(oe=>s.get(oe,F));else{const{selectCheckboxMaps:oe}=p;s.each(oe,(Q,M)=>{t?h[M]&&W.push(h[M].row):m[M]&&W.push(m[M])})}return W},getTreeRowChildren(t){const{treeConfig:o}=e,{fullAllDataRowIdData:n}=c,r=dt.value,{transform:a,mapChildrenField:f}=r,h=r.children||r.childrenField;if(t&&o){let m;if(s.isString(t)?m=t:m=Ce(d,t),m){const x=n[m],E=x?x.row:null;if(E)return E[a?f:h]||[]}}return[]},getTreeParentRow(t){const{treeConfig:o}=e,{fullAllDataRowIdData:n}=c;if(t&&o){let r;if(s.isString(t)?r=t:r=Ce(d,t),r){const a=n[r];return a?a.parent:null}}return null},getParentRow(t){return Rt("vxe.error.delFunc",["getParentRow","getTreeParentRow"]),d.getTreeParentRow(t)},getRowById(t){const{fullAllDataRowIdData:o}=c,n=s.eqNull(t)?"":encodeURIComponent(t||"");return o[n]?o[n].row:null},getRowid(t){return Ce(d,t)},getTableData(){const{tableData:t,footerTableData:o}=p,{tableFullData:n,afterFullData:r,tableFullTreeData:a}=c;return{fullData:e.treeConfig?a.slice(0):n.slice(0),visibleData:r.slice(0),tableData:t.slice(0),footerData:o.slice(0)}},getFullData(){const{treeConfig:t}=e,{tableFullData:o,tableFullTreeData:n}=c;if(t){const r=dt.value,{transform:a,mapChildrenField:f,rowField:h,parentField:m}=r,x=r.children||r.childrenField;return a?s.toArrayTree(s.toTreeArray(n,{children:f}),{key:h,parentKey:m,children:x,mapChildren:f}):n.slice(0)}return o.slice(0)},setColumnFixed(t,o){let n=!1;const r=s.isArray(t)?t:[t],a=_e.value,f=Rn.value;for(let h=0;h<r.length;h++){const m=r[h],x=lo(d,m),E=ri(d,x);if(E&&E.fixed!==o){if(!E.fixed&&f)return ue.modal&&ue.modal.message({status:"error",content:il("vxe.table.maxFixedCol",[a.maxFixedSize])}),pe();s.eachTree([E],R=>{R.fixed=o}),N.saveCustomStore("update:fixed"),n||(n=!0)}}return n?v.refreshColumn():pe()},clearColumnFixed(t){let o=!1;return(s.isArray(t)?t:[t]).forEach(r=>{const a=lo(d,r),f=ri(d,a);f&&f.fixed&&(s.eachTree([f],h=>{h.fixed=null}),N.saveCustomStore("update:fixed"),o||(o=!0))}),o?v.refreshColumn():pe()},hideColumn(t){let o=!1;return(s.isArray(t)?t:[t]).forEach(r=>{const a=lo(d,r);a&&a.visible&&(a.visible=!1,o||(o=!0))}),o?N.handleCustom():pe()},showColumn(t){let o=!1;return(s.isArray(t)?t:[t]).forEach(r=>{const a=lo(d,r);a&&!a.visible&&(a.visible=!0,o||(o=!0))}),o?N.handleCustom():pe()},setColumnWidth(t,o){const{elemStore:n}=c;let r=!1;const a=s.isArray(t)?t:[t];let f=s.toInteger(o);if(gn(o)){const h=Je(n["main-body-scroll"]),m=h?h.clientWidth-1:0;f=Math.floor(f*m)}return f&&(a.forEach(h=>{const m=lo(d,h);m&&(m.resizeWidth=f,r||(r=!0))}),r)?d.refreshColumn().then(()=>({status:r})):pe().then(()=>({status:r}))},getColumnWidth(t){const o=lo(d,t);return o?o.renderWidth:0},resetColumn(t){return Rt("vxe.error.delFunc",["resetColumn","resetCustom"]),d.resetCustom(t)},refreshColumn(t){return t&&$s(),Ur(!0).then(()=>v.refreshScroll()).then(()=>v.recalculate())},setRowHeightConf(t){const{fullAllDataRowIdData:o}=c;let n=!1;return t&&(s.each(t,(r,a)=>{const f=o[a];if(f){const h=s.toInteger(r);h&&(f.resizeHeight=h,n||(n=!0))}}),n&&(c.isResizeCellHeight=!0,p.resizeHeightFlag++)),pe().then(()=>({status:n}))},getRowHeightConf(t){const{fullAllDataRowIdData:o,afterFullData:n}=c,r=ee.value,a=lt.value,f=he.value,h={};return n.forEach(m=>{const x=Ce(d,m),E=o[x];if(E){const R=E.resizeHeight;if(R||t){const A=R||a.height||r.height||E.height||f;h[x]=A}}}),h},setRowHeight(t,o){const{fullAllDataRowIdData:n}=c;let r=!1;const a=s.isArray(t)?t:[t];let f=s.toInteger(o);if(gn(o)){const h=O.value,m=h?h.$el:null,x=m?m.clientHeight-1:0;f=Math.floor(f*x)}return f&&(a.forEach(h=>{const m=s.isString(h)||s.isNumber(h)?h:Ce(d,h),x=n[m];x&&(x.resizeHeight=f,r||(r=!0))}),r&&(c.isResizeCellHeight=!0,p.resizeHeightFlag++)),pe().then(()=>({status:r}))},getRowHeight(t){const{fullAllDataRowIdData:o}=c,n=ee.value,r=lt.value,a=he.value,f=s.isString(t)||s.isNumber(t)?t:Ce(d,t),h=o[f];return h?h.resizeHeight||r.height||n.height||h.height||a:0},refreshScroll(){const{elemStore:t,lastScrollLeft:o,lastScrollTop:n}=c,r=Je(t["main-header-scroll"]),a=Je(t["main-body-scroll"]),f=Je(t["main-footer-scroll"]),h=Je(t["left-body-scroll"]),m=Je(t["right-body-scroll"]),x=be.value,E=P.value;return new Promise(R=>{if(o||n)return cs(d,o,n).then().then(()=>{setTimeout(R,10)});c.intoRunScroll=!0,qt(E,n),qt(a,n),qt(h,n),qt(m,n),Kt(x,o),Kt(a,o),Kt(r,o),Kt(f,o),setTimeout(()=>{c.intoRunScroll=!1,R()},10)})},recalculate(t){return new Promise(o=>{const{rceTimeout:n,rceRunTime:r}=c,f=Ie.value.refreshDelay||20,h=G.value;h&&h.clientWidth&&(Uo(),Pn()),n?(clearTimeout(n),r&&r+(f-5)<Date.now()?o(Kr(!!t)):pe(()=>{o()})):o(Kr(!!t)),c.rceTimeout=setTimeout(()=>{c.rceTimeout=void 0,Kr(!!t)},f)})},openTooltip(t,o){const n=_.value;return n&&n.open?n.open(t,o):pe()},closeTooltip(){const{tooltipStore:t}=p,o=V.value,n=_.value;return t.visible&&(Object.assign(t,{row:null,column:null,content:null,visible:!1,currOpts:{}}),o&&o.close&&o.close()),n&&n.close&&n.close(),pe()},isAllCheckboxChecked(){return p.isAllSelected},isAllCheckboxIndeterminate(){return!p.isAllSelected&&p.isIndeterminate},getCheckboxIndeterminateRecords(t){const{treeConfig:o}=e,{fullDataRowIdData:n}=c,{treeIndeterminateMaps:r}=p;if(o){const a=[],f=[];return s.each(r,(h,m)=>{h&&(a.push(h),n[m]&&f.push(h))}),t?a:f}return[]},setCheckboxRow(t,o){return t&&!s.isArray(t)&&(t=[t]),zl(t,o,!0)},setCheckboxRowKey(t,o){const{fullAllDataRowIdData:n}=c;s.isArray(t)||(t=[t]);const r=[];return t.forEach(a=>{const f=n[a];f&&r.push(f.row)}),zl(r,o,!0)},isCheckedByCheckboxRow(t){const{selectCheckboxMaps:o}=p,n=ze.value,{checkField:r}=n;return r?s.get(t,r):!!o[Ce(d,t)]},isCheckedByCheckboxRowKey(t){const{selectCheckboxMaps:o}=p,{fullAllDataRowIdData:n}=c,r=ze.value,{checkField:a}=r;if(a){const f=n[t];return f?s.get(f.row,a):!1}return!!o[t]},isIndeterminateByCheckboxRow(t){const{treeIndeterminateMaps:o}=p;return!!o[Ce(d,t)]&&!d.isCheckedByCheckboxRow(t)},isIndeterminateByCheckboxRowKey(t){const{treeIndeterminateMaps:o}=p;return!!o[t]&&!d.isCheckedByCheckboxRowKey(t)},toggleCheckboxRow(t){const{selectCheckboxMaps:o}=p,n=ze.value,{checkField:r}=n,a=r?!s.get(t,r):!o[Ce(d,t)];return N.handleBatchSelectRows([t],a,!0),N.checkSelectionStatus(),pe()},setAllCheckboxRow(t){return qr(t,!0)},getRadioReserveRecord(t){const{treeConfig:o}=e,{fullDataRowIdData:n,radioReserveRow:r,afterFullData:a}=c,f=nt.value,h=dt.value,m=h.children||h.childrenField;if(f.reserve&&r){const x=Ce(d,r);if(t){if(!n[x])return r}else{const E=El(d);if(o){if(s.findTree(a,A=>x===s.get(A,E),{children:m}))return r}else if(!a.some(R=>x===s.get(R,E)))return r}}return null},clearRadioReserve(){return c.radioReserveRow=null,pe()},getCheckboxReserveRecords(t){const{treeConfig:o}=e,{afterFullData:n,fullDataRowIdData:r,checkboxReserveRowMap:a}=c,f=ze.value,h=dt.value,m=h.children||h.childrenField,x=[];if(f.reserve){const E={};o?s.eachTree(n,R=>{E[Ce(d,R)]=1},{children:m}):n.forEach(R=>{E[Ce(d,R)]=1}),s.each(a,(R,A)=>{R&&(t?r[A]||x.push(R):E[A]||x.push(R))})}return x},clearCheckboxReserve(){return c.checkboxReserveRowMap={},pe()},toggleAllCheckboxRow(){return zs(null,!p.isAllSelected),pe()},clearCheckboxRow(){const{treeConfig:t}=e,{tableFullData:o}=c,n=dt.value,r=n.children||n.childrenField,a=ze.value,{checkField:f,reserve:h}=a,m=a.indeterminateField||a.halfField;if(f){const x=E=>{t&&m&&s.set(E,m,!1),s.set(E,f,!1)};t?s.eachTree(o,x,{children:r}):o.forEach(x)}return h&&o.forEach(x=>tn(x,!1)),p.isAllSelected=!1,p.isIndeterminate=!1,p.selectCheckboxMaps={},p.treeIndeterminateMaps={},pe()},setCurrentRow(t){const o=ee.value,n=G.value;return v.clearCurrentRow(),p.currentRow=t,(o.isCurrent||e.highlightCurrentRow)&&n&&s.arrayEach(n.querySelectorAll(`[rowid="${Ce(d,t)}"]`),r=>Zo(r,"row--current")),pe()},isCheckedByRadioRow(t){const{selectRadioRow:o}=p;return t&&o?d.eqRow(o,t):!1},isCheckedByRadioRowKey(t){const{selectRadioRow:o}=p;return o?t===Ce(d,o):!1},setRadioRow(t){return Hn(t,!0)},setRadioRowKey(t){const{fullAllDataRowIdData:o}=c,n=o[t];return n?Hn(n.row,!0):pe()},clearCurrentRow(){const t=G.value;return p.currentRow=null,c.hoverRow=null,t&&s.arrayEach(t.querySelectorAll(".row--current"),o=>Po(o,"row--current")),pe()},clearRadioRow(){return p.selectRadioRow=null,pe()},getCurrentRecord(){return ee.value.isCurrent||e.highlightCurrentRow?p.currentRow:null},getRadioRecord(t){const{fullDataRowIdData:o,afterFullRowMaps:n}=c,{selectRadioRow:r}=p;if(r){const a=Ce(d,r);if(t){if(o[a])return r}else if(n[a])return r}return null},getCurrentColumn(){return _e.value.isCurrent||e.highlightCurrentColumn?p.currentColumn:null},setCurrentColumn(t){const o=lo(d,t);return o&&(v.clearCurrentColumn(),p.currentColumn=o),pe()},clearCurrentColumn(){return p.currentColumn=null,pe()},setPendingRow(t,o){const n=Object.assign({},p.pendingRowMaps);return t&&!s.isArray(t)&&(t=[t]),o?t.forEach(r=>{const a=Ce(d,r);a&&!n[a]&&(n[a]=r)}):t.forEach(r=>{const a=Ce(d,r);a&&n[a]&&delete n[a]}),p.pendingRowMaps=n,pe()},togglePendingRow(t){const o=Object.assign({},p.pendingRowMaps);return t&&!s.isArray(t)&&(t=[t]),t.forEach(n=>{const r=Ce(d,n);r&&(o[r]?delete o[r]:o[r]=n)}),p.pendingRowMaps=o,pe()},hasPendingByRow(t){return v.isPendingByRow(t)},isPendingByRow(t){const{pendingRowMaps:o}=p,n=Ce(d,t);return!!o[n]},getPendingRecords(){const{pendingRowMaps:t}=p,{fullAllDataRowIdData:o}=c,n=[];return s.each(t,(r,a)=>{o[a]&&n.push(r)}),n},clearPendingRow(){return p.pendingRowMaps={},pe()},sort(t,o){const n=$t.value,{multiple:r,remote:a,orders:f}=n;return t&&s.isString(t)&&(t=[{field:t,order:o}]),s.isArray(t)||(t=[t]),t.length?(r||Ql(),(r?t:[t[0]]).forEach((h,m)=>{let{field:x,order:E}=h,R=x;s.isString(x)&&(R=v.getColumnByField(x)),R&&R.sortable&&(f.indexOf(E)===-1&&(E=On(R)),R.order!==E&&(R.order=E),R.sortTime=Date.now()+m)}),a||N.handleTableData(!0),pe().then(()=>(v.updateCellAreas(),bo()))):pe()},setSort(t,o){const n=$t.value,{multiple:r,remote:a,orders:f}=n;if(s.isArray(t)||(t=[t]),t&&t.length){r||(t=[t[0]],Ql());let h=null;return t.forEach((m,x)=>{let{field:E,order:R}=m,A=E;s.isString(E)&&(A=v.getColumnByField(E)),h||(h=A),A&&A.sortable&&(f.indexOf(R)===-1&&(R=On(A)),A.order!==R&&(A.order=R),A.sortTime=Date.now()+x)}),o&&(a||N.handleTableData(!0),d.handleColumnSortEvent(new Event("click"),h)),pe().then(()=>(v.updateCellAreas(),bo()))}return pe()},clearSort(t){const o=$t.value;if(t){const n=lo(d,t);n&&(n.order=null)}else Ql();return o.remote||N.handleTableData(!0),pe().then(bo)},isSort(t){if(t){const o=lo(d,t);return o?o.sortable&&!!o.order:!1}return v.getSortColumns().length>0},getSortColumns(){const t=$t.value,{multiple:o,chronological:n}=t,r=[],{tableFullColumn:a}=c;return a.forEach(f=>{const{field:h,order:m}=f;f.sortable&&m&&r.push({column:f,field:h,property:h,order:m,sortTime:f.sortTime})}),o&&n&&r.length>1?s.orderBy(r,"sortTime"):r},closeFilter(){const{filterStore:t}=p,{column:o,visible:n}=t;return Object.assign(t,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),n&&Bt("filter-visible",{column:o,property:o.field,field:o.field,filterList:d.getCheckedFilters(),visible:!1},null),pe()},isActiveFilterByColumn(t){const o=lo(d,t);return o?o.filters&&o.filters.some(n=>n.checked):d.getCheckedFilters().length>0},isFilter(t){return v.isActiveFilterByColumn(t)},isRowExpandLoaded(t){const{fullAllDataRowIdData:o}=c,n=o[Ce(d,t)];return n&&!!n.expandLoaded},clearRowExpandLoaded(t){const o=Object.assign({},p.rowExpandLazyLoadedMaps),{fullAllDataRowIdData:n}=c,r=Dt.value,{lazy:a}=r,f=Ce(d,t),h=n[f];return a&&h&&(h.expandLoaded=!1,delete o[f]),p.rowExpandLazyLoadedMaps=o,pe()},reloadRowExpand(t){const{rowExpandLazyLoadedMaps:o}=p,n=Dt.value,{lazy:r}=n,a=Ce(d,t);return r&&!o[a]&&v.clearRowExpandLoaded(t).then(()=>Hs(t)),pe()},reloadExpandContent(t){return v.reloadRowExpand(t)},toggleRowExpand(t){return v.setRowExpand(t,!v.isRowExpandByRow(t))},setAllRowExpand(t){const o=dt.value,{tableFullData:n,tableFullTreeData:r}=c,a=o.children||o.childrenField;let f=[];return e.treeConfig?s.eachTree(r,h=>{f.push(h)},{children:a}):f=n,v.setRowExpand(f,t)},setRowExpand(t,o){const{rowExpandedMaps:n,rowExpandLazyLoadedMaps:r,expandColumn:a}=p,{fullAllDataRowIdData:f}=c;let h=Object.assign({},n);const m=Dt.value,{reserve:x,lazy:E,accordion:R,toggleMethod:A}=m,F=[],L=d.getColumnIndex(a),W=d.getVMColumnIndex(a);if(t){s.isArray(t)||(t=[t]),R&&(h={},t=t.slice(t.length-1,t.length));const $=A?t.filter(oe=>A({$table:d,expanded:o,column:a,columnIndex:L,$columnIndex:W,row:oe,rowIndex:v.getRowIndex(oe),$rowIndex:v.getVMRowIndex(oe)})):t;o?$.forEach(oe=>{const Q=Ce(d,oe);if(!h[Q]){const M=f[Q];E&&!M.expandLoaded&&!r[Q]?F.push(Hs(oe)):h[Q]=oe}}):$.forEach(oe=>{const Q=Ce(d,oe);h[Q]&&delete h[Q]}),x&&$.forEach(oe=>Ps(oe,o))}return p.rowExpandedMaps=h,Promise.all(F).then(()=>d.recalculate()).then(()=>(a&&(Pn(),La()),d.updateCellAreas()))},isRowExpandByRow(t){const{rowExpandedMaps:o}=p,n=Ce(d,t);return!!o[n]},isExpandByRow(t){return v.isRowExpandByRow(t)},clearRowExpand(){const{tableFullData:t}=c,o=Dt.value,{reserve:n}=o,r=v.getRowExpandRecords();return p.rowExpandedMaps={},n&&t.forEach(a=>Ps(a,!1)),pe().then(()=>{r.length&&v.recalculate()}).then(()=>d.updateCellAreas())},clearRowExpandReserve(){return c.rowExpandedReserveRowMap={},pe()},getRowExpandRecords(){const t=[];return s.each(p.rowExpandedMaps,o=>{o&&t.push(o)}),t},getTreeExpandRecords(){const t=[];return s.each(p.treeExpandedMaps,o=>{o&&t.push(o)}),t},isTreeExpandLoaded(t){const{fullAllDataRowIdData:o}=c,n=o[Ce(d,t)];return n&&!!n.treeLoaded},clearTreeExpandLoaded(t){const{fullAllDataRowIdData:o}=c,n=dt.value,{transform:r}=n;let a={};return t?(a=Object.assign({},p.treeExpandedMaps),s.isArray(t)||(t=[t]),t.forEach(f=>{const h=Ce(d,f),m=o[h];m&&(m.treeLoaded=!1,a[h]&&delete a[h])})):s.each(o,f=>{f.treeLoaded=!1}),p.treeExpandedMaps={},r?(ll(),d.handleTableData()):pe()},reloadTreeExpand(t){const{treeExpandLazyLoadedMaps:o}=p,n=dt.value,r=n.hasChild||n.hasChildField,{transform:a,lazy:f}=n,h=Ce(d,t);return f&&t[r]&&!o[h]?v.clearTreeExpandLoaded(t).then(()=>As(t)).then(()=>{if(a)return ll(),N.handleTableData()}).then(()=>v.recalculate()):pe()},reloadTreeChilds(t){return v.reloadTreeExpand(t)},toggleTreeExpand(t){return v.setTreeExpand(t,!v.isTreeExpandByRow(t))},setAllTreeExpand(t){const{tableFullData:o}=c,n=dt.value,{transform:r,lazy:a}=n,f=n.children||n.childrenField,h=[];return s.eachTree(o,m=>{const x=m[f];(a||x&&x.length)&&h.push(m)},{children:f}),v.setTreeExpand(h,t).then(()=>{if(r)return ll(),v.recalculate()})},setTreeExpand(t,o){const n=dt.value,{transform:r}=n;return t&&(s.isArray(t)||(t=[t]),t.length)?r?Oa(t,o):Vs(t,o):pe()},isTreeExpandByRow(t){const{treeExpandedMaps:o}=p;return!!o[Ce(d,t)]},clearTreeExpand(){const{tableFullTreeData:t}=c,o=dt.value,n=o.children||o.childrenField,{transform:r,reserve:a}=o,f=v.getTreeExpandRecords();return p.treeExpandedMaps={},a&&s.eachTree(t,h=>Ls(h,!1),{children:n}),N.handleTableData().then(()=>{if(r)return ll(),N.handleTableData()}).then(()=>{if(f.length)return v.recalculate()})},clearTreeExpandReserve(){return c.treeExpandedReserveRowMap={},pe()},getScroll(){const{scrollXLoad:t,scrollYLoad:o}=p,{elemStore:n}=c,r=Je(n["main-body-scroll"]);return{virtualX:t,virtualY:o,scrollTop:r?r.scrollTop:0,scrollLeft:r?r.scrollLeft:0}},scrollTo(t,o){const{elemStore:n}=c,r=Je(n["main-header-scroll"]),a=Je(n["main-body-scroll"]),f=Je(n["main-footer-scroll"]),h=Je(n["left-body-scroll"]),m=Je(n["right-body-scroll"]),x=be.value,E=P.value;return c.intoRunScroll=!0,s.isNumber(t)&&(Kt(x,t),Kt(a,t),Kt(r,t),Kt(f,t)),s.isNumber(o)&&(qt(E,o),qt(a,o),qt(h,o),qt(m,o)),p.scrollXLoad||p.scrollYLoad?new Promise(R=>{setTimeout(()=>{pe(()=>{c.intoRunScroll=!1,R()})},30)}):pe()},scrollToRow(t,o){const{isAllOverflow:n,scrollYLoad:r,scrollXLoad:a}=p,f=[];return t&&(e.treeConfig?f.push(N.scrollToTreeRow(t)):f.push(si(d,t))),o&&f.push(Aa(o,t)),Promise.all(f).then(()=>{if(t)return!n&&(r||a)&&(ol(),An()),pe()})},scrollToColumn(t){const{fullColumnIdData:o}=c,n=lo(d,t);return n&&o[n.id]?ii(d,n):pe()},clearScroll(){const{elemStore:t,scrollXStore:o,scrollYStore:n}=c,r=Je(t["main-header-scroll"]),a=Je(t["main-body-scroll"]),f=Je(t["main-footer-scroll"]),h=Je(t["left-body-scroll"]),m=Je(t["right-body-scroll"]),x=be.value,E=P.value;return c.intoRunScroll=!0,Kt(x,0),Kt(a,0),Kt(r,0),Kt(f,0),qt(E,0),qt(a,0),qt(h,0),qt(m,0),o.startIndex=0,o.visibleStartIndex=0,o.endIndex=o.visibleSize,o.visibleEndIndex=o.visibleSize,n.startIndex=0,n.visibleStartIndex=0,n.endIndex=n.visibleSize,n.visibleEndIndex=n.visibleSize,pe().then(()=>{c.intoRunScroll=!1})},updateFooter(){const{showFooter:t,footerData:o,footerMethod:n}=e,{visibleColumn:r,afterFullData:a}=c;let f=[];return t&&o&&o.length?f=o.slice(0):t&&n&&(f=r.length?n({columns:r,data:a,$table:d,$grid:He}):[]),p.footerTableData=f,pe()},updateStatus(t,o){return pe().then(()=>{const{editRules:n}=e;if(t&&n)return d.handleCellRuleUpdateStatus("change",t,o)})},setMergeCells(t){return e.spanMethod&&Ye("vxe.error.errConflicts",["merge-cells","span-method"]),Zl(t,p.mergeList,c.afterFullData),pe().then(()=>(v.updateCellAreas(),bo()))},removeMergeCells(t){e.spanMethod&&Ye("vxe.error.errConflicts",["merge-cells","span-method"]);const o=lr(t,p.mergeList,c.afterFullData);return pe().then(()=>(v.updateCellAreas(),bo(),o))},getMergeCells(){return p.mergeList.slice(0)},clearMergeCells(){return p.mergeList=[],pe().then(()=>bo())},setMergeFooterItems(t){return e.footerSpanMethod&&Ye("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),Zl(t,p.mergeFooterList),pe().then(()=>(v.updateCellAreas(),bo()))},removeMergeFooterItems(t){e.footerSpanMethod&&Ye("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);const o=lr(t,p.mergeFooterList);return pe().then(()=>(v.updateCellAreas(),bo(),o))},getMergeFooterItems(){return p.mergeFooterList.slice(0)},clearMergeFooterItems(){return p.mergeFooterList=[],pe().then(()=>bo())},updateCellAreas(){const{mouseConfig:t}=e,o=Ht.value;return t&&o.area&&d.handleRecalculateCellAreaEvent?d.handleRecalculateCellAreaEvent():pe()},getCustomStoreData(){const{id:t}=e,o=po.value,{collectColumn:n}=c,{checkMethod:r}=o,a={},f={},h={},m={},x={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0};if(!t)return Ye("vxe.error.reqProp",["id"]),x;let E=0,R=0,A=0,F=0;return s.eachTree(n,(L,W,$,oe,Q)=>{if(!Q&&(n.forEach(M=>{const fe=M.getKey();fe&&(R=1,f[fe]=M.renderSortNumber)}),L.fixed!==L.defaultFixed)){const M=L.getKey();M&&(A=1,m[M]=L.fixed)}if(L.resizeWidth){const M=L.getKey();M&&(E=1,a[M]=L.renderWidth)}if(!r||r({column:L})){if(!L.visible&&L.defaultVisible){const M=L.getKey();M&&(F=1,h[M]=!1)}else if(L.visible&&!L.defaultVisible){const M=L.getKey();M&&(F=1,h[M]=!0)}}}),E&&(x.resizableData=a),R&&(x.sortData=f),A&&(x.fixedData=m),F&&(x.visibleData=h),x},focus(){return c.isActivated=!0,pe()},blur(){return c.isActivated=!1,pe()},connect(t){return t?(Ue=t,Ue.syncUpdate({collectColumn:c.collectColumn,$table:d})):Ye("vxe.error.barUnableLink"),pe()}};const Ha=t=>{const{editStore:o,ctxMenuStore:n,filterStore:r,customStore:a}=p,{mouseConfig:f,editRules:h}=e,m=G.value,x=Ct.value,E=Ze.value,R=mo.value,{actived:A}=o,F=T.value,L=j.value,W=te.value,$=I.value;if(L&&(Ot(t,m,"vxe-cell--filter").flag||Ot(t,L.$el).flag||Ot(t,document.body,"vxe-table--ignore-clear").flag||N.preventEvent(t,"event.clearFilter",r.args,v.closeFilter)),W&&(a.btnEl===t.target||Ot(t,document.body,"vxe-toolbar-custom-target").flag||Ot(t,W.$el).flag||Ot(t,document.body,"vxe-table--ignore-clear").flag||N.preventEvent(t,"event.clearCustom",{},()=>{d.closeCustom&&d.closeCustom()})),A.row){if(x.autoClear!==!1){const Q=A.args.cell;(!Q||!Ot(t,Q).flag)&&(F&&Ot(t,F.$el).flag||(!c._lastCallTime||c._lastCallTime+50<Date.now())&&(Ot(t,document.body,"vxe-table--ignore-clear").flag||N.preventEvent(t,"event.clearEdit",A.args,()=>{let M;if(x.mode==="row"){const fe=Ot(t,m,"vxe-body--row"),De=fe.flag?v.getRowNode(fe.targetElem):null;M=De?!d.eqRow(De.item,A.args.row):!1}else M=!Ot(t,m,"col--edit").flag;if(M||(M=Ot(t,m,"vxe-header--row").flag),M||(M=Ot(t,m,"vxe-footer--row").flag),!M&&e.height&&!p.overflowY){const fe=t.target;pl(fe,"vxe-table--body-wrapper")&&(M=t.offsetY<fe.clientHeight)}(M||!Ot(t,m).flag)&&setTimeout(()=>{d.handleClearEdit(t).then(()=>{!c.isActivated&&h&&E.autoClear&&(p.validErrorMaps={})})})})))}}else if(f&&!Ot(t,m).flag&&!(He&&Ot(t,He.getRefMaps().refElem.value).flag)&&!($&&Ot(t,$.getRefMaps().refElem.value).flag)&&!(Ue&&Ot(t,Ue.getRefMaps().refElem.value).flag)&&(d.clearSelected&&d.clearSelected(),R.autoClear&&d.getCellAreas)){const Q=d.getCellAreas();Q&&Q.length&&!Ot(t,document.body,"vxe-table--ignore-areas-clear").flag&&N.preventEvent(t,"event.clearAreas",{},()=>{d.clearCellAreas(),d.clearCopyCellArea(),Bt("clear-cell-area-selection",{cellAreas:Q},t)})}d.closeMenu&&n.visible&&$&&!Ot(t,$.getRefMaps().refElem.value).flag&&d.closeMenu();const oe=Ot(t,He?He.getRefMaps().refElem.value:m).flag;!oe&&h&&E.autoClear&&(p.validErrorMaps={}),c.isActivated=oe},Pa=()=>{v.closeFilter(),d.closeMenu&&d.closeMenu()},$a=()=>{v.closeTooltip(),d.closeMenu&&d.closeMenu()},Ba=t=>{const{mouseConfig:o,keyboardConfig:n}=e,{filterStore:r,ctxMenuStore:a,editStore:f}=p,h=Ht.value,m=Mt.value,{actived:x}=f;_t.hasKey(t,jo.ESCAPE)&&N.preventEvent(t,"event.keydown",null,()=>{if(Bt("keydown-start",{},t),n&&o&&h.area&&d.handleKeyboardCellAreaEvent)d.handleKeyboardCellAreaEvent(t);else if((x.row||r.visible||a.visible)&&(t.stopPropagation(),d.closeMenu&&d.closeMenu(),v.closeFilter(),n&&m.isEsc&&x.row)){const R=x.args;d.handleClearEdit(t),h.selected&&pe(()=>d.handleSelected(R,t))}Bt("keydown",{},t),Bt("keydown-end",{},t)})},Va=t=>{c.isActivated&&N.preventEvent(t,"event.keydown",null,()=>{const{mouseConfig:o,keyboardConfig:n,treeConfig:r,editConfig:a,highlightCurrentRow:f}=e,{ctxMenuStore:h,editStore:m,currentRow:x}=p,{afterFullData:E}=c,R=so.value,A=ro.value,F=Mt.value,L=Ht.value,W=Ct.value,$=dt.value,oe=Oo.value,Q=ee.value,{selected:M,actived:fe}=m,De=$.children||$.childrenField,Fe=t.keyCode,xe=_t.hasKey(t,jo.ESCAPE),Ae=_t.hasKey(t,jo.BACKSPACE),Pe=_t.hasKey(t,jo.TAB),Qe=_t.hasKey(t,jo.ENTER),Ge=_t.hasKey(t,jo.SPACEBAR),at=_t.hasKey(t,jo.ARROW_LEFT),je=_t.hasKey(t,jo.ARROW_UP),We=_t.hasKey(t,jo.ARROW_RIGHT),Et=_t.hasKey(t,jo.ARROW_DOWN),Tt=_t.hasKey(t,jo.DELETE),bt=_t.hasKey(t,jo.F2),Wt=_t.hasKey(t,jo.CONTEXT_MENU),Xt=t.metaKey,Ft=t.ctrlKey,Jt=t.shiftKey,to=t.altKey,oo=at||je||We||Et,Vt=R&&h.visible&&(Qe||Ge||oo),co=ft(a)&&fe.column&&fe.row,wo=W.beforeEditMethod||W.activeMethod;if(Vt)t.preventDefault(),h.showChild&&bn(h.selected)?d.moveCtxMenu(t,h,"selectChild",at,!1,h.selected.children):d.moveCtxMenu(t,h,"selected",We,!0,oe);else if(n&&o&&L.area&&d.handleKeyboardCellAreaEvent)d.handleKeyboardCellAreaEvent(t);else if(xe){if(d.closeMenu&&d.closeMenu(),v.closeFilter(),n&&F.isEsc&&fe.row){const zt=fe.args;d.handleClearEdit(t),L.selected&&pe(()=>d.handleSelected(zt,t))}}else if(Ge&&n&&F.isChecked&&M.row&&M.column&&(M.column.type==="checkbox"||M.column.type==="radio"))t.preventDefault(),M.column.type==="checkbox"?N.handleToggleCheckRowEvent(t,M.args):N.triggerRadioRowEvent(t,M.args);else if(bt&&ft(a))co||M.row&&M.column&&(t.preventDefault(),d.handleEdit(M.args,t));else if(Wt)c._keyCtx=M.row&&M.column&&A.length,clearTimeout(c.keyCtxTimeout),c.keyCtxTimeout=setTimeout(()=>{c._keyCtx=!1},1e3);else if(Qe&&!to&&n&&F.isEnter&&(M.row||fe.row||r&&(Q.isCurrent||f)&&x)){const{isLastEnterAppendRow:zt,beforeEnterMethod:jt,enterMethod:Io}=F;if(Ft){if(fe.row){const uo=fe.args;d.handleClearEdit(t),L.selected&&pe(()=>{d.handleSelected(uo,t)})}}else if(M.row||fe.row){const uo=M.row?M.args:fe.args;if(Jt)F.enterToTab?d.moveTabSelected(uo,Jt,t):d.moveSelected(uo,at,!0,We,!1,t);else if(F.enterToTab)d.moveTabSelected(uo,Jt,t);else{const Vo=M.row||fe.row,Xo=M.column||fe.column,rn=d.getVTRowIndex(Vo),jl={row:Vo,rowIndex:d.getRowIndex(Vo),$rowIndex:d.getVMRowIndex(Vo),_rowIndex:rn,column:Xo,columnIndex:d.getColumnIndex(Xo),$columnIndex:d.getVMColumnIndex(Xo),_columnIndex:d.getVTColumnIndex(Xo),$table:d};if(!jt||jt(jl)!==!1){if(zt&&rn>=E.length-1){d.insertAt({},-1).then(({row:Nl})=>{d.scrollToRow(Nl,Xo),d.handleSelected(Object.assign(Object.assign({},uo),{row:Nl}),t)}),d.dispatchEvent("enter-append-row",jl,t);return}d.moveSelected(uo,at,!1,We,!0,t),Io&&Io(jl)}}}else if(r&&(Q.isCurrent||f)&&x){const uo=x[De];if(uo&&uo.length){t.preventDefault();const Vo=uo[0],Xo={$table:d,row:Vo,rowIndex:v.getRowIndex(Vo),$rowIndex:v.getVMRowIndex(Vo)};v.setTreeExpand(x,!0).then(()=>v.scrollToRow(Vo)).then(()=>N.triggerCurrentRowEvent(t,Xo))}}}else if(oo&&n&&F.isArrow)co||(M.row&&M.column?d.moveSelected(M.args,at,je,We,Et,t):(je||Et)&&(Q.isCurrent||f)&&d.moveCurrentRow(je,Et,t));else if(Pe&&n&&F.isTab)M.row||M.column?d.moveTabSelected(M.args,Jt,t):(fe.row||fe.column)&&d.moveTabSelected(fe.args,Jt,t);else if(n&&F.isDel&&Tt&&ft(a)&&(M.row||M.column)){if(!co){const{delMethod:zt}=F,jt={row:M.row,rowIndex:v.getRowIndex(M.row),column:M.column,columnIndex:v.getColumnIndex(M.column),$table:d,$grid:He};(!wo||wo(jt))&&(zt?zt(jt):dl(M.row,M.column,null),v.updateFooter(),Bt("cell-delete-value",jt,t))}}else if(Ae&&n&&F.isBack&&ft(a)&&(M.row||M.column)){if(!co){const{backMethod:zt}=F;if(F.isDel&&ft(a)&&(M.row||M.column)){const jt={row:M.row,rowIndex:v.getRowIndex(M.row),column:M.column,columnIndex:v.getColumnIndex(M.column),$table:d,$grid:He};(!wo||wo(jt))&&(zt?zt(jt):(dl(M.row,M.column,null),d.handleEdit(M.args,t)),Bt("cell-backspace-value",jt,t))}}}else if(Ae&&n&&r&&F.isBack&&(Q.isCurrent||f)&&x){const{parent:zt}=s.findTree(c.afterTreeFullData,jt=>jt===x,{children:De});if(zt){t.preventDefault();const jt={row:zt,rowIndex:v.getRowIndex(zt),$rowIndex:v.getVMRowIndex(zt),$table:d,$grid:He};v.setTreeExpand(zt,!1).then(()=>v.scrollToRow(zt)).then(()=>N.triggerCurrentRowEvent(t,jt))}}else if(n&&ft(a)&&F.isEdit&&!Ft&&!Xt&&(Ge||Fe>=48&&Fe<=57||Fe>=65&&Fe<=90||Fe>=96&&Fe<=111||Fe>=186&&Fe<=192||Fe>=219&&Fe<=222)){const{editMode:zt,editMethod:jt}=F;if(M.column&&M.row&&ft(M.column.editRender)){const Io=W.beforeEditMethod||W.activeMethod,uo={row:M.row,rowIndex:v.getRowIndex(M.row),column:M.column,columnIndex:v.getColumnIndex(M.column),$table:d,$grid:He};(!Io||Io(Object.assign(Object.assign({},M.args),{$table:d,$grid:He})))&&(jt?jt(uo):(zt!=="insert"&&dl(M.row,M.column,null),d.handleEdit(M.args,t)))}}Bt("keydown",{},t)})},za=t=>{const{keyboardConfig:o,mouseConfig:n}=e,{editStore:r,filterStore:a}=p,{isActivated:f}=c,h=Ht.value,m=Mt.value,{actived:x}=r;f&&!a.visible&&(x.row||x.column||o&&m.isClip&&n&&h.area&&d.handlePasteCellAreaEvent&&d.handlePasteCellAreaEvent(t),Bt("paste",{},t))},ja=t=>{const{keyboardConfig:o,mouseConfig:n}=e,{editStore:r,filterStore:a}=p,{isActivated:f}=c,h=Ht.value,m=Mt.value,{actived:x}=r;f&&!a.visible&&(x.row||x.column||o&&m.isClip&&n&&h.area&&d.handleCopyCellAreaEvent&&d.handleCopyCellAreaEvent(t),Bt("copy",{},t))},Na=t=>{const{keyboardConfig:o,mouseConfig:n}=e,{editStore:r,filterStore:a}=p,{isActivated:f}=c,h=Ht.value,m=Mt.value,{actived:x}=r;f&&!a.visible&&(x.row||x.column||o&&m.isClip&&n&&h.area&&d.handleCutCellAreaEvent&&d.handleCutCellAreaEvent(t),Bt("cut",{},t))},_s=()=>{d.closeMenu&&d.closeMenu();const t=G.value;if(!t||!t.clientWidth)return pe();v.recalculate(!0),v.updateCellAreas()},ur=t=>{const o=V.value;clearTimeout(c.tooltipTimeout),t?v.closeTooltip():o&&o.setActived&&o.setActived(!0)},Ws=()=>{const{dragRow:t,dragCol:o}=p;(t||o)&&(fr(),Qr(),ln(),p.dragRow=null,p.dragCol=null,p.isDragColMove=!1,p.isDragRowMove=!1)},Qr=()=>{const t=G.value;if(t){const o="row--drag-origin";s.arrayEach(t.querySelectorAll(`.${o}`),n=>{n.draggable=!1,Po(n,o)})}},_a=t=>{const o=G.value;if(o){const n="row--drag-origin",r=Ce(d,t);s.arrayEach(o.querySelectorAll(`[rowid="${r}"]`),a=>{Zo(a,n)})}},Wa=t=>{const{dragConfig:o}=e,{dragRow:n}=p,r=ce.value,{tooltipMethod:a}=r,f=a||(o?o.rowTooltipMethod:null);let h="";f?h=`${f({row:n})||""}`:h=il("vxe.table.dragTip",[t.textContent||""]),p.dragTipText=h},qa=t=>{const o=G.value;if(o){const n=[];s.eachTree([t],a=>{n.push(`[colid="${a.id}"]`)});const r="col--drag-origin";s.arrayEach(o.querySelectorAll(n.join(",")),a=>{Zo(a,r)})}},fr=()=>{const t=G.value;if(t){const o="col--drag-origin";s.arrayEach(t.querySelectorAll(`.${o}`),n=>{n.draggable=!1,Po(n,o)})}},Xa=t=>{const{dragCol:o}=p,n=Me.value,{tooltipMethod:r}=n;let a="";r?a=`${r({column:o})||""}`:a=il("vxe.table.dragTip",[t.textContent||""]),p.dragTipText=a},pr=(t,o,n,r,a)=>{const f=G.value;if(!f)return;const{overflowX:h,scrollbarWidth:m,overflowY:x,scrollbarHeight:E}=p,{prevDragToChild:R}=c,A=f.getBoundingClientRect(),F=x?m:0,L=h?E:0,W=f.clientWidth,$=f.clientHeight;if(o){const Q=k.value;if(Q)if(r){const M=Le.value,fe=o.getBoundingClientRect();let De=o.clientHeight;const Fe=Math.max(1,fe.y-A.y);Fe+De>$-L&&(De=$-Fe-L),Q.style.display="block",Q.style.left=`${M?F:0}px`,Q.style.top=`${Fe}px`,Q.style.height=`${De}px`,Q.style.width=`${W-F}px`,Q.setAttribute("drag-pos",a),Q.setAttribute("drag-to-child",R?"y":"n")}else Q.style.display=""}else if(n){const Q=z.value;if(Q)if(r){const M=Ne.value,fe=me.value,De=fe?fe.clientWidth:0,Fe=Ee.value,xe=Fe?Fe.clientWidth:0,Ae=n.getBoundingClientRect();let Pe=n.clientWidth;const Qe=Math.max(0,Ae.y-A.y),Ge=De;let at=Ae.x-A.x;at<Ge&&(Pe-=Ge-at,at=Ge);const je=W-xe-(xe?0:F);at+Pe>je&&(Pe=je-at),Q.style.display="block",Q.style.top=`${Qe}px`,Q.style.left=`${at}px`,Q.style.width=`${Pe}px`,R?Q.style.height=`${Ae.height}px`:Q.style.height=`${$-Qe-(M?0:L)}px`,Q.setAttribute("drag-pos",a),Q.setAttribute("drag-to-child",R?"y":"n")}else Q.style.display=""}const oe=tt.value;oe&&(oe.style.display="block",oe.style.top=`${Math.min(f.clientHeight-f.scrollTop-oe.clientHeight,t.clientY-A.y)}px`,oe.style.left=`${Math.min(f.clientWidth-f.scrollLeft-oe.clientWidth-16,t.clientX-A.x)}px`,oe.setAttribute("drag-status",r?R?"sub":"normal":"disabled"))},ln=()=>{const t=tt.value,o=k.value,n=z.value;t&&(t.style.display=""),o&&(o.style.display=""),n&&(n.style.display="")},Jr=(t,o,n,r,a)=>{if(!n)return pe();a.cell=o;const{tooltipStore:f}=p,h=pt.value,{column:m,row:x}=a,{showAll:E,contentMethod:R}=h,A=R?R(a):null,F=R&&!s.eqNull(A),L=F?A:s.toString(m.type==="html"?n.innerText:n.textContent).trim(),W=n.scrollWidth>n.clientWidth;return L&&(E||F||W)&&(Object.assign(f,{row:x,column:m,visible:!0,currOpts:{}}),pe(()=>{const $=V.value;$&&$.open&&$.open(n,ho(L))})),pe()},$n=(t,o)=>{if(t){if(He)return He.callSlot(t,o);if(s.isFunction(t))return So(t(o))}return[]};N={getSetupOptions(){return vt()},updateAfterDataIndex:Vl,callSlot:$n,getParentElem(){const t=G.value;if(He){const o=He.getRefMaps().refElem.value;return o?o.parentNode:null}return t?t.parentNode:null},getParentHeight(){const{height:t}=e,o=G.value;if(o){const n=o.parentNode,r=t==="100%"||t==="auto"?Es(n):0;let a=0;return n&&(He&&pl(n,"vxe-grid--table-wrapper")?a=He.getParentHeight():a=n.clientHeight),Math.floor(a-r)}return 0},getExcludeHeight(){return He?He.getExcludeHeight():0},defineField(t){const{treeConfig:o}=e,n=Dt.value,r=dt.value,a=nt.value,f=ze.value,h=r.children||r.childrenField,m=El(d);return s.isArray(t)||(t=[t]),t.map(x=>(c.tableFullColumn.forEach(R=>{const{field:A,editRender:F}=R;if(A&&!s.has(x,A)&&!x[A]){let L=null;if(F){const{defaultValue:W}=F;s.isFunction(W)?L=W({column:R}):s.isUndefined(W)||(L=W)}s.set(x,A,L)}}),[a.labelField,f.checkField,f.labelField,n.labelField].forEach(R=>{R&&cl(s.get(x,R))&&s.set(x,R,null)}),o&&r.lazy&&s.isUndefined(x[h])&&(x[h]=null),cl(s.get(x,m))&&s.set(x,m,ds()),x))},handleTableData(t){const{scrollYLoad:o}=p,{scrollYStore:n,fullDataRowIdData:r}=c;let a=c.afterFullData;t&&(Wr(),a=ll());const f=o?a.slice(n.startIndex,n.endIndex):a.slice(0);return f.forEach((h,m)=>{const x=Ce(d,h),E=r[x];E&&(E.$index=m)}),p.tableData=f,pe()},cacheRowMap(){const{treeConfig:t}=e,{treeExpandedMaps:o}=p,{fullAllDataRowIdData:n,tableFullData:r,tableFullTreeData:a}=c,f=dt.value,h=f.children||f.childrenField,m=f.hasChild||f.hasChildField,x=El(d),E=Object.assign({},n),R={},A=Object.assign({},o),F=(L,W,$,oe,Q,M)=>{let fe=Ce(d,L);const De=t&&oe?Vc(oe):W+1,Fe=M?M.length-1:0;if(cl(fe)&&(fe=ds(),s.set(L,x,fe)),t&&f.lazy){const Ae=o[fe];L[m]&&s.isUndefined(L[h])&&(L[h]=null),Ae&&(!L[h]||!L[h].length)&&delete A[fe]}let xe=n[fe];xe||(xe={row:L,rowid:fe,seq:De,index:-1,_index:-1,$index:-1,treeIndex:W,items:$,parent:Q,level:Fe,height:0,resizeHeight:0,oTop:0,expandHeight:0}),xe.treeLoaded=!1,xe.expandLoaded=!1,xe.row=L,xe.items=$,xe.parent=Q,xe.level=Fe,xe.index=t&&Q?-1:W,R[fe]=xe,E[fe]=xe};t?s.eachTree(a,F,{children:h}):r.forEach(F),c.fullDataRowIdData=R,c.fullAllDataRowIdData=E,p.treeExpandedMaps=A},cacheSourceMap(t){const{treeConfig:o}=e,n=dt.value;let{sourceDataRowIdData:r}=c;const a=s.clone(t,!0),f=El(d);r=c.sourceDataRowIdData={};const h=m=>{let x=Ce(d,m);cl(x)&&(x=ds(),s.set(m,f,x)),r[x]=m};if(o){const m=n.children||n.childrenField;s.eachTree(a,h,{children:n.transform?n.mapChildrenField:m})}else a.forEach(h);c.tableSourceData=a},analyColumnWidth(){const{tableFullColumn:t}=c,o=_e.value,{width:n,minWidth:r}=o,a=[],f=[],h=[],m=[],x=[],E=[],R=[],A=[];t.forEach(F=>{n&&!F.width&&(F.width=n),r&&!F.minWidth&&(F.minWidth=r),F.visible&&(F.resizeWidth?a.push(F):F.width==="auto"?R.push(F):ws(F.width)?f.push(F):gn(F.width)?x.push(F):ws(F.minWidth)?h.push(F):F.minWidth==="auto"?m.push(F):gn(F.minWidth)?E.push(F):A.push(F))}),Object.assign(p.columnStore,{resizeList:a,pxList:f,pxMinList:h,autoMinList:m,scaleList:x,scaleMinList:E,autoList:R,remainList:A})},handleColResizeMousedownEvent(t,o,n){t.stopPropagation(),t.preventDefault();const{column:r}=n,{overflowX:a,scrollbarHeight:f}=p,{elemStore:h,visibleColumn:m}=c,x=Xe.value,E=a?f:0,R=G.value,A=me.value,F=Ee.value,L=Ve.value;if(!L)return;const W=L.firstElementChild,$=Ne.value,{clientX:oe}=t,Q=G.value,M=t.target;let fe=r;r.children&&r.children.length&&s.eachTree(r.children,Xt=>{fe=Xt});const De=M.parentNode,Fe=Object.assign(n,{cell:De});let xe=0;const Ae=Je(h["main-body-scroll"]);if(!Ae)return;const Pe=Lc(M,Q),Qe=M.clientWidth,Ge=Math.floor(Qe/2),at=ni(Fe)-Ge;let je=Pe.left-De.clientWidth+Qe+at,We=Pe.left+Ge;const Et=o==="left",Tt=o==="right";let bt=0;if(Et||Tt){const Xt=Et?"nextElementSibling":"previousElementSibling";let Ft=De[Xt];for(;Ft&&!pl(Ft,"fixed--hidden");)pl(Ft,"col--group")||(bt+=Ft.offsetWidth),Ft=Ft[Xt];Tt&&F&&(We=F.offsetLeft+bt)}const Wt=Xt=>{Xt.stopPropagation(),Xt.preventDefault();const Ft=R.clientHeight,Jt=Xt.clientX-oe;let to=We+Jt;const oo=o?0:Ae.scrollLeft;Et?to=Math.min(to,(F?F.offsetLeft:Ae.clientWidth)-bt-at):Tt?(je=(A?A.clientWidth:0)+bt+at,to=Math.min(to,We+De.clientWidth-at)):je=Math.max(Ae.scrollLeft,je),xe=Math.max(to,je);const Vt=Math.max(1,xe-oo);if(L.style.left=`${Vt}px`,L.style.top=`${$?E:0}px`,L.style.height=`${$?Ft-E:Ft}px`,x.showDragTip&&W){W.textContent=il("vxe.table.resizeColTip",[fe.renderWidth+(Tt?We-xe:xe-We)]);const co=R.clientWidth,wo=Q.getBoundingClientRect(),zt=L.clientWidth,jt=W.clientWidth,Io=W.clientHeight;let uo=-jt;Vt<jt+zt?uo=0:Vt>co&&(uo+=co-Vt),W.style.left=`${uo}px`,W.style.top=`${Math.min(Ft-Io,Math.max(0,Xt.clientY-wo.y-Io/2))}px`}p.isDragResize=!0};p.isDragResize=!0,Zo(R,"col-drag--resize"),L.style.display="block",document.onmousemove=Wt,document.onmouseup=function(Xt){document.onmousemove=null,document.onmouseup=null,L.style.display="none",c._lastResizeTime=Date.now(),setTimeout(()=>{p.isDragResize=!1},50);const Ft=fe.renderWidth+(Tt?We-xe:xe-We),Jt=Object.assign(Object.assign({},n),{resizeWidth:Ft,resizeColumn:fe});x.dragMode==="fixed"&&m.forEach(to=>{to.id!==fe.id&&(to.resizeWidth||(to.resizeWidth=to.renderWidth))}),d.handleColResizeCellAreaEvent?d.handleColResizeCellAreaEvent(Xt,Jt):(fe.resizeWidth=Ft,js(Xt,Jt)),Po(R,"col-drag--resize")},Wt(t),d.closeMenu&&d.closeMenu()},handleColResizeDblclickEvent(t,o){const n=Xe.value,{isDblclickAutoWidth:r}=n,a=G.value;if(r&&a){t.stopPropagation(),t.preventDefault();const{fullColumnIdData:f}=c,{column:h}=o;let m=h;h.children&&h.children.length&&s.eachTree(h.children,oe=>{m=oe});const x=m.id,E=f[x],A=t.target.parentNode,F=Object.assign(o,{cell:A}),L=ni(F);a.setAttribute("data-calc-col","Y");let W=xl(m,a);a.removeAttribute("data-calc-col"),E&&(W=Math.max(W,E.width)),W=Math.max(L,W);const $=Object.assign(Object.assign({},o),{resizeWidth:W,resizeColumn:m});p.isDragResize=!1,c._lastResizeTime=Date.now(),d.handleColResizeDblclickCellAreaEvent?d.handleColResizeDblclickCellAreaEvent(t,$):(m.resizeWidth=W,js(t,$))}},handleRowResizeMousedownEvent(t,o){t.stopPropagation(),t.preventDefault();const{row:n}=o,{overflowX:r,scrollbarWidth:a,overflowY:f,scrollbarHeight:h}=p,{elemStore:m,fullAllDataRowIdData:x}=c,E=f?a:0,R=r?h:0,A=Le.value,F=Xe.value,L=ee.value,W=lt.value,$=G.value,oe=Oe.value;if(!oe)return;const{clientY:Q}=t,M=oe.firstElementChild,De=t.currentTarget.parentNode,Fe=De.parentNode;if(!Je(m["main-body-scroll"]))return;const Ae=Ce(d,n),Pe=x[Ae];if(!Pe)return;const Qe=he.value,Ge=Pe.resizeHeight||W.height||L.height||Pe.height||Qe,at=$.getBoundingClientRect(),je=Fe.getBoundingClientRect(),We=Q-je.y-Fe.clientHeight;let Et=Ge;const Tt=De.querySelector(".vxe-cell");let bt=0;if(Tt){const Ft=getComputedStyle(Tt);bt=Math.max(1,Math.ceil(s.toNumber(Ft.paddingTop)+s.toNumber(Ft.paddingBottom)))}const Wt=je.y-at.y+bt,Xt=Ft=>{Ft.stopPropagation(),Ft.preventDefault();const Jt=$.clientWidth-E,to=$.clientHeight-R;let oo=Ft.clientY-at.y-We;if(oo<Wt?oo=Wt:Et=Math.max(bt,Ge+Ft.clientY-Q),oe.style.left=`${A?E:0}px`,oe.style.top=`${oo}px`,oe.style.width=`${Jt}px`,F.showDragTip&&M){M.textContent=il("vxe.table.resizeRowTip",[Et]);const Vt=M.clientWidth,co=M.clientHeight;let wo=Math.max(2,Ft.clientX-at.x),zt=0;wo+Vt>=Jt-2&&(wo=Jt-Vt-2),oo+co>=to&&(zt=to-(oo+co)),M.style.left=`${wo}px`,M.style.top=`${zt}px`}p.isDragResize=!0};p.isDragResize=!0,Zo($,"row-drag--resize"),oe.style.display="block",document.onmousemove=Xt,document.onmouseup=function(Ft){if(document.onmousemove=null,document.onmouseup=null,oe.style.display="none",c._lastResizeTime=Date.now(),setTimeout(()=>{p.isDragResize=!1},50),Et!==Ge){const Jt=Object.assign(Object.assign({},o),{resizeHeight:Et,resizeRow:n});c.isResizeCellHeight=!0,d.handleRowResizeCellAreaEvent?d.handleRowResizeCellAreaEvent(Ft,Jt):(Pe.resizeHeight=Et,Ns(Ft,Jt))}Po($,"row-drag--resize")},Xt(t)},handleRowResizeDblclickEvent(t,o){const n=Xe.value,{isDblclickAutoHeight:r}=n,a=G.value;if(r&&a){t.stopPropagation(),t.preventDefault();const{editStore:f}=p,{fullAllDataRowIdData:h}=c,{actived:m}=f,{row:x}=o,E=Ce(d,x),R=h[E];if(!R)return;const A=()=>{a.setAttribute("data-calc-row","Y");const F=no(R,a);a.removeAttribute("data-calc-row");const L=Object.assign(Object.assign({},o),{resizeHeight:F,resizeRow:x});p.isDragResize=!1,c._lastResizeTime=Date.now(),d.handleRowResizeDblclickCellAreaEvent?d.handleRowResizeDblclickCellAreaEvent(t,L):(R.resizeHeight=F,Ns(t,L))};m.row||m.column?d.clearEdit().then(A):A()}},saveCustomStore(t){const{customConfig:o}=e,n=qe.value,r=po.value,{updateStore:a,storage:f}=r,h=f===!0,m=h?{}:Object.assign({},f||{}),x=h||m.resizable,E=h||m.visible,R=h||m.fixed,A=h||m.sort;if(t!=="reset"&&(p.isCustomStatus=!0),(o?ft(r):r.enabled)&&(x||E||R||A)){if(!n)return Ye("vxe.error.reqProp",["id"]),pe();const F=t==="reset"?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:v.getCustomStoreData();if(a)return a({id:n,type:t,storeData:F});or(n,t==="reset"?null:F)}return pe()},handleCustom(){const{mouseConfig:t}=e;return t&&(d.clearSelected&&d.clearSelected(),d.clearCellAreas&&(d.clearCellAreas(),d.clearCopyCellArea())),N.analyColumnWidth(),v.refreshColumn(!0)},handleUpdateDataQueue(){p.upDataFlag++},handleRefreshColumnQueue(){p.reColumnFlag++},preventEvent(t,o,n,r,a){let f=wi.get(o);!f.length&&o==="event.clearEdit"&&(f=wi.get("event.clearActived"));let h;return f.some(m=>m(Object.assign({$grid:He,$table:d,$event:t},n))===!1)||r&&(h=r()),a&&a(),h},updateCheckboxStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:o,treeIndeterminateMaps:n}=p,r=Object.assign({},o),a=Object.assign({},n),f=dt.value,{transform:h,mapChildrenField:m}=f,x=f.children||f.childrenField,E=ze.value,{checkField:R,checkStrictly:A,checkMethod:F}=E,{afterTreeFullData:L}=c;if(!A){if(t){const W={},$=[];s.eachTree(L,oe=>{const Q=Ce(d,oe),M=oe[h?m:x];M&&M.length&&!W[Q]&&(W[Q]=1,$.unshift([oe,Q,M]))},{children:h?m:x}),$.forEach(oe=>{const Q=oe[0],M=oe[1],fe=oe[2];let De=0,Fe=0,xe=0;fe.forEach(F?Qe=>{const Ge=Ce(d,Qe),at=R?s.get(Qe,R):r[Ge];F({row:Qe})?(at?De++:a[Ge]&&Fe++,xe++):at?De++:a[Ge]&&Fe++}:Qe=>{const Ge=Ce(d,Qe);(R?s.get(Qe,R):r[Ge])?De++:a[Ge]&&Fe++,xe++});const Ae=De>=xe,Pe=!Ae&&(De>=1||Fe>=1);R&&s.set(Q,R,Ae),Ae?(R||(r[M]=Q),a[M]&&delete a[M]):(R||r[M]&&delete r[M],Pe?a[M]=Q:a[M]&&delete a[M])})}p.selectCheckboxMaps=r,p.treeIndeterminateMaps=a}},updateAllCheckboxStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:o,treeIndeterminateMaps:n}=p,r=ze.value,{checkField:a,checkMethod:f}=r,{afterFullData:h,afterTreeFullData:m}=c;let x=0,E=0,R=0;const A=t?m:h;A.forEach(f?W=>{const $=Ce(d,W),oe=a?s.get(W,a):o[$];f({row:W})?(oe?x++:n[$]&&E++,R++):oe?x++:n[$]&&E++}:W=>{const $=Ce(d,W);(a?s.get(W,a):o[$])?x++:n[$]&&E++,R++});const F=A.length>0?R>0?x>=R:x>=A.length:!1,L=!F&&(x>=1||E>=1);p.isAllSelected=F,p.isIndeterminate=L},checkSelectionStatus(){d.updateCheckboxStatus(),d.updateAllCheckboxStatus()},handleBatchSelectRows(t,o,n){const{treeConfig:r}=e,{selectCheckboxMaps:a}=p,f=Object.assign({},a),h=dt.value,{transform:m,mapChildrenField:x}=h,E=h.children||h.childrenField,R=ze.value,{checkField:A,checkStrictly:F,checkMethod:L}=R,W=R.indeterminateField||R.halfField;if(A){if(r&&!F){s.eachTree(t,$=>{(n||!L||L({row:$}))&&(s.set($,A,o),W&&s.set($,W,!1),tn($,o))},{children:m?x:E}),p.selectCheckboxMaps=f;return}else t.forEach($=>{(n||!L||L({row:$}))&&(s.set($,A,o),tn($,o))});p.selectCheckboxMaps=f;return}if(r&&!F){s.eachTree(t,$=>{const oe=Ce(d,$);(n||!L||L({row:$}))&&(o?f[oe]=$:f[oe]&&delete f[oe],tn($,o))},{children:m?x:E}),p.selectCheckboxMaps=f;return}t.forEach($=>{const oe=Ce(d,$);(n||!L||L({row:$}))&&(o?f[oe]||(f[oe]=$):f[oe]&&delete f[oe],tn($,o))}),p.selectCheckboxMaps=f},handleSelectRow({row:t},o,n){d.handleBatchSelectRows([t],o,n)},triggerHeaderTitleEvent(t,o,n){const r=o.content||o.message;if(r){const{tooltipStore:a}=p,{column:f}=n,h=hl(r);ur(!0),a.row=null,a.column=f,a.visible=!0,a.currOpts=o,pe(()=>{const m=V.value;m&&m.open&&m.open(t.currentTarget,h)})}},triggerHeaderTooltipEvent(t,o){const{tooltipStore:n}=p,{column:r}=o;ur(!0);const a=t.currentTarget;if(!a)return;const f=a.parentElement;if(!f)return;const h=f.parentElement;h&&(n.column!==r||!n.visible)&&Jr(t,h,f,null,o)},triggerBodyTooltipEvent(t,o){const{editConfig:n}=e,{editStore:r}=p,{tooltipStore:a}=p,f=Ct.value,{actived:h}=r,{row:m,column:x}=o,E=t.currentTarget;ur(a.column!==x||a.row!==m),!(x.editRender&&ft(n)&&(f.mode==="row"&&h.row===m||h.row===m&&h.column===x))&&(a.column!==x||a.row!==m||!a.visible)&&Jr(t,E,E.querySelector(".vxe-cell--wrapper"),null,o)},triggerFooterTooltipEvent(t,o){const{column:n}=o,{tooltipStore:r}=p,a=t.currentTarget;ur(r.column!==n||!!r.row),(r.column!==n||!r.visible)&&Jr(t,a,a.querySelector(".vxe-cell--wrapper")||a.children[0],null,o)},handleTargetLeaveEvent(){const t=pt.value;let o=V.value;o&&o.setActived&&o.setActived(!1),t.enterable?c.tooltipTimeout=setTimeout(()=>{o=V.value,o&&o.isActived&&!o.isActived()&&d.closeTooltip()},t.leaveDelay):d.closeTooltip()},triggerHeaderCellClickEvent(t,o){const{_lastResizeTime:n}=c,r=$t.value,a=_e.value,{column:f}=o,h=t.currentTarget,m=n&&n>Date.now()-300,x=Ot(t,h,"vxe-cell--sort").flag,E=Ot(t,h,"vxe-cell--filter").flag;r.trigger==="cell"&&!(m||x||E)&&N.triggerSortEvent(t,f,On(f)),Bt("header-cell-click",Object.assign({triggerResizable:m,triggerSort:x,triggerFilter:E,cell:h},o),t),(a.isCurrent||e.highlightCurrentColumn)&&N.triggerCurrentColumnEvent(t,o)},triggerHeaderCellDblclickEvent(t,o){Bt("header-cell-dblclick",Object.assign({cell:t.currentTarget},o),t)},triggerCellClickEvent(t,o){const{highlightCurrentRow:n,editConfig:r}=e,{editStore:a,isDragResize:f}=p;if(f)return;const h=Dt.value,m=Ct.value,x=dt.value,E=nt.value,R=ze.value,A=Mt.value,F=ee.value,{actived:L,focused:W}=a,{row:$,column:oe}=o,{type:Q,treeNode:M}=oe,fe=Q==="radio",De=Q==="checkbox",Fe=Q==="expand",xe=t.currentTarget,Ae=fe&&Ot(t,xe,"vxe-cell--radio").flag,Pe=De&&Ot(t,xe,"vxe-cell--checkbox").flag,Qe=M&&Ot(t,xe,"vxe-tree--btn-wrapper").flag,Ge=Fe&&Ot(t,xe,"vxe-table--expanded").flag;o=Object.assign({cell:xe,triggerRadio:Ae,triggerCheckbox:Pe,triggerTreeNode:Qe,triggerExpandNode:Ge},o),!Pe&&!Ae&&(!Ge&&(h.trigger==="row"||Fe&&h.trigger==="cell")&&N.triggerRowExpandEvent(t,o),(x.trigger==="row"||M&&x.trigger==="cell")&&N.triggerTreeExpandEvent(t,o)),Qe||(Ge||((F.isCurrent||n)&&!Pe&&!Ae&&N.triggerCurrentRowEvent(t,o),!Ae&&(E.trigger==="row"||fe&&E.trigger==="cell")&&N.triggerRadioRowEvent(t,o),!Pe&&(R.trigger==="row"||De&&R.trigger==="cell")&&N.handleToggleCheckRowEvent(t,o)),ft(r)&&(A.arrowCursorLock&&t&&m.mode==="cell"&&t.target&&/^input|textarea$/i.test(t.target.tagName)&&(W.column=oe,W.row=$),m.trigger==="manual"?L.args&&L.row===$&&oe!==L.column&&Sl(t,o):(!L.args||$!==L.row||oe!==L.column)&&(m.trigger==="click"||m.trigger==="dblclick"&&m.mode==="row"&&L.row===$)&&Sl(t,o))),ft(r)&&m.trigger==="dblclick"&&L.row&&L.column&&(m.mode==="row"?d.eqRow(L.row,$)||d.handleClearEdit(t):m.mode==="cell"&&(!d.eqRow(L.row,$)||L.column.id!==oe.id)&&d.handleClearEdit(t)),Bt("cell-click",o,t)},triggerCellDblclickEvent(t,o){const{editConfig:n}=e,{editStore:r,isDragResize:a}=p;if(a)return;const f=Ct.value,{actived:h}=r,m=t.currentTarget;o=Object.assign({cell:m},o),ft(n)&&f.trigger==="dblclick"&&(!h.args||t.currentTarget!==h.args.cell)&&(f.mode==="row"?nl("blur").catch(x=>x).then(()=>{d.handleEdit(o,t).then(()=>nl("change")).catch(x=>x)}):f.mode==="cell"&&d.handleEdit(o,t).then(()=>nl("change")).catch(x=>x)),Bt("cell-dblclick",o,t)},handleToggleCheckRowEvent(t,o){const{selectCheckboxMaps:n}=p,r=ze.value,{checkField:a,trigger:f}=r,{row:h}=o;if(f==="manual")return;let m=!1;a?m=!s.get(h,a):m=!n[Ce(d,h)],t?N.triggerCheckRowEvent(t,o,m):(N.handleBatchSelectRows([h],m),N.checkSelectionStatus())},triggerCheckRowEvent(t,o,n){const r=ze.value,{row:a}=o,{afterFullData:f}=c,{checkMethod:h,trigger:m}=r;if(m!=="manual"){if(t.stopPropagation(),r.isShiftKey&&t.shiftKey&&!e.treeConfig){const x=v.getCheckboxRecords();if(x.length){const E=x[0],R=v.getVTRowIndex(a),A=v.getVTRowIndex(E);if(R!==A){v.setAllCheckboxRow(!1);const F=R<A?f.slice(R,A+1):f.slice(A,R+1);zl(F,!0,!1),Bt("checkbox-range-select",Object.assign({rangeRecords:F},o),t);return}}}(!h||h({row:a}))&&(N.handleBatchSelectRows([a],n),N.checkSelectionStatus(),Bt("checkbox-change",Object.assign({records:v.getCheckboxRecords(),reserves:v.getCheckboxReserveRecords(),indeterminates:v.getCheckboxIndeterminateRecords(),checked:n},o),t))}},triggerCheckAllEvent(t,o){const n=ze.value,{trigger:r}=n;r!=="manual"&&(t&&t.stopPropagation(),zs(t,o))},triggerRadioRowEvent(t,o){const{selectRadioRow:n}=p,{row:r}=o,a=nt.value,{trigger:f}=a;if(f==="manual")return;t.stopPropagation();let h=r,m=n!==h;m?Hn(h):a.strict||(m=n===h,m&&(h=null,v.clearRadioRow())),m&&Bt("radio-change",Object.assign({oldValue:n,newValue:h},o),t)},triggerCurrentColumnEvent(t,o){const n=_e.value,{currentMethod:r}=n,{column:a}=o;(!r||r({column:a}))&&v.setCurrentColumn(a)},triggerCurrentRowEvent(t,o){const{currentRow:n}=p,r=ee.value,{currentMethod:a}=r,{row:f}=o,h=n!==f;(!a||a({row:f}))&&(v.setCurrentRow(f),h&&Bt("current-change",Object.assign({oldValue:n,newValue:f},o),t))},triggerRowExpandEvent(t,o){const{rowExpandLazyLoadedMaps:n,expandColumn:r}=p,a=Dt.value,{row:f}=o,{lazy:h,trigger:m}=a;if(m==="manual")return;t.stopPropagation();const x=Ce(d,f);if(!h||!n[x]){const E=!v.isRowExpandByRow(f),R=v.getColumnIndex(r),A=v.getVMColumnIndex(r);v.setRowExpand(f,E),Bt("toggle-row-expand",{expanded:E,column:r,columnIndex:R,$columnIndex:A,row:f,rowIndex:v.getRowIndex(f),$rowIndex:v.getVMRowIndex(f)},t)}},triggerTreeExpandEvent(t,o){const{treeExpandLazyLoadedMaps:n}=p,r=dt.value,{row:a,column:f}=o,{lazy:h,trigger:m}=r;if(m==="manual")return;t.stopPropagation();const x=Ce(d,a);if(!h||!n[x]){const E=!v.isTreeExpandByRow(a),R=v.getColumnIndex(f),A=v.getVMColumnIndex(f);v.setTreeExpand(a,E),Bt("toggle-tree-expand",{expanded:E,column:f,columnIndex:R,$columnIndex:A,row:a},t)}},handleColumnSortEvent(t,o){const{mouseConfig:n}=e,r=Ht.value,{field:a,sortable:f}=o;if(f){const h={$table:d,$event:t,column:o,field:a,property:a,order:o.order,sortList:v.getSortColumns(),sortTime:o.sortTime};n&&r.area&&d.handleSortEvent&&d.handleSortEvent(t,h),Bt("sort-change",h,t)}},triggerSortEvent(t,o,n){const r=$t.value,{multiple:a,allowClear:f}=r,{field:h,sortable:m}=o;m&&(!n||o.order===n?f&&v.clearSort(a?o:null):v.sort({field:h,order:n}),d.handleColumnSortEvent(t,o))},handleCellRuleUpdateStatus(t,o,n){const{validStore:r}=p,{row:a,column:f}=o;if(d.hasCellRules&&d.hasCellRules(t,a,f)){const h=d.getCellElement(a,f);if(h){const m=!s.isUndefined(n);return d.validCellRules(t,a,f,n).then(()=>{m&&r.visible&&dl(a,f,n),d.clearValidate(a,f)}).catch(({rule:x})=>{m&&dl(a,f,n),d.showValidTooltip({rule:x,row:a,column:f,cell:h})})}}return pe()},triggerHeaderCellMousedownEvent(t,o){const{mouseConfig:n}=e,r=Ht.value,a=_e.value,f=Me.value,{trigger:h,isCrossDrag:m,isPeerDrag:x,disabledMethod:E}=f,R=t.currentTarget,A=R&&R.tagName&&R.tagName.toLowerCase()==="input",F=Ot(t,R,"vxe-cell--checkbox").flag,L=Ot(t,R,"vxe-cell--sort").flag,W=Ot(t,R,"vxe-cell--filter").flag;let $=!1;const oe=a.drag&&h==="cell";if(!(A||F||L||W)){const{column:Q}=o;oe&&!Q.fixed&&(m||x||!Q.parentId)&&!(E&&E(o))&&($=!0,d.handleHeaderCellDragMousedownEvent(t,o))}!$&&n&&r.area&&d.handleHeaderCellAreaEvent&&d.handleHeaderCellAreaEvent(t,Object.assign({cell:R,triggerSort:L,triggerFilter:W},o)),d.focus(),d.closeMenu&&d.closeMenu()},triggerCellMousedownEvent(t,o){const{column:n}=o,{type:r,treeNode:a}=n,f=r==="radio",h=r==="checkbox",m=r==="expand",x=ee.value,E=ce.value,{trigger:R,isCrossDrag:A,isPeerDrag:F,disabledMethod:L}=E,W=t.currentTarget;o.cell=W;const $=W&&W.tagName&&W.tagName.toLowerCase()==="input",oe=f&&Ot(t,W,"vxe-cell--radio").flag,Q=h&&Ot(t,W,"vxe-cell--checkbox").flag,M=a&&Ot(t,W,"vxe-tree--btn-wrapper").flag,fe=m&&Ot(t,W,"vxe-table--expanded").flag;let De=!1;x.drag&&(De=R==="row"||n.dragSort&&R==="cell");let Fe=!1;$||oe||Q||M||fe||De&&(A||F||!o.level)&&!(L&&L(o))&&(Fe=!0,d.handleCellDragMousedownEvent(t,o)),!Fe&&d.handleCellMousedownEvent&&d.handleCellMousedownEvent(t,o),d.focus(),d.closeFilter(),d.closeMenu&&d.closeMenu()},triggerCellMouseupEvent(){Ws()},handleRowDragDragstartEvent(t){t.dataTransfer&&t.dataTransfer.setDragImage(Cs(),0,0)},handleRowDragSwapEvent(t,o,n,r,a,f){const{treeConfig:h,dragConfig:m}=e,x=ce.value,{fullAllDataRowIdData:E}=c,{isPeerDrag:R,isCrossDrag:A,isSelfToChildDrag:F,dragEndMethod:L,dragToChildMethod:W}=x,$=dt.value,{transform:oe,rowField:Q,mapChildrenField:M,parentField:fe}=$,De=$.children||$.childrenField,{afterFullData:Fe,tableFullData:xe}=c,Ae=L||(m?m.dragEndMethod:null),Pe=a==="bottom"?1:0,Qe={status:!1};if(r&&n&&r!==n){const Ge={oldRow:n,newRow:r,dragRow:n,dragPos:a,dragToChild:!!f,offsetIndex:Pe},at=F&&W?W(Ge):f;return Promise.resolve(Ae?Ae(Ge):!0).then(je=>{if(!je)return Qe;let We=-1,Et=-1;if(h){if(oe){const Tt=Ce(d,n),bt=E[Tt],Wt=Ce(d,r),Xt=E[Wt];if(bt&&Xt){const{level:Ft}=bt,{level:Jt}=Xt,to={};s.eachTree([n],jt=>{to[Ce(d,jt)]=jt},{children:M});let oo=!1;if(Ft&&Jt)if(R&&!A){if(bt.row[fe]!==Xt.row[fe])return Qe}else{if(!A)return Qe;if(to[Wt]&&(oo=!0,!(A&&F)))return ue.modal&&ue.modal.message({status:"error",content:il("vxe.error.treeDragChild")}),Qe}else if(Ft){if(!A)return Qe}else if(Jt){if(!A)return Qe;if(to[Wt]&&(oo=!0,!(A&&F)))return ue.modal&&ue.modal.message({status:"error",content:il("vxe.error.treeDragChild")}),Qe}const Vt=s.toTreeArray(c.afterTreeFullData,{key:Q,parentKey:fe,children:M}),co=d.findRowIndexOf(Vt,n);Vt.splice(co,1);const zt=d.findRowIndexOf(Vt,r)+Pe;Vt.splice(zt,0,n),oo&&A&&F&&s.each(n[De],jt=>{jt[fe]=n[fe]}),n[fe]=at?r[Q]:r[fe],c.tableFullTreeData=s.toArrayTree(Vt,{key:Q,parentKey:fe,children:De,mapChildren:M})}}}else{We=d.findRowIndexOf(Fe,n);const Tt=d.findRowIndexOf(xe,n);Fe.splice(We,1),xe.splice(Tt,1);const bt=d.findRowIndexOf(Fe,r),Wt=d.findRowIndexOf(xe,r);Et=bt+Pe;const Xt=Wt+Pe;Fe.splice(Et,0,n),xe.splice(Xt,0,n)}return p.isDragRowMove=!0,d.handleTableData(h&&oe),d.cacheRowMap(!1),ar(),h&&oe||d.updateAfterDataIndex(),d.checkSelectionStatus(),p.scrollYLoad&&d.updateScrollYSpace(),t&&Bt("row-dragend",{oldRow:n,newRow:r,dragRow:n,dragPos:a,dragToChild:at,offsetIndex:Pe,_index:{newIndex:Et,oldIndex:We}},t),pe().then(()=>{d.updateCellAreas(),d.recalculate()}).then(()=>({status:!0}))}).catch(()=>Qe)}return Promise.resolve(Qe)},handleRowDragDragendEvent(t){const{treeConfig:o}=e,{fullAllDataRowIdData:n,prevDragToChild:r}=c,{dragRow:a}=p,f=dt.value,{lazy:h}=f,m=f.hasChild||f.hasChildField,{prevDragRow:x,prevDragPos:E}=c;if(o&&h&&r){const R=Ce(d,x),A=n[R];x[m]?A&&A.treeLoaded&&d.handleRowDragSwapEvent(t,!0,a,x,E,r):d.handleRowDragSwapEvent(t,!0,a,x,E,r)}else d.handleRowDragSwapEvent(t,!0,a,x,E,r);ln(),Qr(),c.prevDragToChild=!1,p.dragRow=null,p.dragCol=null,setTimeout(()=>{p.isDragRowMove=!1},500)},handleRowDragDragoverEvent(t){const{treeConfig:o}=e,{fullAllDataRowIdData:n}=c,{dragRow:r}=p,a=dt.value,{lazy:f,transform:h,parentField:m}=a,x=a.hasChild||a.hasChildField,E=ce.value,{isPeerDrag:R,isCrossDrag:A,isToChildDrag:F}=E;if(!r){t.preventDefault();return}const L=t.ctrlKey,W=t.currentTarget,$=W.getAttribute("rowid")||"",oe=n[$];if(oe){const Q=oe.row,M=Ce(d,Q),fe=n[M];t.preventDefault();const{dragRow:De}=p,xe=t.clientY-W.getBoundingClientRect().y<W.clientHeight/2?"top":"bottom";if(c.prevDragToChild=!!(o&&h&&A&&F&&L),c.prevDragRow=Q,c.prevDragPos=xe,d.eqRow(De,Q)||L&&o&&f&&Q[x]&&fe&&!fe.treeLoaded||!A&&o&&h&&(R?De[m]!==Q[m]:oe.level)){pr(t,W,null,!1,xe);return}pr(t,W,null,!0,xe),Bt("row-dragover",{oldRow:De,targetRow:Q,dragPos:xe},t)}},handleCellDragMousedownEvent(t,o){var n;t.stopPropagation();const{dragConfig:r}=e,a=ce.value,{trigger:f,dragStartMethod:h}=a,{row:m}=o,x=t.currentTarget,E=f==="cell"||f==="row"?x:(n=x.parentElement)===null||n===void 0?void 0:n.parentElement,R=E.parentElement,A=h||(r?r.dragStartMethod:null);if(Qr(),A&&!A(o)){R.draggable=!1,p.dragRow=null,p.dragCol=null,ln();return}p.dragRow=m,p.dragCol=null,R.draggable=!0,_a(m),Wa(E),Bt("row-dragstart",o,t)},handleCellDragMouseupEvent(){Ws()},handleHeaderCellDragDragstartEvent(t){t.dataTransfer&&t.dataTransfer.setDragImage(Cs(),0,0)},handleColDragSwapColumn(){$s(),Ur(!1).then(()=>{d.updateCellAreas(),d.saveCustomStore("update:sort")})},handleColDragSwapEvent(t,o,n,r,a,f){const{mouseConfig:h}=e,m=Me.value,{isPeerDrag:x,isCrossDrag:E,isSelfToChildDrag:R,isToChildDrag:A,dragEndMethod:F,dragToChildMethod:L}=m,{collectColumn:W}=c,$=a==="right"?1:0,oe={status:!1};if(r&&n&&r!==n){const Q=n,M=r,fe={oldColumn:Q,newColumn:M,dragColumn:Q,dragPos:a,dragToChild:!!f,offsetIndex:$},De=R&&L?L(fe):f;return Promise.resolve(F?F(fe):!0).then(Fe=>{if(!Fe)return oe;let xe=-1,Ae=-1;const Pe={};s.eachTree([Q],je=>{Pe[je.id]=je});let Qe=!1;if(Q.parentId&&M.parentId)if(x&&!E){if(Q.parentId!==M.parentId)return oe}else{if(!E)return oe;if(Pe[M.id]&&(Qe=!0,!(E&&R)))return ue.modal&&ue.modal.message({status:"error",content:il("vxe.error.treeDragChild")}),oe}else if(Q.parentId){if(!E)return oe}else if(M.parentId){if(!E)return oe;if(Pe[M.id]&&(Qe=!0,!(E&&R)))return ue.modal&&ue.modal.message({status:"error",content:il("vxe.error.treeDragChild")}),oe}const Ge=s.findTree(W,je=>je.id===Q.id);if(Qe&&E&&R){if(Ge){const{items:je,index:We}=Ge,Et=Q.children||[];Et.forEach(Tt=>{Tt.parentId=Q.parentId}),je.splice(We,1,...Et),Q.children=[]}}else if(Ge){const{items:je,index:We,parent:Et}=Ge;je.splice(We,1),Et||(xe=We)}const at=s.findTree(W,je=>je.id===M.id);if(at){const{items:je,index:We,parent:Et}=at;E&&A&&De?(Q.parentId=M.id,M.children=(M.children||[]).concat([Q])):(Q.parentId=M.parentId,je.splice(We+$,0,Q)),Et||(Ae=We)}return s.eachTree(W,(je,We,Et,Tt,bt)=>{if(!bt){const Wt=We+1;je.renderSortNumber=Wt}}),p.isDragColMove=!0,h&&(d.clearSelected&&d.clearSelected(),d.clearCellAreas&&(d.clearCellAreas(),d.clearCopyCellArea())),t&&Bt("column-dragend",{oldColumn:Q,newColumn:M,dragColumn:Q,dragPos:a,dragToChild:De,offsetIndex:$,_index:{newIndex:Ae,oldIndex:xe}},t),o&&d.handleColDragSwapColumn(),{status:!0}}).catch(()=>oe)}return Promise.resolve(oe)},handleHeaderCellDragDragendEvent(t){const{dragCol:o}=p,{prevDragCol:n,prevDragPos:r,prevDragToChild:a}=c;d.handleColDragSwapEvent(t,!0,o,n,r,a),ln(),fr(),c.prevDragToChild=!1,p.dragRow=null,p.dragCol=null,setTimeout(()=>{p.isDragColMove=!1,d.recalculate().then(()=>{on()})},500)},handleHeaderCellDragDragoverEvent(t){const{dragCol:o}=p,n=Me.value,{isToChildDrag:r,isPeerDrag:a,isCrossDrag:f}=n;if(!o){t.preventDefault();return}const h=t.ctrlKey,m=t.currentTarget,x=m.getAttribute("colid"),E=d.getColumnById(x);if(E){t.preventDefault();const{clientX:R}=t,F=R-m.getBoundingClientRect().x<m.clientWidth/2?"left":"right";if(c.prevDragToChild=!!(f&&r&&h),c.prevDragCol=E,c.prevDragPos=F,E.fixed||o&&o.id===E.id||!f&&(a?o.parentId!==E.parentId:E.parentId)){pr(t,null,m,!1,F);return}pr(t,null,m,!0,F),Bt("column-dragover",{oldColumn:o,targetColumn:E,dragPos:F},t);const L=G.value;if(!L)return;const W=be.value,$=O.value,oe=$?$.$el:null,Q=W||oe;if(Q){const M=L.getBoundingClientRect(),fe=L.clientWidth,De=me.value,Fe=De?De.clientWidth:0,xe=Ee.value,Ae=xe?xe.clientWidth:0,Pe=M.x+Fe,Qe=M.x+fe-Ae,Ge=28,at=R-Pe,je=Qe-R;if(at>0&&at<=Ge){const We=Math.floor(fe/(at>Ge/2?240:120));Q.scrollLeft-=We*(Ge-at)}else if(je>0&&je<=Ge){const We=Math.floor(fe/(je>Ge/2?240:120));Q.scrollLeft+=We*(Ge-je)}}}},handleHeaderCellDragMousedownEvent(t,o){var n;t.stopPropagation();const r=Me.value,{trigger:a,dragStartMethod:f}=r,{column:h}=o,m=t.currentTarget,x=a==="cell"?m:(n=m.parentElement)===null||n===void 0?void 0:n.parentElement;if(p.isDragColMove=!1,fr(),f&&!f(o)){x.draggable=!1,p.dragRow=null,p.dragCol=null,ln();return}p.dragCol=h,p.dragRow=null,x.draggable=!0,qa(h),Xa(x),Bt("column-dragstart",o,t)},handleHeaderCellDragMouseupEvent(){fr(),ln(),p.dragRow=null,p.dragCol=null,p.isDragColMove=!1},handleScrollEvent(t,o,n,r,a,f){const{highlightHoverRow:h}=e,{lastScrollLeft:m,lastScrollTop:x}=c,E=be.value,R=P.value;if(!E||!R)return;const A=ee.value,F=T.value,L=V.value,W=R.clientHeight,$=E.clientWidth,oe=R.scrollHeight,Q=E.scrollWidth;let M=!1,fe=!1,De=!1,Fe=!1,xe="",Ae=!1,Pe=!1,Qe=!1,Ge=!1;if(n){const je=xt.value;De=a<=0,De||(Fe=a+$>=Q),a>m?(xe="right",a+$>=Q-je&&(Ge=!0)):(xe="left",a<=je&&(Qe=!0)),d.checkScrolling(),c.lastScrollLeft=a}if(o){const je=ke.value;M=r<=0,M||(fe=r+W>=oe),r>x?(xe="bottom",r+W>=oe-je&&(Pe=!0)):(xe="top",r<=je&&(Ae=!0)),c.lastScrollTop=r}p.isDragColMove=!1,p.isDragRowMove=!1,p.lastScrollTime=Date.now();const at=Object.assign({scrollTop:r,scrollLeft:a,bodyHeight:W,bodyWidth:$,scrollHeight:oe,scrollWidth:Q,isX:n,isY:o,isTop:M,isBottom:fe,isLeft:De,isRight:Fe,direction:xe},f);Pn(),Ta(n,o),(A.isHover||h)&&d.clearHoverRow(),F&&F.reactData.visible&&F.close(),L&&L.reactData.visible&&L.close(),(Pe||Ae||Ge||Qe)&&Bt("scroll-boundary",at,t),Bt("scroll",at,t)},triggerScrollXEvent(){ht.value.immediate?on():Ma()},triggerScrollYEvent(){gt.value.immediate?cr():Da()},triggerBodyScrollEvent(t,o){const{scrollYLoad:n,scrollXLoad:r}=p,{elemStore:a,intoRunScroll:f,lastScrollTop:h,lastScrollLeft:m,inWheelScroll:x,inVirtualScroll:E,inHeaderScroll:R,inBodyScroll:A,scrollRenderType:F,inFooterScroll:L}=c;if(x||E||R||L)return;const W=be.value,$=P.value,oe=Je(a["left-body-scroll"]),Q=Je(a["main-body-scroll"]),M=Je(a["right-body-scroll"]),fe=Je(a["main-header-scroll"]),De=Je(a["main-footer-scroll"]),Fe=Z.value;if(f||!Q||!W||!$||A&&F!==o)return;let xe=$.scrollTop,Ae=W.scrollLeft;oe&&o==="left"?xe=oe.scrollTop:M&&o==="right"?xe=M.scrollTop:(xe=Q.scrollTop,Ae=Q.scrollLeft);const Pe=Ae!==m,Qe=xe!==h;c.inBodyScroll=!0,c.scrollRenderType=o,Qe&&(o==="left"?(qt(Q,xe),qt(M,xe)):o==="right"?(qt(Q,xe),qt(oe,xe)):(qt(oe,xe),qt(M,xe)),qt($,xe),qt(Fe,xe),n&&d.triggerScrollYEvent(t)),Pe&&(Kt(W,Ae),Kt(fe,Ae),Kt(De,Ae),r&&d.triggerScrollXEvent(t)),d.handleScrollEvent(t,Qe,Pe,xe,Ae,{type:"body",fixed:o})},triggerHeaderScrollEvent(t,o){const{scrollXLoad:n}=p,{elemStore:r,intoRunScroll:a,inWheelScroll:f,inVirtualScroll:h,inBodyScroll:m,inFooterScroll:x}=c;if(f||h||m||x)return;const E=P.value,R=be.value,A=Je(r["main-body-scroll"]),F=Je(r["main-header-scroll"]),L=Je(r["main-footer-scroll"]);if(a||!F||!R||!E)return;const W=E.scrollTop,$=F.scrollLeft,oe=!0,Q=!1;c.inHeaderScroll=!0,Kt(R,$),Kt(L,$),Kt(A,$),n&&d.triggerScrollXEvent(t),d.handleScrollEvent(t,Q,oe,W,$,{type:"header",fixed:o})},triggerFooterScrollEvent(t,o){const{scrollXLoad:n}=p,{elemStore:r,intoRunScroll:a,inWheelScroll:f,inVirtualScroll:h,inHeaderScroll:m,inBodyScroll:x}=c;if(f||h||m||x)return;const E=P.value,R=be.value,A=Je(r["main-body-scroll"]),F=Je(r["main-header-scroll"]),L=Je(r["main-footer-scroll"]);if(a||!L||!R||!E)return;const W=E.scrollTop,$=L.scrollLeft,oe=!0,Q=!1;c.inFooterScroll=!0,Kt(R,$),Kt(F,$),Kt(A,$),n&&d.triggerScrollXEvent(t),d.handleScrollEvent(t,Q,oe,W,$,{type:"footer",fixed:o})},triggerBodyWheelEvent(t){const{target:o,deltaY:n,deltaX:r,shiftKey:a}=t;if(o&&/^textarea$/i.test(o.tagName))return;const{highlightHoverRow:f}=kr,{scrollXLoad:h,scrollYLoad:m}=p,x=xo.value,E=io.value;if(!(m||x||E))return;const{elemStore:R,lastScrollTop:A,lastScrollLeft:F}=c,L=ee.value,W=be.value,$=P.value,oe=Je(R["left-body-scroll"]),Q=Je(R["main-header-scroll"]),M=Je(R["main-body-scroll"]),fe=Je(R["main-footer-scroll"]),De=Je(R["right-body-scroll"]),Fe=Z.value;if(!W||!$||!M)return;const xe=Fa(p.lastScrollTime),Ae=Math.ceil((a?r:n)*xe),Pe=Math.ceil((a?n:r)*xe),Qe=Ae<0,Ge=M.scrollTop;if(Qe?Ge<=0:Ge>=M.scrollHeight-M.clientHeight)return;const at=Ge+Ae,je=M.scrollLeft+Pe,We=je!==F,Et=at!==A;(L.isHover||f)&&d.clearHoverRow(),We&&(t.preventDefault(),c.inWheelScroll=!0,Ia(je,Tt=>{const bt=Tt;Kt(W,bt),Kt(M,bt),Kt(Q,bt),Kt(fe,bt),h&&d.triggerScrollXEvent(t),d.handleScrollEvent(t,Et,We,M.scrollTop,bt,{type:"table",fixed:""})})),Et&&(t.preventDefault(),ka(at-Ge,Tt=>{const bt=M.scrollTop+Tt;c.inWheelScroll=!0,qt($,bt),qt(M,bt),qt(oe,bt),qt(De,bt),qt(Fe,bt),m&&d.triggerScrollYEvent(t),d.handleScrollEvent(t,Et,We,bt,M.scrollLeft,{type:"table",fixed:""})}))},triggerVirtualScrollXEvent(t){const{scrollXLoad:o}=p,{elemStore:n,inWheelScroll:r,lastScrollTop:a,inHeaderScroll:f,inBodyScroll:h,inFooterScroll:m}=c;if(f||h||m||r)return;const x=Je(n["main-header-scroll"]),E=Je(n["main-body-scroll"]),R=Je(n["main-footer-scroll"]),A=P.value,F=t.currentTarget,{scrollLeft:L}=F,W=A||E;let $=0;W&&($=W.scrollTop);const oe=!0,Q=$!==a;c.inVirtualScroll=!0,Kt(E,L),Kt(x,L),Kt(R,L),o&&d.triggerScrollXEvent(t),d.handleScrollEvent(t,Q,oe,$,L,{type:"table",fixed:""})},triggerVirtualScrollYEvent(t){const{scrollYLoad:o}=p,{elemStore:n,inWheelScroll:r,lastScrollLeft:a,inHeaderScroll:f,inBodyScroll:h,inFooterScroll:m}=c;if(f||h||m||r)return;const x=Je(n["left-body-scroll"]),E=Je(n["main-body-scroll"]),R=Je(n["right-body-scroll"]),A=Z.value,F=be.value,L=t.currentTarget,{scrollTop:W}=L,$=F||E;let oe=0;$&&(oe=$.scrollLeft);const Q=oe!==a,M=!0;c.inVirtualScroll=!0,qt(E,W),qt(x,W),qt(R,W),qt(A,W),o&&d.triggerScrollYEvent(t),d.handleScrollEvent(t,M,Q,W,oe,{type:"table",fixed:""})},scrollToTreeRow(t){const{treeConfig:o}=e,{tableFullData:n}=c,r=[];if(o){const a=dt.value,f=a.children||a.childrenField,h=s.findTree(n,m=>d.eqRow(m,t),{children:f});if(h){const m=h.nodes;m.forEach((x,E)=>{E<m.length-1&&!v.isTreeExpandByRow(x)&&r.push(v.setTreeExpand(x,!0))})}}return Promise.all(r).then(()=>si(d,t))},updateScrollYStatus:ar,updateScrollXSpace(){const{isGroup:t,scrollXLoad:o,overflowX:n}=p,{visibleColumn:r,scrollXStore:a,elemStore:f,tableWidth:h}=c,m=C.value,x=O.value,E=S.value,R=x?x.$el:null;if(R){const A=m?m.$el:null,F=E?E.$el:null,L=A?A.querySelector(".vxe-table--header"):null,W=R.querySelector(".vxe-table--body"),$=F?F.querySelector(".vxe-table--footer"):null,oe=r.slice(0,a.startIndex).reduce((De,Fe)=>De+Fe.renderWidth,0);let Q="";o&&n&&(Q=`${oe}px`),L&&(L.style.marginLeft=t?"":Q),W.style.marginLeft=Q,$&&($.style.marginLeft=Q),["main"].forEach(De=>{["header","body","footer"].forEach(xe=>{const Ae=Je(f[`${De}-${xe}-xSpace`]);Ae&&(Ae.style.width=o?`${h}px`:"")})});const fe=Se.value;fe&&(fe.style.width=`${h}px`),pe(()=>{bo()})}},updateScrollYSpace(){const{isAllOverflow:t,scrollYLoad:o,expandColumn:n,rowExpandedMaps:r}=p,{scrollYStore:a,elemStore:f,isResizeCellHeight:h,afterFullData:m,fullAllDataRowIdData:x}=c,{startIndex:E}=a,R=Dt.value,A=ee.value,F=lt.value,L=he.value,W=Je(f["main-body-table"]),$=["main","left","right"];let oe=0,Q=0;if(o)if(!(h||F.height||A.height)&&!n&&t)Q=m.length*L,oe=Math.max(0,E*L);else{for(let Fe=0;Fe<m.length;Fe++){const xe=m[Fe],Ae=Ce(d,xe),Pe=x[Ae]||{};Q+=Pe.resizeHeight||F.height||A.height||Pe.height||L,n&&r[Ae]&&(Q+=Pe.expandHeight||R.height||0)}for(let Fe=0;Fe<E;Fe++){const xe=m[Fe],Ae=Ce(d,xe),Pe=x[Ae]||{};oe+=Pe.resizeHeight||F.height||A.height||Pe.height||L,n&&r[Ae]&&(oe+=Pe.expandHeight||R.height||0)}}else W&&(Q=W.clientHeight);$.forEach(De=>{const Fe=["header","body","footer"],xe=Je(f[`${De}-body-table`]);xe&&(xe.style.marginTop=oe?`${oe}px`:""),Fe.forEach(Ae=>{const Pe=Je(f[`${De}-${Ae}-ySpace`]);Pe&&(Pe.style.height=Q?`${Q}px`:"")})});const M=ye.value;M&&(M.style.height=Q?`${Q}px`:"");const fe=U.value;return fe&&(fe.style.height=Q?`${Q}px`:""),pe().then(()=>{bo()})},updateScrollXData(){const{isAllOverflow:t}=p;return Yr(),d.updateScrollYSpace(),pe().then(()=>{Yr(),d.updateScrollXSpace(),t||d.updateScrollYSpace()})},updateScrollYData(){return d.handleTableData(),d.updateScrollYSpace(),pe().then(()=>{d.handleTableData(),d.updateScrollYSpace()})},checkScrolling(){const{elemStore:t}=c,o=Je(t["main-body-scroll"]),n=me.value,r=Ee.value,f=be.value||o;f&&(n&&(f.scrollLeft>0?Zo(n,"scrolling--middle"):Po(n,"scrolling--middle")),r&&(f.clientWidth<f.scrollWidth-Math.ceil(f.scrollLeft)?Zo(r,"scrolling--middle"):Po(r,"scrolling--middle")))},updateZindex(){e.zIndex?c.tZindex=e.zIndex:c.tZindex<ji()&&(c.tZindex=zi())},handleCheckedCheckboxRow:zl,triggerHoverEvent(t,{row:o}){N.setHoverRow(o)},setHoverRow(t){const o=Ce(d,t),n=G.value;N.clearHoverRow(),n&&s.arrayEach(n.querySelectorAll(`.vxe-body--row[rowid="${o}"]`),r=>Zo(r,"row--hover")),c.hoverRow=t},clearHoverRow(){const t=G.value;t&&s.arrayEach(t.querySelectorAll(".vxe-body--row.row--hover"),o=>Po(o,"row--hover")),c.hoverRow=null},getCell(t,o){return v.getCellElement(t,o)},findRowIndexOf(t,o){return o?s.findIndexOf(t,n=>d.eqRow(n,o)):-1},eqRow(t,o){return t&&o?t===o?!0:Ce(d,t)===Ce(d,o):!1}},"openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach(t=>{d[t]=function(){Ye("vxe.error.reqModule",["VxeTableExportModule"])}}),"clearValidate,fullValidate,validate".split(",").forEach(t=>{d[t]=function(){Ye("vxe.error.reqModule",["VxeTableValidatorModule"])}}),Object.assign(d,v,N);const qs=t=>{const{showHeader:o,showFooter:n}=e,{tableData:r,tableColumn:a,tableGroupColumn:f,columnStore:h,footerTableData:m}=p,x=t==="left",E=x?h.leftList:h.rightList;return g("div",{ref:x?me:Ee,class:`vxe-table--fixed-${t}-wrapper`},[o?g(hi,{ref:x?q:X,fixedType:t,tableData:r,tableColumn:a,tableGroupColumn:f,fixedColumn:E}):Ro(d),g(fi,{ref:x?Y:ie,fixedType:t,tableData:r,tableColumn:a,fixedColumn:E}),n?g(bi,{ref:x?ne:Re,footerTableData:m,tableColumn:a,fixedColumn:E,fixedType:t}):Ro(d)])},Ka=()=>{const t=Fo.value,o={$table:d};if(i.empty)return i.empty(o);{const n=t.name?vi.get(t.name):null,r=n?n.renderTableEmpty||n.renderTableEmptyView||n.renderEmpty:null;if(r)return So(r(t,o))}return hl(e.emptyText)||il("vxe.table.emptyText")},Ya=()=>{const{dragConfig:t}=e,{dragRow:o,dragCol:n,dragTipText:r}=p,a=Me.value,m=(ce.value.slots||{}).tip||(t&&t.slots?t.slots.rowTip:null),E=(a.slots||{}).tip;return o&&m?$n(m,{row:o}):n&&E?$n(E,{column:n}):[g("span",r)]},Ua=()=>{const{dragRow:t,dragCol:o}=p,n=ee.value,r=_e.value,a=ce.value,f=Me.value;return n.drag||r.drag?g("div",{class:"vxe-table--drag-wrapper"},[g("div",{ref:k,class:["vxe-table--drag-row-line",{"is--guides":a.showGuidesStatus}]}),g("div",{ref:z,class:["vxe-table--drag-col-line",{"is--guides":f.showGuidesStatus}]}),t&&a.showDragTip||o&&f.showDragTip?g("div",{ref:tt,class:"vxe-table--drag-sort-tip"},[g("div",{class:"vxe-table--drag-sort-tip-wrapper"},[g("div",{class:"vxe-table--drag-sort-tip-status"},[g("span",{class:["vxe-table--drag-sort-tip-normal-status",t?Cr().TABLE_DRAG_STATUS_ROW:Cr().TABLE_DRAG_STATUS_COLUMN]}),g("span",{class:["vxe-table--drag-sort-tip-sub-status",Cr().TABLE_DRAG_STATUS_SUB_ROW]}),g("span",{class:["vxe-table--drag-sort-tip-disabled-status",Cr().TABLE_DRAG_DISABLED]})]),g("div",{class:"vxe-table--drag-sort-tip-content"},Ya())])]):Ro(d)]):Ro(d)},Ga=()=>{const{treeConfig:t}=e,{expandColumn:o}=p,n=yl.value,r=Dt.value,{mode:a}=r;if(a!=="fixed")return Ro(d);const f=[g("div",{key:"repY",ref:U})];return o&&n.forEach(h=>{const m=Dt.value,{height:x,padding:E}=m,{fullAllDataRowIdData:R}=c,A=dt.value,{transform:F,seqMode:L}=A,W={},$=Ce(d,h),oe=R[$];let Q=0,M=-1,fe=0;const De=d.getRowIndex(h),Fe=d.getVMRowIndex(h);oe&&(Q=oe.level,t&&F&&L==="increasing"?M=oe._index+1:M=oe.seq,fe=oe._index),x&&(W.height=`${x}px`),t&&(W.paddingLeft=`${Q*A.indent+30}px`);const xe={$table:d,seq:M,column:o,fixed:"",type:"body",level:Q,row:h,rowIndex:De,$rowIndex:Fe,_rowIndex:fe};f.push(g("div",{key:$,class:["vxe-body--row-expanded-cell",{"is--padding":E,"is--ellipsis":x}],rowid:$,style:W},o.renderData(xe)))}),g("div",{ref:Z,class:"vxe-table--row-expanded-wrapper"},f)},Xs=()=>g("div",{key:"vsx",ref:re,class:"vxe-table--scroll-x-virtual"},[g("div",{ref:de,class:"vxe-table--scroll-x-left-corner"}),g("div",{ref:ve,class:"vxe-table--scroll-x-wrapper"},[g("div",{ref:be,class:"vxe-table--scroll-x-handle",onScroll:d.triggerVirtualScrollXEvent},[g("div",{ref:Se,class:"vxe-table--scroll-x-space"})])]),g("div",{ref:we,class:"vxe-table--scroll-x-right-corner"})]),Ks=()=>g("div",{ref:ge,class:"vxe-table--scroll-y-virtual"},[g("div",{ref:ae,class:"vxe-table--scroll-y-top-corner"}),g("div",{ref:se,class:"vxe-table--scroll-y-wrapper"},[g("div",{ref:P,class:"vxe-table--scroll-y-handle",onScroll:d.triggerVirtualScrollYEvent},[g("div",{ref:ye,class:"vxe-table--scroll-y-space"})])]),g("div",{ref:J,class:"vxe-table--scroll-y-bottom-corner"})]),Ys=()=>{const{showHeader:t,showFooter:o}=e,{overflowX:n,tableData:r,tableColumn:a,tableGroupColumn:f,footerTableData:h,columnStore:m}=p,{leftList:x,rightList:E}=m;return g("div",{ref:le,class:"vxe-table--viewport-wrapper"},[g("div",{class:"vxe-table--main-wrapper"},[t?g(hi,{ref:C,tableData:r,tableColumn:a,tableGroupColumn:f}):Ro(d),g(fi,{ref:O,tableData:r,tableColumn:a}),o?g(bi,{ref:S,footerTableData:h,tableColumn:a}):Ro(d)]),g("div",{class:"vxe-table--fixed-wrapper"},[x&&x.length&&n?qs("left"):Ro(d),E&&E.length&&n?qs("right"):Ro(d)]),Ga()])},Us=()=>{const t=Le.value;return g("div",{class:"vxe-table--layout-wrapper"},t?[Ks(),Ys()]:[Ys(),Ks()])},Za=()=>{const{loading:t,stripe:o,showHeader:n,height:r,treeConfig:a,mouseConfig:f,showFooter:h,highlightCell:m,highlightHoverRow:x,highlightHoverColumn:E,editConfig:R,editRules:A}=e,{isGroup:F,overflowX:L,overflowY:W,scrollXLoad:$,scrollYLoad:oe,tableData:Q,initStore:M,columnStore:fe,filterStore:De,customStore:Fe}=p,{leftList:xe,rightList:Ae}=fe,Pe=i.loading,Qe=Lt.value,Ge=mt.value,at=Ze.value,je=ze.value,We=dt.value,Et=ee.value,Tt=_e.value,bt=B.value,Wt=Sn.value,Xt=Ht.value,Ft=mo.value,Jt=Ut.value,to=so.value,oo=p.isColLoading||p.isRowLoading||t,Vt=Xe.value,co=f&&Xt.area,wo=Me.value,zt=Ne.value,jt=Le.value;return g("div",{ref:G,class:["vxe-table","vxe-table--render-default",`tid_${w}`,`border--${Wt}`,`sx-pos--${zt?"top":"bottom"}`,`sy-pos--${jt?"left":"right"}`,{[`size--${bt}`]:bt,[`valid-msg--${at.msgMode}`]:!!A,"vxe-editable":!!R,"old-cell-valid":A&&vt().cellVaildMode==="obsolete","cell--highlight":m,"cell--selected":f&&Xt.selected,"cell--area":co,"header-cell--area":co&&Ft.selectCellByHeader,"body-cell--area":co&&Ft.selectCellByBody,"row--highlight":Et.isHover||x,"column--highlight":Tt.isHover||E,"checkbox--range":je.range,"col--drag-cell":Tt.drag&&wo.trigger==="cell","is--header":n,"is--footer":h,"is--group":F,"is--tree-line":a&&(We.showLine||We.line),"is--fixed-left":xe.length,"is--fixed-right":Ae.length,"is--animat":!!e.animat,"is--round":e.round,"is--stripe":!a&&o,"is--loading":oo,"is--empty":!oo&&!Q.length,"is--scroll-y":W,"is--scroll-x":L,"is--virtual-x":$,"is--virtual-y":oe}],spellcheck:!1,onKeydown:Ba},[g("div",{class:"vxe-table-slots"},i.default?i.default({}):[]),g("div",{ref:K,class:"vxe-table-vars"},[g("div",{class:"vxe-table-var-default"}),g("div",{class:"vxe-table-var-medium"}),g("div",{class:"vxe-table-var-small"}),g("div",{class:"vxe-table-var-mini"})]),g("div",{key:"tw",class:"vxe-table--render-wrapper"},zt?[Xs(),Us()]:[Us(),Xs()]),g("div",{key:"tn",ref:Te,class:"vxe-table--empty-placeholder"},[g("div",{class:"vxe-table--empty-content"},Ka())]),g("div",{key:"tl",class:"vxe-table--border-line"}),g("div",{key:"tcl",ref:Ve,class:"vxe-table--resizable-col-bar"},Vt.showDragTip?[g("div",{class:"vxe-table--resizable-number-tip"})]:[]),g("div",{key:"trl",ref:Oe,class:"vxe-table--resizable-row-bar"},Vt.showDragTip?[g("div",{class:"vxe-table--resizable-number-tip"})]:[]),b?g(b,{key:"lg",class:"vxe-table--loading",modelValue:oo,icon:Jt.icon,text:Jt.text},Pe?{default:()=>$n(Pe,{$table:d,$grid:He,loading:oo})}:{}):Pe?g("div",{class:["vxe-loading--custom-wrapper",{"is--visible":oo}]},$n(Pe,{$table:d,$grid:He,loading:oo})):Ro(d),M.custom?g(nd,{key:"cs",ref:te,customStore:Fe}):Ro(d),M.filter?g(rd,{key:"tf",ref:j,filterStore:De}):Ro(d),M.import&&e.importConfig?g(id,{key:"it",defaultOptions:p.importParams,storeData:p.importStore}):Ro(d),M.export&&(e.exportConfig||e.printConfig)?g(ad,{key:"et",defaultOptions:p.exportParams,storeData:p.exportStore}):Ro(d),to?g(dd,{key:"tm",ref:I}):Ro(d),Ua(),y?g("div",{},[g(y,{key:"ctp",ref:_,isArrow:!1,enterable:!1}),g(y,{key:"btp",ref:V,theme:Qe.theme,enterable:Qe.enterable,enterDelay:Qe.enterDelay,leaveDelay:Qe.leaveDelay}),e.editRules&&at.showMessage&&(at.message==="default"?!r:at.message==="tooltip")?g(y,{key:"vtp",ref:T,class:[{"old-cell-valid":A&&vt().cellVaildMode==="obsolete"},"vxe-table--valid-error"],theme:Ge.theme,enterable:Ge.enterable,enterDelay:Ge.enterDelay,leaveDelay:Ge.leaveDelay}):Ro(d)]):Ro(d)])},es=$e(0);yt(()=>e.data?e.data.length:-1,()=>{es.value++}),yt(()=>e.data,()=>{es.value++}),yt(es,()=>{const{initStatus:t}=c,o=e.data||[];o&&o.length>=5e4&&Rt("vxe.error.errLargeData",["loadData(data), reloadData(data)"]),rr(o,!1).then(()=>{const{scrollXLoad:n,scrollYLoad:r,expandColumn:a}=p,f=Dt.value;return c.inited=!0,c.initStatus=!0,t||sr(),(n||r)&&a&&f.mode!=="fixed"&&Rt("vxe.error.scrollErrProp",["column.type=expand"]),v.recalculate()})});const ts=$e(0);yt(()=>p.staticColumns.length,()=>{ts.value++}),yt(()=>p.staticColumns,()=>{ts.value++}),yt(ts,()=>{Bs(s.clone(p.staticColumns))});const os=$e(0);yt(()=>p.tableColumn.length,()=>{os.value++}),yt(()=>p.tableColumn,()=>{os.value++}),yt(os,()=>{N.analyColumnWidth()}),yt(()=>p.upDataFlag,()=>{pe(()=>{v.updateData()})}),yt(()=>p.reColumnFlag,()=>{pe(()=>{v.refreshColumn()})});const nn=$e(0);yt(B,()=>{nn.value++}),yt(()=>e.showHeader,()=>{nn.value++}),yt(()=>e.showFooter,()=>{nn.value++}),yt(()=>p.overflowX,()=>{nn.value++}),yt(()=>p.overflowY,()=>{nn.value++}),yt(nn,()=>{pe(()=>{v.recalculate(!0).then(()=>v.refreshScroll())})});const Bn=$e(0);yt(()=>e.height,()=>{Bn.value++}),yt(()=>e.maxHeight,()=>{Bn.value++}),yt(Ne,()=>{Bn.value++}),yt(Le,()=>{Bn.value++}),yt(Bn,()=>{pe(()=>v.recalculate(!0))});const ls=$e(0);yt(()=>e.footerData?e.footerData.length:-1,()=>{ls.value++}),yt(()=>e.footerData,()=>{ls.value++}),yt(ls,()=>{v.updateFooter()}),yt(()=>e.syncResize,t=>{t&&(Zr(),pe(()=>{Zr(),setTimeout(()=>Zr())}))});const ns=$e(0);yt(()=>e.mergeCells?e.mergeCells.length:-1,()=>{ns.value++}),yt(()=>e.mergeCells,()=>{ns.value++}),yt(ns,()=>{v.clearMergeCells(),pe(()=>{e.mergeCells&&v.setMergeCells(e.mergeCells)})});const rs=$e(0);yt(()=>e.mergeFooterItems?e.mergeFooterItems.length:-1,()=>{rs.value++}),yt(()=>e.mergeFooterItems,()=>{rs.value++}),yt(rs,()=>{v.clearMergeFooterItems(),pe(()=>{e.mergeFooterItems&&v.setMergeFooterItems(e.mergeFooterItems)})}),D&&yt(()=>D?D.reactData.resizeFlag:null,()=>{_s()}),pd.forEach(t=>{const{setupTable:o}=t;if(o){const n=o(d);n&&s.isObject(n)&&Object.assign(d,n)}}),N.preventEvent(null,"created",{$table:d});let Vn;return nc(()=>{v.recalculate().then(()=>v.refreshScroll()),N.preventEvent(null,"activated",{$table:d})}),rc(()=>{c.isActivated=!1,N.preventEvent(null,"deactivated",{$table:d})}),Ul(()=>{const t=_e.value,o=ee.value,n=po.value;(t.drag||o.drag||n.allowSort)&&Yi(),pe(()=>{const{data:a,exportConfig:f,importConfig:h,treeConfig:m,showOverflow:x}=e,{scrollXStore:E,scrollYStore:R}=c,A=gt.value,F=Ct.value,L=dt.value,W=nt.value,$=ze.value,oe=Dt.value,Q=ee.value,M=po.value,fe=Ht.value,De=ao.value,Fe=Co.value;if(e.rowId&&Rt("vxe.error.delProp",["row-id","row-config.keyField"]),e.rowKey&&Rt("vxe.error.delProp",["row-key","row-config.useKey"]),e.columnKey&&Rt("vxe.error.delProp",["column-id","column-config.useKey"]),!(e.rowId||Q.keyField)&&($.reserve||$.checkRowKeys||W.reserve||W.checkRowKey||oe.expandRowKeys||L.expandRowKeys)&&Rt("vxe.error.reqProp",["row-config.keyField"]),e.editConfig&&(F.showStatus||F.showUpdateStatus||F.showInsertStatus)&&!e.keepSource&&Rt("vxe.error.reqProp",["keep-source"]),m&&(L.showLine||L.line)&&(!(e.rowKey||Q.useKey)||!x)&&Rt("vxe.error.reqProp",["row-config.useKey | show-overflow"]),m&&!L.transform&&e.stripe&&Rt("vxe.error.noTree",["stripe"]),e.showFooter&&!(e.footerMethod||e.footerData)&&Rt("vxe.error.reqProp",["footer-data | footer-method"]),Q.height&&Rt("vxe.error.delProp",["row-config.height","cell-config.height"]),e.highlightCurrentRow&&Rt("vxe.error.delProp",["highlight-current-row","row-config.isCurrent"]),e.highlightHoverRow&&Rt("vxe.error.delProp",["highlight-hover-row","row-config.isHover"]),e.highlightCurrentColumn&&Rt("vxe.error.delProp",["highlight-current-column","column-config.isCurrent"]),e.highlightHoverColumn&&Rt("vxe.error.delProp",["highlight-hover-column","column-config.isHover"]),h&&Fe.types&&!Fe.importMethod&&!s.includeArrays(s.keys(Fe._typeMaps),Fe.types)&&Rt("vxe.error.errProp",[`export-config.types=${Fe.types.join(",")}`,Fe.types.filter(xe=>s.includes(s.keys(Fe._typeMaps),xe)).join(",")||s.keys(Fe._typeMaps).join(",")]),f&&De.types&&!De.exportMethod&&!s.includeArrays(s.keys(De._typeMaps),De.types)&&Rt("vxe.error.errProp",[`export-config.types=${De.types.join(",")}`,De.types.filter(xe=>s.includes(s.keys(De._typeMaps),xe)).join(",")||s.keys(De._typeMaps).join(",")]),e.id||(e.customConfig?ft(M):M.enabled)&&M.storage&&Ye("vxe.error.reqProp",["id"]),e.treeConfig&&$.range&&Ye("vxe.error.noTree",["checkbox-config.range"]),Q.height&&!e.showOverflow&&Rt("vxe.error.notProp",["table.show-overflow"]),!d.handleMousedownCellAreaEvent&&(e.areaConfig&&Rt("vxe.error.notProp",["area-config"]),e.clipConfig&&Rt("vxe.error.notProp",["clip-config"]),e.fnrConfig&&Rt("vxe.error.notProp",["fnr-config"]),fe.area)){Ye("vxe.error.notProp",["mouse-config.area"]);return}if(m&&Q.drag&&!L.transform&&Rt("vxe.error.notSupportProp",["column-config.drag","tree-config.transform=false","tree-config.transform=true"]),e.dragConfig&&Rt("vxe.error.delProp",["drag-config","row-drag-config"]),e.treeConfig&&L.children&&Rt("vxe.error.delProp",["tree-config.children","tree-config.childrenField"]),e.treeConfig&&L.line&&Rt("vxe.error.delProp",["tree-config.line","tree-config.showLine"]),fe.area&&fe.selected&&Rt("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),fe.area&&e.treeConfig&&!L.transform&&Ye("vxe.error.noTree",["mouse-config.area"]),e.editConfig&&F.activeMethod&&Rt("vxe.error.delProp",["edit-config.activeMethod","edit-config.beforeEditMethod"]),e.treeConfig&&$.isShiftKey&&Ye("vxe.error.errConflicts",["tree-config","checkbox-config.isShiftKey"]),$.halfField&&Rt("vxe.error.delProp",["checkbox-config.halfField","checkbox-config.indeterminateField"]),e.editConfig&&!d.insert&&Ye("vxe.error.reqModule",["Edit"]),e.editRules&&!d.validate&&Ye("vxe.error.reqModule",["Validator"]),($.range||e.keyboardConfig||e.mouseConfig)&&!d.handleCellMousedownEvent&&Ye("vxe.error.reqModule",["Keyboard"]),(e.printConfig||e.importConfig||e.exportConfig)&&!d.exportData&&Ye("vxe.error.reqModule",["Export"]),Object.assign(R,{startIndex:0,endIndex:0,visibleSize:0,adaptive:A.adaptive!==!1}),Object.assign(E,{startIndex:0,endIndex:0,visibleSize:0}),rr(a||[],!0).then(()=>{a&&a.length&&(c.inited=!0,c.initStatus=!0,sr()),Ra(),bo()}),e.autoResize){const xe=G.value,Ae=N.getParentElem();Vn=fd.create(()=>{e.autoResize&&v.recalculate(!0)}),xe&&Vn.observe(xe),Ae&&Vn.observe(Ae)}});const r=le.value;r&&r.addEventListener("wheel",d.triggerBodyWheelEvent,{passive:!1}),_t.on(d,"paste",za),_t.on(d,"copy",ja),_t.on(d,"cut",Na),_t.on(d,"mousedown",Ha),_t.on(d,"blur",Pa),_t.on(d,"mousewheel",$a),_t.on(d,"keydown",Va),_t.on(d,"resize",_s),_t.on(d,"contextmenu",d.handleGlobalContextmenuEvent),N.preventEvent(null,"mounted",{$table:d})}),sc(()=>{const t=le.value;t&&t.removeEventListener("wheel",d.triggerBodyWheelEvent),Vn&&Vn.disconnect(),v.closeFilter(),d.closeMenu&&d.closeMenu(),N.preventEvent(null,"beforeUnmount",{$table:d})}),Gl(()=>{_t.off(d,"paste"),_t.off(d,"copy"),_t.off(d,"cut"),_t.off(d,"mousedown"),_t.off(d,"blur"),_t.off(d,"mousewheel"),_t.off(d,"keydown"),_t.off(d,"resize"),_t.off(d,"contextmenu"),N.preventEvent(null,"unmounted",{$table:d})}),pe(()=>{e.loading&&!b&&!i.loading&&Ye("vxe.error.reqComp",["vxe-loading"]),(e.showOverflow===!0||e.showOverflow==="tooltip"||e.showHeaderOverflow===!0||e.showHeaderOverflow==="tooltip"||e.showFooterOverflow===!0||e.showFooterOverflow==="tooltip"||e.tooltipConfig||e.editRules)&&(y||Ye("vxe.error.reqComp",["vxe-tooltip"]))}),Yl("$xeColgroup",null),Yl("$xeTable",d),d.renderVN=Za,d},render(){return this.renderVN()}});function gd(e){const l=Be(()=>{const{renderParams:b}=e;return b.column}),i=Be(()=>{const{renderParams:b}=e;return b.row}),u=Be(()=>{const{renderOpts:b}=e;return b.props||{}}),w=Be({get(){const{renderParams:b}=e,{row:y,column:D}=b;return s.get(y,D.field)},set(b){const{renderParams:y}=e,{row:D,column:B}=y;return s.set(D,B.field,b)}});return{currColumn:l,currRow:i,cellModel:w,cellOptions:u}}const{renderer:yi,hooks:md}=ue,bd=["openFilter","setFilter","clearFilter","saveFilterPanel","resetFilterPanel","getCheckedFilters","updateFilterOptionStatus"];md.add("tableFilterModule",{setupTable(e){const{props:l,reactData:i,internalData:u}=e,{refElem:w,refTableFilter:b}=e.getRefMaps(),{computeFilterOpts:y,computeMouseOpts:D}=e.getComputeMaps(),B=K=>{const{filterStore:V}=i;V.options.forEach(_=>{_.checked=_._checked}),e.confirmFilterEvent(K)},p=(K,V,_)=>{const{filterStore:T}=i;T.options.forEach(I=>{I._checked=!1}),_._checked=V,e.checkFilterOptions(),B(K)},c=(K,V,_)=>{_._checked=V,e.checkFilterOptions()},v=K=>{const{filterStore:V}=i;e.handleClearFilter(V.column),e.confirmFilterEvent(K)},N={checkFilterOptions(){const{filterStore:K}=i;K.isAllSelected=K.options.every(V=>V._checked),K.isIndeterminate=!K.isAllSelected&&K.options.some(V=>V._checked)},triggerFilterEvent(K,V,_){const{initStore:T,filterStore:I}=i,{elemStore:j}=u;if(I.column===V&&I.visible)I.visible=!1;else{const{clientY:te,pageX:le}=K,C=w.value,O=C.getBoundingClientRect(),S=K.target,{visibleWidth:q}=$r(),{filters:Y,filterMultiple:ne,filterRender:X}=V,ie=ft(X)?yi.get(X.name):null,Re=V.filterRecoverMethod||(ie?ie.tableFilterRecoverMethod||ie.filterRecoverMethod:null);u._currFilterParams=_,Object.assign(I,{multiple:ne,options:Y,column:V,style:null}),I.options.forEach(me=>{const{_checked:Ee,checked:Ve}=me;me._checked=Ve,!Ve&&Ee!==Ve&&Re&&Re({option:me,column:V,$table:e})}),this.checkFilterOptions(),I.visible=!0,T.filter=!0,pe(()=>{const me=Je(j["main-header-scroll"]);if(!me)return;const Ee=b.value,Ve=Ee?Ee.$el:null;if(!Ve)return;const Oe=Ve.offsetWidth,Te=Ve.querySelector(".vxe-table--filter-header"),tt=Ve.querySelector(".vxe-table--filter-footer"),k=Oe/2,z=10,Z=C.clientWidth-Oe-z;let U,re;const ge=S.offsetParent,be=ge.offsetParent,de={top:`${S.offsetTop+ge.offsetTop+S.offsetHeight}px`},we=Math.max(40,C.clientHeight-(te-O.y)-(Te?Te.clientHeight:0)-(tt?tt.clientHeight:0)-14);if(V.fixed==="left"?U=S.offsetLeft+ge.offsetLeft-k:V.fixed==="right"?re=ge.offsetWidth-S.offsetLeft+(be.offsetWidth-be.offsetLeft)-V.renderWidth-k:U=S.offsetLeft+ge.offsetLeft-k-me.scrollLeft,U){const P=le+Oe-k+z-q;P>0&&(U-=P),de.left=`${Math.min(Z,Math.max(z,U))}px`}else if(re){const P=le+Oe-k+z-q;P>0&&(re+=P),de.right=`${Math.max(z,re)}px`}I.style=de,I.maxHeight=we})}e.dispatchEvent("filter-visible",{column:V,field:V.field,property:V.field,filterList:e.getCheckedFilters(),visible:I.visible},K)},handleClearFilter(K){if(K){const{filters:V,filterRender:_}=K;if(V){const T=ft(_)?yi.get(_.name):null,I=K.filterResetMethod||(T?T.tableFilterResetMethod||T.filterResetMethod:null);V.forEach(j=>{j._checked=!1,j.checked=!1,I||(j.data=s.clone(j.resetValue,!0))}),I&&I({options:V,column:K,$table:e})}}},handleColumnConfirmFilter(K,V){const{mouseConfig:_}=l,{scrollXLoad:T,scrollYLoad:I}=i,j=y.value,te=D.value,{field:le}=K,C=[],O=[];K.filters.forEach(Y=>{Y.checked&&(C.push(Y.value),O.push(Y.data))});const S=e.getCheckedFilters(),q={$table:e,$event:V,column:K,field:le,property:le,values:C,datas:O,filters:S,filterList:S};return j.remote||(e.handleTableData(!0),e.checkSelectionStatus()),_&&te.area&&e.handleFilterEvent&&e.handleFilterEvent(V,q),V&&e.dispatchEvent("filter-change",q,V),e.closeFilter(),e.updateFooter().then(()=>{const{scrollXLoad:Y,scrollYLoad:ne}=i;if(T||Y||I||ne)return(T||Y)&&e.updateScrollXSpace(),(I||ne)&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>{setTimeout(()=>e.recalculate(),50)})},confirmFilterEvent(K){const{filterStore:V}=i,{column:_}=V;e.handleColumnConfirmFilter(_,K)},handleFilterChangeRadioOption:p,handleFilterChangeMultipleOption:c,handleFilterChangeOption(K,V,_){const{filterStore:T}=i;T.multiple?c(K,V,_):p(K,V,_)},handleFilterConfirmFilter:B,handleFilterResetFilter:v};return Object.assign(Object.assign({},{openFilter(K){const V=lo(e,K);if(V&&V.filters){const{elemStore:_}=u,{fixed:T}=V;return e.scrollToColumn(V).then(()=>{const I=Je(_[`${T||"main"}-header-wrapper`]||_["main-header-wrapper"]);if(I){const j=I.querySelector(`.vxe-header--column.${V.id} .vxe-filter--btn`);Pc(j,"click")}})}return pe()},setFilter(K,V,_){const T=lo(e,K);return T&&T.filters&&(T.filters=Qi(V||[]),_)?e.handleColumnConfirmFilter(T,new Event("click")):pe()},clearFilter(K){const{filterStore:V}=i,{tableFullColumn:_}=u,T=y.value;let I;return K?(I=lo(e,K),I&&N.handleClearFilter(I)):_.forEach(N.handleClearFilter),(!K||I!==V.column)&&Object.assign(V,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),T.remote?pe():e.updateData()},saveFilterPanel(){return B(null),pe()},resetFilterPanel(){return v(null),pe()},getCheckedFilters(){const{tableFullColumn:K}=u,V=[];return K.forEach(_=>{const{field:T,filters:I}=_,j=[],te=[];I&&I.length&&(I.forEach(le=>{le.checked&&(j.push(le.value),te.push(le.data))}),j.length&&V.push({column:_,field:T,property:T,values:j,datas:te}))}),V},updateFilterOptionStatus(K,V){return K._checked=V,K.checked=V,pe()}}),N)},setupGrid(e){return e.extendTableMethods(bd)}});const{menus:xd,hooks:vd,globalEvents:wr,GLOBAL_EVENT_KEYS:Er}=ue,Cd=["closeMenu"];vd.add("tableMenuModule",{setupTable(e){const{xID:l,props:i,reactData:u,internalData:w}=e,{refElem:b,refTableFilter:y,refTableMenu:D}=e.getRefMaps(),{computeMouseOpts:B,computeIsMenu:p,computeMenuOpts:c}=e.getComputeMaps();let v={},N={};const G=(K,V,_)=>{const{ctxMenuStore:T}=u,I=p.value,j=c.value,te=j[V],le=j.visibleMethod;if(te){const{options:C,disabled:O}=te;O?K.preventDefault():I&&C&&C.length&&(_.options=C,e.preventEvent(K,"event.showMenu",_,()=>{if(!le||le(_)){K.preventDefault(),e.updateZindex();const{scrollTop:S,scrollLeft:q,visibleHeight:Y,visibleWidth:ne}=$r();let X=K.clientY+S,ie=K.clientX+q;const Re=()=>{w._currMenuParams=_,Object.assign(T,{visible:!0,list:C,selected:null,selectChild:null,showChild:!1,style:{zIndex:w.tZindex,top:`${X}px`,left:`${ie}px`}}),pe(()=>{const Te=D.value.getRefMaps().refElem.value,tt=Te.clientHeight,k=Te.clientWidth,{boundingTop:z,boundingLeft:Z}=Mr(Te),U=z+tt-Y,re=Z+k-ne;U>-10&&(T.style.top=`${Math.max(S+2,X-tt-2)}px`),re>-10&&(T.style.left=`${Math.max(q+2,ie-k-2)}px`)})},{keyboard:me,row:Ee,column:Ve}=_;me&&Ee&&Ve?e.scrollToRow(Ee,Ve).then(()=>{const Oe=e.getCellElement(Ee,Ve);if(Oe){const{boundingTop:Te,boundingLeft:tt}=Mr(Oe);X=Te+S+Math.floor(Oe.offsetHeight/2),ie=tt+q+Math.floor(Oe.offsetWidth/2)}Re()}):Re()}else v.closeMenu()}))}e.closeFilter()};return v={closeMenu(){return Object.assign(u.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),pe()}},N={moveCtxMenu(K,V,_,T,I,j){let te;const le=s.findIndexOf(j,C=>V[_]===C);if(T)I&&bn(V.selected)?V.showChild=!0:(V.showChild=!1,V.selectChild=null);else if(wr.hasKey(K,Er.ARROW_UP)){for(let C=le-1;C>=0;C--)if(j[C].visible!==!1){te=j[C];break}V[_]=te||j[j.length-1]}else if(wr.hasKey(K,Er.ARROW_DOWN)){for(let C=le+1;C<j.length;C++)if(j[C].visible!==!1){te=j[C];break}V[_]=te||j[0]}else V[_]&&(wr.hasKey(K,Er.ENTER)||wr.hasKey(K,Er.SPACEBAR))&&N.ctxMenuLinkEvent(K,V[_])},handleOpenMenuEvent:G,handleGlobalContextmenuEvent(K){const{mouseConfig:V,menuConfig:_}=i,{editStore:T,ctxMenuStore:I}=u,{visibleColumn:j}=w,te=y.value,le=D.value,C=B.value,O=c.value,S=b.value,{selected:q}=T,Y=["header","body","footer"];if(ft(_)){if(I.visible&&le&&Ot(K,le.getRefMaps().refElem.value).flag){K.preventDefault();return}if(w._keyCtx){const ne="body",X={type:ne,$table:e,keyboard:!0,columns:j.slice(0),$event:K};if(V&&C.area){const ie=e.getActiveCellArea();if(ie&&ie.row&&ie.column){X.row=ie.row,X.column=ie.column,G(K,ne,X);return}}else if(V&&C.selected&&q.row&&q.column){X.row=q.row,X.column=q.column,G(K,ne,X);return}}for(let ne=0;ne<Y.length;ne++){const X=Y[ne],ie=Ot(K,S,`vxe-${X}--column`,me=>me.parentNode.parentNode.parentNode.getAttribute("xid")===l),Re={type:X,$table:e,columns:j.slice(0),$event:K};if(ie.flag){const me=ie.targetElem,Ee=e.getColumnNode(me),Ve=Ee?Ee.item:null;let Oe=`${X}-`;if(Ve&&Object.assign(Re,{column:Ve,columnIndex:e.getColumnIndex(Ve),cell:me}),X==="body"){const tt=e.getRowNode(me.parentNode),k=tt?tt.item:null;Oe="",k&&(Re.row=k,Re.rowIndex=e.getRowIndex(k))}const Te=`${Oe}cell-menu`;G(K,X,Re),e.dispatchEvent(Te,Re,K);return}else if(Ot(K,S,`vxe-table--${X}-wrapper`,me=>me.getAttribute("xid")===l).flag){O.trigger==="cell"?K.preventDefault():G(K,X,Re);return}}}te&&!Ot(K,te.$el).flag&&e.closeFilter(),v.closeMenu()},ctxMenuMouseoverEvent(K,V,_){const T=K.currentTarget,{ctxMenuStore:I}=u;K.preventDefault(),K.stopPropagation(),I.selected=V,I.selectChild=_,_||(I.showChild=bn(V),I.showChild&&pe(()=>{const j=T.nextElementSibling;if(j){const{boundingTop:te,boundingLeft:le,visibleHeight:C,visibleWidth:O}=Mr(T),S=te+T.offsetHeight,q=le+T.offsetWidth;let Y="",ne="";q+j.offsetWidth>O-10&&(Y="auto",ne=`${T.offsetWidth}px`);let X="",ie="";S+j.offsetHeight>C-10&&(X="auto",ie="0"),j.style.left=Y,j.style.right=ne,j.style.top=X,j.style.bottom=ie}}))},ctxMenuMouseoutEvent(K,V){const{ctxMenuStore:_}=u;V.children||(_.selected=null),_.selectChild=null},ctxMenuLinkEvent(K,V){if(!V.disabled&&(V.code||!V.children||!V.children.length)){const _=xd.get(V.code),T=Object.assign({},w._currMenuParams,{menu:V,$table:e,$grid:e.xegrid,$event:K}),I=_?_.tableMenuMethod||_.menuMethod:null;I&&I(T,K),e.dispatchEvent("menu-click",T,K),v.closeMenu()}}},Object.assign(Object.assign({},v),N)},setupGrid(e){return e.extendTableMethods(Cd)}});const{getConfig:wd,renderer:Ed,hooks:yd,getI18n:Ri}=ue,Rd=["insert","insertAt","insertNextAt","insertChild","insertChildAt","insertChildNextAt","remove","removeCheckboxRow","removeRadioRow","removeCurrentRow","getRecordset","getInsertRecords","getRemoveRecords","getUpdateRecords","getEditRecord","getActiveRecord","getSelectedCell","clearEdit","clearActived","clearSelected","isEditByRow","isActiveByRow","setEditRow","setActiveRow","setEditCell","setActiveCell","setSelectCell"];yd.add("tableEditModule",{setupTable(e){const{props:l,reactData:i,internalData:u}=e,{refElem:w}=e.getRefMaps(),{computeMouseOpts:b,computeEditOpts:y,computeCheckboxOpts:D,computeTreeOpts:B,computeValidOpts:p}=e.getComputeMaps();let c={},v={};const N=(C,O)=>{const{model:S,editRender:q}=O;q&&(S.value=go(C,O),S.update=!1)},G=(C,O)=>{const{model:S,editRender:q}=O;q&&S.update&&(dl(C,O,S.value),S.update=!1,S.value=null)},K=()=>{const C=w.value;if(C){const O=C.querySelector(".col--selected");O&&Po(O,"col--selected")}},V=()=>{const{editStore:C,tableColumn:O}=i,S=y.value,{actived:q}=C,{row:Y,column:ne}=q;(Y||ne)&&(S.mode==="row"?O.forEach(X=>G(Y,X)):G(Y,ne))},_=(C,O)=>{const{tableFullTreeData:S,afterFullData:q,fullDataRowIdData:Y,fullAllDataRowIdData:ne}=u,X=B.value,{rowField:ie,parentField:Re,mapChildrenField:me}=X,Ee=X.children||X.childrenField,Ve=O?"push":"unshift";C.forEach(Oe=>{const Te=Oe[Re],tt=Ce(e,Oe),k=Te?s.findTree(S,z=>Te===z[ie],{children:me}):null;if(k){const{item:z}=k,Z=ne[Ce(e,z)],U=Z?Z.level:0;let re=z[Ee],ge=z[me];s.isArray(re)||(re=z[Ee]=[]),s.isArray(ge)||(ge=z[Ee]=[]),re[Ve](Oe),ge[Ve](Oe);const be={row:Oe,rowid:tt,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:re,parent:z,level:U+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};Y[tt]=be,ne[tt]=be}else{q[Ve](Oe),S[Ve](Oe);const z={row:Oe,rowid:tt,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:S,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};Y[tt]=z,ne[tt]=z}})},T=(C,O,S)=>{const{treeConfig:q}=l,{mergeList:Y,editStore:ne}=i,{tableFullTreeData:X,afterFullData:ie,tableFullData:Re,fullDataRowIdData:me,fullAllDataRowIdData:Ee}=u,Ve=B.value,{transform:Oe,rowField:Te,mapChildrenField:tt}=Ve,k=Ve.children||Ve.childrenField;s.isArray(C)||(C=[C]);const z=fl(e.defineField(C.map(U=>Object.assign(q&&Oe?{[tt]:[],[k]:[]}:{},U))));if(s.eqNull(O))q&&Oe?_(z,!1):(z.forEach(U=>{const re=Ce(e,U),ge={row:U,rowid:re,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:ie,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};me[re]=ge,Ee[re]=ge,ie.unshift(U),Re.unshift(U)}),Y.forEach(U=>{const{row:re}=U;re>0&&(U.row=re+z.length)}));else if(O===-1)q&&Oe?_(z,!0):(z.forEach(U=>{const re=Ce(e,U),ge={row:U,rowid:re,seq:-1,index:-1,_index:-1,treeIndex:-1,$index:-1,items:ie,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};me[re]=ge,Ee[re]=ge,ie.push(U),Re.push(U)}),Y.forEach(U=>{const{row:re,rowspan:ge}=U;re+ge>ie.length&&(U.rowspan=ge+z.length)}));else if(q&&Oe){const U=s.findTree(X,re=>O[Te]===re[Te],{children:tt});if(U){const{parent:re}=U,ge=re?re[tt]:X,be=Ee[Ce(e,re)],de=be?be.level:0;if(z.forEach((we,P)=>{const ae=Ce(e,we);we[Ve.parentField]&&re&&we[Ve.parentField]!==re[Te]&&Ye("vxe.error.errProp",[`${Ve.parentField}=${we[Ve.parentField]}`,`${Ve.parentField}=${re[Te]}`]),re&&(we[Ve.parentField]=re[Te]);let ve=U.index+P;S&&(ve=ve+1),ge.splice(ve,0,we);const se={row:we,rowid:ae,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:ge,parent:re,level:de+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};me[ae]=se,Ee[ae]=se}),re){const we=s.findTree(X,P=>O[Te]===P[Te],{children:k});if(we){const P=we.items;let ae=we.index;S&&(ae=ae+1),P.splice(ae,0,...z)}}}else _(z,!0)}else{if(q)throw new Error(Ri("vxe.error.noTree",["insert"]));let U=-1;if(s.isNumber(O)?O<ie.length&&(U=O):U=e.findRowIndexOf(ie,O),S&&(U=Math.min(ie.length,U+1)),U===-1)throw new Error(Ri("vxe.error.unableInsert"));ie.splice(U,0,...z);const re=e.findRowIndexOf(Re,O);re>-1?Re.splice(re+(S?1:0),0,...z):Re.push(...z),Y.forEach(ge=>{const{row:be,rowspan:de}=ge;be>U?ge.row=be+z.length:be+de>U&&(ge.rowspan=de+z.length)})}const{insertMaps:Z}=ne;return z.forEach(U=>{const re=Ce(e,U);Z[re]=U}),e.cacheRowMap(!1),e.updateScrollYStatus(),e.handleTableData(q&&Oe),q&&Oe||e.updateAfterDataIndex(),e.updateFooter(),e.checkSelectionStatus(),i.scrollYLoad&&e.updateScrollYSpace(),pe().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:z.length?z[z.length-1]:null,rows:z}))},I=(C,O,S,q)=>{const{treeConfig:Y}=l,ne=B.value,{transform:X,rowField:ie,parentField:Re}=ne;return Y&&X?(s.isArray(C)||(C=[C]),T(C.map(me=>Object.assign({},me,{[Re]:O[ie]})),S,q)):(Ye("vxe.error.errProp",["tree-config.transform=false","tree-config.transform=true"]),Promise.resolve({row:null,rows:[]}))},j=(C,O)=>{const{editStore:S}=i,{actived:q,focused:Y}=S,{row:ne,column:X}=q,ie=p.value;if(ne||X){if(O&&Ce(e,O)!==Ce(e,ne))return pe();V(),q.args=null,q.row=null,q.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:ne,rowIndex:e.getRowIndex(ne),$rowIndex:e.getVMRowIndex(ne),column:X,columnIndex:e.getColumnIndex(X),$columnIndex:e.getVMColumnIndex(X)},C||null)}return Y.row=null,Y.column=null,ie.autoClear&&(ie.msgMode!=="full"||wd().cellVaildMode==="obsolete")&&e.clearValidate?e.clearValidate():pe().then(()=>e.updateCellAreas())},te=(C,O,S,q)=>{const{editConfig:Y,mouseConfig:ne}=l,{editStore:X,tableColumn:ie}=i,Re=y.value,{mode:me}=Re,{actived:Ee,focused:Ve}=X,{row:Oe,column:Te}=C,{editRender:tt}=Te,k=C.cell||e.getCellElement(Oe,Te),z=Re.beforeEditMethod||Re.activeMethod;if(C.cell=k,k&&ft(Y)&&ft(tt)&&!e.isPendingByRow(Oe)){if(Ee.row!==Oe||me==="cell"&&Ee.column!==Te){let Z="edit-disabled";if(!z||z(Object.assign(Object.assign({},C),{$table:e,$grid:e.xegrid}))){ne&&(e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.closeTooltip(),Ee.column&&j(O),Z="edit-activated",Te.renderHeight=k.offsetHeight,Ee.args=C,Ee.row=Oe,Ee.column=Te,me==="row"?ie.forEach(re=>N(Oe,re)):N(Oe,Te);const U=Re.afterEditMethod;pe(()=>{S&&e.handleFocus(C,O),U&&U(Object.assign(Object.assign({},C),{$table:e,$grid:e.xegrid}))})}e.dispatchEvent(Z,{row:Oe,rowIndex:e.getRowIndex(Oe),$rowIndex:e.getVMRowIndex(Oe),column:Te,columnIndex:e.getColumnIndex(Te),$columnIndex:e.getVMColumnIndex(Te)},O),Z==="edit-activated"&&e.dispatchEvent("edit-actived",{row:Oe,rowIndex:e.getRowIndex(Oe),$rowIndex:e.getVMRowIndex(Oe),column:Te,columnIndex:e.getColumnIndex(Te),$columnIndex:e.getVMColumnIndex(Te)},O)}else{const{column:Z}=Ee;if(ne&&(e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),Z!==Te){const{model:U}=Z;U.update&&dl(Oe,Z,U.value),e.clearValidate&&e.clearValidate(Oe,Te)}Te.renderHeight=k.offsetHeight,Ee.args=C,Ee.column=Te,q&&setTimeout(()=>{e.handleFocus(C,O)})}Ve.column=null,Ve.row=null,e.focus()}return pe()},le=(C,O,S)=>{const{editConfig:q}=l,Y=s.isString(O)?e.getColumnByField(O):O;return C&&Y&&ft(q)&&ft(Y.editRender)?Promise.resolve(S?e.scrollToRow(C,Y):null).then(()=>{const ne=e.getCellElement(C,Y);return ne&&(te({row:C,rowIndex:e.getRowIndex(C),column:Y,columnIndex:e.getColumnIndex(Y),cell:ne,$table:e},null,S,S),u._lastCallTime=Date.now()),pe()}):pe()};return c={insert(C){return T(C,null)},insertAt(C,O){return T(C,O)},insertNextAt(C,O){return T(C,O,!0)},insertChild(C,O){return I(C,O,null)},insertChildAt(C,O,S){return I(C,O,S)},insertChildNextAt(C,O,S){return I(C,O,S,!0)},remove(C){const{treeConfig:O}=l,{mergeList:S,editStore:q,selectCheckboxMaps:Y}=i,{tableFullTreeData:ne,afterFullData:X,tableFullData:ie}=u,Re=D.value,me=B.value,{transform:Ee,mapChildrenField:Ve}=me,Oe=me.children||me.childrenField,{actived:Te,removeMaps:tt}=q,k=Object.assign({},q.insertMaps),z=Object.assign({},i.pendingRowMaps),{checkField:Z}=Re;let U=[];if(C?s.isArray(C)||(C=[C]):C=ie,C.forEach(re=>{if(!e.isInsertByRow(re)){const ge=Ce(e,re);tt[ge]=re}}),!Z){const re=Object.assign({},Y);C.forEach(ge=>{const be=Ce(e,ge);re[be]&&delete re[be]}),i.selectCheckboxMaps=re}return ie===C?(C=U=ie.slice(0),u.tableFullData=[],u.afterFullData=[],e.clearMergeCells()):O&&Ee?C.forEach(re=>{const ge=Ce(e,re),be=s.findTree(ne,P=>ge===Ce(e,P),{children:Ve});if(be){const P=be.items.splice(be.index,1);U.push(P[0])}const de=s.findTree(ne,P=>ge===Ce(e,P),{children:Oe});de&&de.items.splice(de.index,1);const we=e.findRowIndexOf(X,re);we>-1&&X.splice(we,1)}):C.forEach(re=>{const ge=e.findRowIndexOf(ie,re);if(ge>-1){const de=ie.splice(ge,1);U.push(de[0])}const be=e.findRowIndexOf(X,re);be>-1&&(S.forEach(de=>{const{row:we,rowspan:P}=de;we>be?de.row=we-1:we+P>be&&(de.rowspan=P-1)}),X.splice(be,1))}),Te.row&&e.findRowIndexOf(C,Te.row)>-1&&c.clearEdit(),C.forEach(re=>{const ge=Ce(e,re);k[ge]&&delete k[ge],z[ge]&&delete z[ge]}),q.insertMaps=k,i.pendingRowMaps=z,e.updateFooter(),e.cacheRowMap(!1),e.handleTableData(O&&Ee),O&&Ee||e.updateAfterDataIndex(),e.checkSelectionStatus(),i.scrollYLoad&&e.updateScrollYSpace(),pe().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:U.length?U[U.length-1]:null,rows:U}))},removeCheckboxRow(){return c.remove(e.getCheckboxRecords()).then(C=>(e.clearCheckboxRow(),C))},removeRadioRow(){const C=e.getRadioRecord();return c.remove(C||[]).then(O=>(e.clearRadioRow(),O))},removeCurrentRow(){const C=e.getCurrentRecord();return c.remove(C||[]).then(O=>(e.clearCurrentRow(),O))},getRecordset(){const C=c.getRemoveRecords(),O=e.getPendingRecords(),S=C.concat(O),q=c.getUpdateRecords().filter(Y=>!S.some(ne=>e.eqRow(ne,Y)));return{insertRecords:c.getInsertRecords(),removeRecords:C,updateRecords:q,pendingRecords:O}},getInsertRecords(){const{editStore:C}=i,{fullAllDataRowIdData:O}=u,{insertMaps:S}=C,q=[];return s.each(S,(Y,ne)=>{O[ne]&&q.push(Y)}),q},getRemoveRecords(){const{editStore:C}=i,{removeMaps:O}=C,S=[];return s.each(O,q=>{S.push(q)}),S},getUpdateRecords(){const{keepSource:C,treeConfig:O}=l,{tableFullData:S}=u,q=B.value;return C?(V(),O?s.filterTree(S,Y=>e.isUpdateByRow(Y),q):S.filter(Y=>e.isUpdateByRow(Y))):[]},getActiveRecord(){return this.getEditRecord()},getEditRecord(){const{editStore:C}=i,{afterFullData:O}=u,S=w.value,{args:q,row:Y}=C.actived;return q&&e.findRowIndexOf(O,Y)>-1&&S.querySelectorAll(".vxe-body--column.col--active").length?Object.assign({},q):null},getSelectedCell(){const{editStore:C}=i,{args:O,column:S}=C.selected;return O&&S?Object.assign({},O):null},clearActived(C){return this.clearEdit(C)},clearEdit(C){return j(null,C)},clearSelected(){const{editStore:C}=i,{selected:O}=C;return O.row=null,O.column=null,K(),pe()},isActiveByRow(C){return this.isEditByRow(C)},isEditByRow(C){const{editStore:O}=i;return O.actived.row===C},setActiveRow(C){return c.setEditRow(C)},setEditRow(C,O){const{visibleColumn:S}=u;let q=s.find(S,ne=>ft(ne.editRender)),Y=!1;return O&&(Y=!0,O!==!0&&(q=s.isString(O)?e.getColumnByField(O):O)),le(C,q,Y)},setActiveCell(C,O){return c.setEditCell(C,O)},setEditCell(C,O){return le(C,O,!0)},setSelectCell(C,O){const{tableData:S}=i,q=y.value,Y=s.isString(O)?e.getColumnByField(O):O;if(C&&Y&&q.trigger!=="manual"){const ne=e.findRowIndexOf(S,C);if(ne>-1&&Y){const X=e.getCellElement(C,Y),ie={row:C,rowIndex:ne,column:Y,columnIndex:e.getColumnIndex(Y),cell:X};e.handleSelected(ie,{})}}return pe()}},v={handleEdit(C,O){return te(C,O,!0,!0)},handleActived(C,O){return v.handleEdit(C,O)},handleClearEdit:j,handleFocus(C){const{row:O,column:S,cell:q}=C,{editRender:Y}=S,ne=y.value;if(ft(Y)){const X=Ed.get(Y.name);let ie=Y.autofocus||Y.autoFocus,Re=Y.autoSelect||Y.autoselect,me;if(ne.autoFocus&&(!ie&&X&&(ie=X.tableAutoFocus||X.tableAutofocus||X.autofocus),!Re&&X&&(Re=X.tableAutoSelect||X.autoselect),s.isFunction(ie)?me=ie(C):ie&&(ie===!0?me=q.querySelector("input,textarea"):me=q.querySelector(ie),me&&me.focus())),me){if(Re)me.select();else if(Fr.msie){const Ee=me.createTextRange();Ee.collapse(!1),Ee.select()}}else ne.autoPos&&(S.fixed||e.scrollToRow(O,S))}},handleSelected(C,O){const{mouseConfig:S}=l,{editStore:q}=i,Y=b.value,ne=y.value,{actived:X,selected:ie}=q,{row:Re,column:me}=C,Ee=S&&Y.selected;return Ee&&(ie.row!==Re||ie.column!==me)&&(X.row!==Re||ne.mode==="cell"&&X.column!==me)&&(j(O),c.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea()),ie.args=C,ie.row=Re,ie.column=me,Ee&&v.addCellSelectedClass(),e.focus(),O&&e.dispatchEvent("cell-selected",C,O)),pe()},addCellSelectedClass(){const{editStore:C}=i,{selected:O}=C,{row:S,column:q}=O;if(K(),S&&q){const Y=e.getCellElement(S,q);Y&&Zo(Y,"col--selected")}}},Object.assign(Object.assign({},c),v)},setupGrid(e){return e.extendTableMethods(Rd)}});const Sd='body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}';function Od(e,l){return new Blob([e],{type:`text/${l.type};charset=utf-8;`})}function Md(e,l){const{style:i}=e;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${e.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>',`<style>${Sd}</style>`,i?`<style>${i}</style>`:"","</head>",`<body>${l}</body>`,"</html>"].join("")}const{getI18n:al,hooks:Dd,renderer:ps}=ue;let dn;const Td="\uFEFF",Xl=`\r
`;function yr(e){return e.field||["seq","checkbox","radio"].indexOf(e.type)>-1}const ca=e=>{const l=[];return e.forEach(i=>{i.childNodes&&i.childNodes.length?(l.push(i),l.push(...ca(i.childNodes))):l.push(i)}),l},Fd=e=>{let l=1;const i=(b,y)=>{if(y&&(b._level=y._level+1,l<b._level&&(l=b._level)),b.childNodes&&b.childNodes.length){let D=0;b.childNodes.forEach(B=>{i(B,b),D+=B._colSpan}),b._colSpan=D}else b._colSpan=1};e.forEach(b=>{b._level=1,i(b)});const u=[];for(let b=0;b<l;b++)u.push([]);return ca(e).forEach(b=>{b.childNodes&&b.childNodes.length?b._rowSpan=1:b._rowSpan=l-b._level+1,u[b._level-1].push(b)}),u};function Id(e){return e===!0?"full":e||"default"}function un(e){return e==="TRUE"||e==="true"||e===!0}function Rr(e,l){const{footerFilterMethod:i}=e;return i?l.filter((u,w)=>i({items:u,$rowIndex:w})):l}function kd(e,l){if(l){if(e.type==="seq")return`	${l}`;switch(e.cellType){case"string":if(!isNaN(l))return`	${l}`;break;case"number":break;default:if(l.length>=12&&!isNaN(l))return`	${l}`;break}}return l}function fn(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function No(e,l){return e.getElementsByTagName(l)}function Si(e){return`#${e}@${s.uniqueId()}`}function da(e,l){return e.replace(/#\d+@\d+/g,i=>s.hasOwnProp(l,i)?l[i]:i)}function Oi(e,l){return da(e,l).replace(/^"+$/g,u=>'"'.repeat(Math.ceil(u.length/2)))}function Fs(e,l){const{fieldMaps:i,titleMaps:u}=e;if(!i[l]){const w=u[l];w&&w.field&&(l=w.field)}return l}function ua(e,l,i){const u=l.split(Xl),w=[];let b=[];if(u.length){const y={},D=Date.now();u.forEach(B=>{if(B){const p={};B=B.replace(/("")|(\n)/g,(v,N)=>{const G=Si(D);return y[G]=N?'"':`
`,G}).replace(/"(.*?)"/g,(v,N)=>{const G=Si(D);return y[G]=da(N,y),G});const c=B.split(i);b.length?(c.forEach((v,N)=>{N<b.length&&(p[b[N]]=Oi(v.trim(),y))}),w.push(p)):b=c.map(v=>Fs(e,Oi(v.trim(),y)))}})}return{fields:b,rows:w}}function Ad(e,l){return ua(e,l,",")}function Ld(e,l){return ua(e,l,"	")}function Hd(e,l){const u=new DOMParser().parseFromString(l,"text/html"),w=No(u,"body"),b=[],y=[];if(w.length){const D=No(w[0],"table");if(D.length){const B=No(D[0],"thead");if(B.length){s.arrayEach(No(B[0],"tr"),c=>{s.arrayEach(No(c,"th"),v=>{y.push(Fs(e,v.textContent||""))})});const p=No(D[0],"tbody");p.length&&s.arrayEach(No(p[0],"tr"),c=>{const v={};s.arrayEach(No(c,"td"),(N,G)=>{y[G]&&(v[y[G]]=N.textContent||"")}),b.push(v)})}}}return{fields:y,rows:b}}function Pd(e,l){const u=new DOMParser().parseFromString(l,"application/xml"),w=No(u,"Worksheet"),b=[],y=[];if(w.length){const D=No(w[0],"Table");if(D.length){const B=No(D[0],"Row");B.length&&(s.arrayEach(No(B[0],"Cell"),p=>{y.push(Fs(e,p.textContent||""))}),s.arrayEach(B,(p,c)=>{if(c){const v={},N=No(p,"Cell");s.arrayEach(N,(G,K)=>{y[K]&&(v[y[K]]=G.textContent)}),b.push(v)}}))}}return{fields:y,rows:b}}function Mi(e){s.eachTree(e,l=>{delete l._level,delete l._colSpan,delete l._rowSpan,delete l._children,delete l.childNodes},{children:"children"})}const $d=["exportData","importByFile","importData","saveFile","readFile","print","getPrintHtml","openImport","closeImport","openExport","closeExport","openPrint","closePrint"];Dd.add("tableExportModule",{setupTable(e){const{props:l,reactData:i,internalData:u}=e,{computeTreeOpts:w,computePrintOpts:b,computeExportOpts:y,computeImportOpts:D,computeCustomOpts:B,computeSeqOpts:p,computeRadioOpts:c,computeCheckboxOpts:v,computeColumnOpts:N}=e.getComputeMaps(),G=Mo("$xeGrid",null),K=k=>{const z=w.value,Z=z.children||z.childrenField;return k[Z]&&k[Z].length},V=(k,z,Z,U,re)=>{const be=p.value.seqMethod||U.seqMethod;return be?be({row:z,rowIndex:e.getRowIndex(z),$rowIndex:Z,column:U,columnIndex:e.getColumnIndex(U),$columnIndex:re}):k};function _(k,z){const Z=N.value,U=z.headerExportMethod||Z.headerExportMethod;return U?U({column:z,options:k,$table:e}):(k.original?z.field:z.getTitle())||""}const T=k=>s.isBoolean(k)?k?"TRUE":"FALSE":k,I=k=>cl(k)?"":`${k}`,j=(k,z,Z)=>{const{isAllExpand:U,mode:re}=k,{treeConfig:ge}=l,be=c.value,de=v.value,we=w.value,P=N.value;if(dn||(dn=document.createElement("div")),ge){const ae=we.children||we.childrenField,ve=[],se=new Map;return s.eachTree(Z,(J,Se,ye,He,Ue,qe)=>{const Ze=J._row||J,ht=Ue&&Ue._row?Ue._row:Ue;if(U||!ht||se.has(ht)&&e.isTreeExpandByRow(ht)){const xt=K(Ze),gt={_row:Ze,_level:qe.length-1,_hasChild:xt,_expand:xt&&e.isTreeExpandByRow(Ze)};z.forEach((st,it)=>{let ut="";const Ne=st.editRender||st.cellRender;let Le=st.exportMethod||P.exportMethod;if(!Le&&Ne&&Ne.name){const ke=ps.get(Ne.name);ke&&(Le=ke.tableExportMethod||ke.exportMethod)}if(Le||(Le=P.exportMethod),Le)ut=Le({$table:e,row:Ze,column:st,options:k});else switch(st.type){case"seq":{const ke=He.map((ot,he)=>he%2===0?Number(ot)+1:".").join("");ut=re==="all"?ke:V(ke,Ze,Se,st,it);break}case"checkbox":ut=T(e.isCheckedByCheckboxRow(Ze)),gt._checkboxLabel=de.labelField?s.get(Ze,de.labelField):"",gt._checkboxDisabled=de.checkMethod&&!de.checkMethod({row:Ze});break;case"radio":ut=T(e.isCheckedByRadioRow(Ze)),gt._radioLabel=be.labelField?s.get(Ze,be.labelField):"",gt._radioDisabled=be.checkMethod&&!be.checkMethod({row:Ze});break;default:if(k.original)ut=go(Ze,st);else if(ut=e.getCellLabel(Ze,st),st.type==="html")dn.innerHTML=ut,ut=dn.innerText.trim();else{const ke=e.getCellElement(Ze,st);ke&&!pl(ke,"is--progress")&&(ut=ke.innerText.trim())}}gt[st.id]=I(ut)}),se.set(Ze,1),ve.push(Object.assign(gt,Ze))}},{children:ae}),ve}return Z.map((ae,ve)=>{const se={_row:ae};return z.forEach((J,Se)=>{let ye="";const He=J.editRender||J.cellRender;let Ue=J.exportMethod||P.exportMethod;if(!Ue&&He&&He.name){const qe=ps.get(He.name);qe&&(Ue=qe.tableExportMethod||qe.exportMethod)}if(Ue)ye=Ue({$table:e,row:ae,column:J,options:k});else switch(J.type){case"seq":{const qe=ve+1;ye=re==="all"?qe:V(qe,ae,ve,J,Se);break}case"checkbox":ye=T(e.isCheckedByCheckboxRow(ae)),se._checkboxLabel=de.labelField?s.get(ae,de.labelField):"",se._checkboxDisabled=de.checkMethod&&!de.checkMethod({row:ae});break;case"radio":ye=T(e.isCheckedByRadioRow(ae)),se._radioLabel=be.labelField?s.get(ae,be.labelField):"",se._radioDisabled=be.checkMethod&&!be.checkMethod({row:ae});break;default:if(k.original)ye=go(ae,J);else if(ye=e.getCellLabel(ae,J),J.type==="html")dn.innerHTML=ye,ye=dn.innerText.trim();else{const qe=e.getCellElement(ae,J);qe&&!pl(qe,"is--progress")&&(ye=qe.innerText.trim())}}se[J.id]=I(ye)}),se})},te=k=>{const{columns:z,dataFilterMethod:Z}=k;let U=k.data;return Z&&(U=U.filter((re,ge)=>Z({row:re,$rowIndex:ge}))),j(k,z,U)},le=(k,z,Z)=>{const U=N.value,re=Z.editRender||Z.cellRender;let ge=Z.footerExportMethod;if(!ge&&re&&re.name){const de=ps.get(re.name);de&&(ge=de.tableFooterExportMethod||de.footerExportMethod)}ge||(ge=U.footerExportMethod);const be=e.getVTColumnIndex(Z);return ge?ge({$table:e,items:z,itemIndex:be,row:z,_columnIndex:be,column:Z,options:k}):s.isArray(z)?s.toValueString(z[be]):s.get(z,Z.field)},C=(k,z,Z)=>{let U=Td;if(k.isHeader&&(U+=z.map(re=>fn(_(k,re))).join(",")+Xl),Z.forEach(re=>{U+=z.map(ge=>fn(kd(ge,re[ge.id]))).join(",")+Xl}),k.isFooter){const{footerTableData:re}=i;Rr(k,re).forEach(be=>{U+=z.map(de=>fn(le(k,be,de))).join(",")+Xl})}return U},O=(k,z,Z)=>{let U="";if(k.isHeader&&(U+=z.map(re=>fn(_(k,re))).join("	")+Xl),Z.forEach(re=>{U+=z.map(ge=>fn(re[ge.id])).join("	")+Xl}),k.isFooter){const{footerTableData:re}=i;Rr(k,re).forEach(be=>{U+=z.map(de=>fn(le(k,be,de))).join("	")+Xl})}return U},S=(k,z,Z)=>{const U=k[z],re=s.isUndefined(U)||s.isNull(U)?Z:U;let we=re==="title"||(re===!0||re==="tooltip")||re==="ellipsis";const{scrollXLoad:P,scrollYLoad:ae}=i;return(P||ae)&&!we&&(we=!0),we},q=(k,z,Z)=>{const{id:U,border:re,treeConfig:ge,headerAlign:be,align:de,footerAlign:we,showOverflow:P,showHeaderOverflow:ae}=l,{isAllSelected:ve,isIndeterminate:se,mergeList:J}=i,Se=w.value,{print:ye,isHeader:He,isFooter:Ue,isColgroup:qe,isMerge:Ze,colgroups:ht,original:xt}=k,gt="check-all",it=[`<table class="${["vxe-table",`border--${Id(re)}`,ye?"is--print":"",He?"is--header":""].filter(Ne=>Ne).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${z.map(Ne=>`<col style="width:${Ne.renderWidth}px">`).join("")}</colgroup>`];if(He&&(it.push("<thead>"),qe&&!xt?ht.forEach(Ne=>{it.push(`<tr>${Ne.map(Le=>{const ke=Le.headerAlign||Le.align||be||de,ot=S(Le,"showHeaderOverflow",ae)?["col--ellipsis"]:[],he=_(k,Le);let _e=0,lt=0;s.eachTree([Le],H=>{(!H.childNodes||!Le.childNodes.length)&&lt++,_e+=H.renderWidth},{children:"childNodes"});const rt=_e-lt;return ke&&ot.push(`col--${ke}`),Le.type==="checkbox"?`<th class="${ot.join(" ")}" colspan="${Le._colSpan}" rowspan="${Le._rowSpan}"><div ${ye?"":`style="width: ${rt}px"`}><input type="checkbox" class="${gt}" ${ve?"checked":""}><span>${he}</span></div></th>`:`<th class="${ot.join(" ")}" colspan="${Le._colSpan}" rowspan="${Le._rowSpan}" title="${he}"><div ${ye?"":`style="width: ${rt}px"`}><span>${ho(he,!0)}</span></div></th>`}).join("")}</tr>`)}):it.push(`<tr>${z.map(Ne=>{const Le=Ne.headerAlign||Ne.align||be||de,ke=S(Ne,"showHeaderOverflow",ae)?["col--ellipsis"]:[],ot=_(k,Ne);return Le&&ke.push(`col--${Le}`),Ne.type==="checkbox"?`<th class="${ke.join(" ")}"><div ${ye?"":`style="width: ${Ne.renderWidth}px"`}><input type="checkbox" class="${gt}" ${ve?"checked":""}><span>${ot}</span></div></th>`:`<th class="${ke.join(" ")}" title="${ot}"><div ${ye?"":`style="width: ${Ne.renderWidth}px"`}><span>${ho(ot,!0)}</span></div></th>`}).join("")}</tr>`),it.push("</thead>")),Z.length&&(it.push("<tbody>"),ge?Z.forEach(Ne=>{it.push("<tr>"+z.map(Le=>{const ke=Le.align||de,ot=S(Le,"showOverflow",P)?["col--ellipsis"]:[],he=Ne[Le.id];if(ke&&ot.push(`col--${ke}`),Le.treeNode){let _e="";return Ne._hasChild&&(_e=`<i class="${Ne._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),ot.push("vxe-table--tree-node"),Le.type==="radio"?`<td class="${ot.join(" ")}" title="${he}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${Ne._level*Se.indent}px"><div class="vxe-table--tree-icon-wrapper">${_e}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${U}" ${Ne._radioDisabled?"disabled ":""}${un(he)?"checked":""}><span>${Ne._radioLabel}</span></div></div></div></td>`:Le.type==="checkbox"?`<td class="${ot.join(" ")}" title="${he}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${Ne._level*Se.indent}px"><div class="vxe-table--tree-icon-wrapper">${_e}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${Ne._checkboxDisabled?"disabled ":""}${un(he)?"checked":""}><span>${Ne._checkboxLabel}</span></div></div></div></td>`:`<td class="${ot.join(" ")}" title="${he}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${Ne._level*Se.indent}px"><div class="vxe-table--tree-icon-wrapper">${_e}</div><div class="vxe-table--tree-cell">${he}</div></div></div></td>`}return Le.type==="radio"?`<td class="${ot.join(" ")}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><input type="radio" name="radio_${U}" ${Ne._radioDisabled?"disabled ":""}${un(he)?"checked":""}><span>${Ne._radioLabel}</span></div></td>`:Le.type==="checkbox"?`<td class="${ot.join(" ")}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><input type="checkbox" ${Ne._checkboxDisabled?"disabled ":""}${un(he)?"checked":""}><span>${Ne._checkboxLabel}</span></div></td>`:`<td class="${ot.join(" ")}" title="${he}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}>${ho(he,!0)}</div></td>`}).join("")+"</tr>")}):Z.forEach(Ne=>{it.push("<tr>"+z.map(Le=>{const ke=Le.align||de,ot=S(Le,"showOverflow",P)?["col--ellipsis"]:[],he=Ne[Le.id];let _e=1,lt=1;if(Ze&&J.length){const rt=e.getVTRowIndex(Ne._row),H=e.getVTColumnIndex(Le),ee=ra(J,rt,H);if(ee){const{rowspan:ce,colspan:Me}=ee;if(!ce||!Me)return"";ce>1&&(_e=ce),Me>1&&(lt=Me)}}return ke&&ot.push(`col--${ke}`),Le.type==="radio"?`<td class="${ot.join(" ")}" rowspan="${_e}" colspan="${lt}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><input type="radio" name="radio_${U}" ${Ne._radioDisabled?"disabled ":""}${un(he)?"checked":""}><span>${Ne._radioLabel}</span></div></td>`:Le.type==="checkbox"?`<td class="${ot.join(" ")}" rowspan="${_e}" colspan="${lt}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}><input type="checkbox" ${Ne._checkboxDisabled?"disabled ":""}${un(he)?"checked":""}><span>${Ne._checkboxLabel}</span></div></td>`:`<td class="${ot.join(" ")}" rowspan="${_e}" colspan="${lt}" title="${he}"><div ${ye?"":`style="width: ${Le.renderWidth}px"`}>${ho(he,!0)}</div></td>`}).join("")+"</tr>")}),it.push("</tbody>")),Ue){const{footerTableData:Ne}=i,Le=Rr(k,Ne);Le.length&&(it.push("<tfoot>"),Le.forEach(ke=>{it.push(`<tr>${z.map(ot=>{const he=ot.footerAlign||ot.align||we||de,_e=S(ot,"showOverflow",P)?["col--ellipsis"]:[],lt=le(k,ke,ot);return he&&_e.push(`col--${he}`),`<td class="${_e.join(" ")}" title="${lt}"><div ${ye?"":`style="width: ${ot.renderWidth}px"`}>${ho(lt,!0)}</div></td>`}).join("")}</tr>`)}),it.push("</tfoot>"))}const ut=!ve&&se?`<script>(function(){var a=document.querySelector(".${gt}");if(a){a.indeterminate=true}})()<\/script>`:"";return it.push("</table>",ut),ye?it.join(""):Md(k,it.join(""))},Y=(k,z,Z)=>{let U=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${k.sheetName}">`,"<Table>",z.map(re=>`<Column ss:Width="${re.renderWidth}"/>`).join("")].join("");if(k.isHeader&&(U+=`<Row>${z.map(re=>`<Cell><Data ss:Type="String">${_(k,re)}</Data></Cell>`).join("")}</Row>`),Z.forEach(re=>{U+="<Row>"+z.map(ge=>`<Cell><Data ss:Type="String">${re[ge.id]}</Data></Cell>`).join("")+"</Row>"}),k.isFooter){const{footerTableData:re}=i;Rr(k,re).forEach(be=>{U+=`<Row>${z.map(de=>`<Cell><Data ss:Type="String">${le(k,be,de)}</Data></Cell>`).join("")}</Row>`})}return`${U}</Table></Worksheet></Workbook>`},ne=(k,z,Z)=>{if(z.length)switch(k.type){case"csv":return C(k,z,Z);case"txt":return O(k,z,Z);case"html":return q(k,z,Z);case"xml":return Y(k,z,Z)}return""},X=(k,z)=>{const{filename:Z,type:U,download:re}=k;if(!re){const ge=Od(z,k);return Promise.resolve({type:U,content:z,blob:ge})}ue.saveFile&&ue.saveFile({filename:Z,type:U,content:z}).then(()=>{k.message!==!1&&ue.modal&&ue.modal.message({content:al("vxe.table.expSuccess"),status:"success"})})},ie=k=>{const{remote:z,columns:Z,colgroups:U,exportMethod:re,afterExportMethod:ge}=k;return new Promise(be=>{if(z){const de={options:k,$table:e,$grid:G};be(re?re(de):de)}else{const de=te(k);be(e.preventEvent(null,"event.export",{options:k,columns:Z,colgroups:U,datas:de},()=>X(k,ne(k,Z,de))))}}).then(be=>(Mi(Z),k.print||ge&&ge({status:!0,options:k,$table:e,$grid:G}),Object.assign({status:!0},be))).catch(()=>{Mi(Z),k.print||ge&&ge({status:!1,options:k,$table:e,$grid:G});const be={status:!1};return Promise.reject(be)})},Re=(k,z)=>{const{tableFullColumn:Z,_importResolve:U,_importReject:re}=u;let ge={fields:[],rows:[]};const be={},de={};Z.forEach(se=>{const J=se.field,Se=se.getTitle();J&&(be[J]=se),Se&&(de[se.getTitle()]=se)});const we={fieldMaps:be,titleMaps:de};switch(z.type){case"csv":ge=Ad(we,k);break;case"txt":ge=Ld(we,k);break;case"html":ge=Hd(we,k);break;case"xml":ge=Pd(we,k);break}const{fields:P,rows:ae}=ge;P.some(se=>be[se]||de[se])?e.createData(ae).then(se=>{let J;return(z.mode==="insert"||z.mode==="insertBottom")&&(J=e.insertAt(se,-1)),z.mode==="insertTop"?J=e.insert(se):J=e.reloadData(se),z.message!==!1&&ue.modal&&ue.modal.message({content:al("vxe.table.impSuccess",[ae.length]),status:"success"}),J.then(()=>{U&&U({status:!0})})}):z.message!==!1&&(ue.modal&&ue.modal.message({content:al("vxe.error.impFields"),status:"error"}),re&&re({status:!1}))},me=(k,z)=>{const{importMethod:Z,afterImportMethod:U}=z,{type:re,filename:ge}=Vi(k),be=D.value;if(!Z&&!s.includes(s.keys(be._typeMaps),re)){z.message!==!1&&ue.modal&&ue.modal.message({content:al("vxe.error.notType",[re]),status:"error"});const we={status:!1};return Promise.reject(we)}return new Promise((we,P)=>{const ae=se=>{we(se),u._importResolve=null,u._importReject=null},ve=se=>{P(se),u._importResolve=null,u._importReject=null};if(u._importResolve=ae,u._importReject=ve,window.FileReader){const se=Object.assign({mode:"insertTop"},z,{type:re,filename:ge});if(se.remote)Z?Promise.resolve(Z({file:k,options:se,$table:e})).then(()=>{ae({status:!0})}).catch(()=>{ae({status:!0})}):ae({status:!0});else{const{tableFullColumn:J}=u;e.preventEvent(null,"event.import",{file:k,options:se,columns:J},()=>{const Se=new FileReader;Se.onerror=()=>{Ye("vxe.error.notType",[re]),ve({status:!1})},Se.onload=ye=>{Re(ye.target.result,se)},Se.readAsText(k,se.encoding||"UTF-8")})}}else Ye("vxe.error.notExp"),ae({status:!0})}).then(()=>{U&&U({status:!0,options:z,$table:e})}).catch(we=>(U&&U({status:!1,options:z,$table:e}),Promise.reject(we)))},Ee=(k,z,Z)=>Z.some(U=>{if(Dr(U))return z.id===U.id;if(s.isString(U))return z.field===U;{const re=U.id||U.colId,ge=U.type,be=U.field;if(re)return z.id===re;if(be&&ge)return z.field===be&&z.type===ge;if(be)return z.field===be;if(ge)return z.type===ge}return!1}),Ve=(k,z,Z,U)=>U&&s.includes(U,z.field)?!1:Z?!!s.includes(Z,z.field):k.original?z.field:yr(z),Oe=(k,z)=>{const{treeConfig:Z,showHeader:U,showFooter:re}=l,{initStore:ge,mergeList:be,mergeFooterList:de,isGroup:we,footerTableData:P,exportStore:ae,exportParams:ve}=i,{collectColumn:se}=u,J=y.value,Se=Z,ye=B.value,He=e.getCheckboxRecords(),Ue=G?G.getComputeMaps().computeProxyOpts.value:{},qe=!!P.length,Ze=!!(be.length||de.length),ht=Object.assign({message:!0,isHeader:U,isFooter:re,isColgroup:we,isMerge:Ze,useStyle:!0,current:"current",modes:(Ue.ajax&&Ue.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"])},k),xt=ht.types||s.keys(J._typeMaps),gt=ht.modes||[],st=ye.checkMethod,it=se.slice(0),{columns:ut,excludeFields:Ne,includeFields:Le}=ht,ke=xt.map(H=>({value:H,label:al(`vxe.export.types.${H}`)})),ot=gt.map(H=>H&&H.value?{value:H.value,label:H.label||H.value}:{value:H,label:al(`vxe.export.modes.${H}`)});s.eachTree(it,(H,ee,ce,Me,Ie)=>{const Xe=H.children&&H.children.length;let et=!1;ut&&ut.length?et=Ee(ht,H,ut):Ne||Le?et=Ve(ht,H,Le,Ne):et=H.visible&&(Xe||yr(H)),H.checked=et,H.halfChecked=!1,H.disabled=Ie&&Ie.disabled||(st?!st({column:H}):!1)}),Object.assign(ae,{columns:it,typeList:ke,modeList:ot,hasFooter:qe,hasMerge:Ze,hasTree:Se,isPrint:z,hasColgroup:we,visible:!0}),Object.assign(ve,{mode:He.length?"selected":"current"},ht);const{filename:he,sheetName:_e,mode:lt,type:rt}=ve;return he&&(s.isFunction(he)?ve.filename=he({options:ht,$table:e,$grid:G}):ve.filename=`${he}`),_e&&(s.isFunction(_e)?ve.sheetName=_e({options:ht,$table:e,$grid:G}):ve.sheetName=`${_e}`),ot.some(H=>H.value===lt)||(ve.mode=ot[0].value),ke.some(H=>H.value===rt)||(ve.type=ke[0].value),ge.export=!0,pe()},Te=()=>ue.modal?ue.modal.close("VXE_EXPORT_MODAL"):Promise.resolve(),tt={exportData(k){const{treeConfig:z,showHeader:Z,showFooter:U}=l,{mergeList:re,mergeFooterList:ge,isGroup:be}=i,{tableFullColumn:de,afterFullData:we,collectColumn:P}=u,ae=y.value,ve=w.value,se=G?G.getComputeMaps().computeProxyOpts.value:{},J=!!(re.length||ge.length),Se=Object.assign({message:!0,isHeader:Z,isFooter:U,isColgroup:be,isMerge:J,useStyle:!0,current:"current",modes:(se.ajax&&se.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"]),download:!0,type:"csv"},ae,k);let{filename:ye,sheetName:He,type:Ue,mode:qe,columns:Ze,original:ht,columnFilterMethod:xt,beforeExportMethod:gt,includeFields:st,excludeFields:it}=Se,ut=[];const Ne=e.getCheckboxRecords();qe||(qe=Ne.length?"selected":"current");const Le=Ze&&Ze.length?Ze:s.searchTree(P,he=>{const _e=he.children&&he.children.length;let lt=!1;return Ze&&Ze.length?lt=Ee(Se,he,Ze):it||st?lt=Ve(Se,he,st,it):lt=he.visible&&(_e||yr(he)),lt},{children:"children",mapChildren:"childNodes",original:!0}),ke=Object.assign({},Se,{filename:"",sheetName:""});!Le&&!xt&&(ke.columnFilterMethod=({column:he})=>it&&s.includes(it,he.field)?!1:st?!!s.includes(st,he.field):ht?he.field:yr(he)),Le?(ke._isCustomColumn=!0,ut=s.searchTree(s.mapTree(Le,he=>{let _e;if(he){if(Dr(he))_e=he;else if(s.isString(he))_e=e.getColumnByField(he);else{const lt=he.id||he.colId,rt=he.type,H=he.field;lt?_e=e.getColumnById(lt):H&&rt?_e=de.find(ee=>ee.field===H&&ee.type===rt):H?_e=e.getColumnByField(H):rt&&(_e=de.find(ee=>ee.type===rt))}return _e||{}}},{children:"childNodes",mapChildren:"_children"}),(he,_e)=>Dr(he)&&(!xt||xt({column:he,$columnIndex:_e})),{children:"_children",mapChildren:"childNodes",original:!0})):ut=s.searchTree(be?P:de,(he,_e)=>he.visible&&(!xt||xt({column:he,$columnIndex:_e})),{children:"children",mapChildren:"childNodes",original:!0});const ot=[];if(s.eachTree(ut,he=>{he.children&&he.children.length||ot.push(he)},{children:"childNodes"}),ke.columns=ot,ke.colgroups=Fd(ut),ye&&(s.isFunction(ye)?ke.filename=ye({options:Se,$table:e,$grid:G}):ke.filename=`${ye}`),ke.filename||(ke.filename=al(ke.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[s.toDateString(Date.now(),"yyyyMMddHHmmss")])),He&&(s.isFunction(He)?ke.sheetName=He({options:Se,$table:e,$grid:G}):ke.sheetName=`${He}`),ke.sheetName||(ke.sheetName=document.title||""),!ke.exportMethod&&!s.includes(s.keys(ae._typeMaps),Ue)){Ye("vxe.error.notType",[Ue]);const he={status:!1};return Promise.reject(he)}if(ke.print||gt&&gt({options:ke,$table:e,$grid:G}),!ke.data){if(ke.data=[],qe==="selected")["html","pdf"].indexOf(Ue)>-1&&z?ke.data=s.searchTree(e.getTableData().fullData,he=>e.findRowIndexOf(Ne,he)>-1,Object.assign({},ve,{data:"_row"})):ke.data=Ne;else if(qe==="all"&&G&&!ke.remote){const he=G.reactData,{computeProxyOpts:_e}=G.getComputeMaps(),lt=_e.value,{sortData:rt}=he,{beforeQueryAll:H,afterQueryAll:ee,ajax:ce={}}=lt,Me=lt.response||lt.props||{},Ie=ce.queryAll,Xe=ce.queryAllSuccess,et=ce.queryAllError;if(Ie){const nt={$table:e,$grid:G,sort:rt.length?rt[0]:{},sorts:rt,filters:he.filterData,form:he.formData,options:ke};return Promise.resolve((H||Ie)(nt)).then(ze=>{const pt=Me.list;return ke.data=(pt?s.isFunction(pt)?pt({data:ze,$grid:G}):s.get(ze,pt):ze)||[],ee&&ee(nt),Xe&&Xe(Object.assign(Object.assign({},nt),{response:ze})),ie(ke)}).catch(ze=>{et&&et(Object.assign(Object.assign({},nt),{response:ze}))})}}qe==="current"&&(ke.data=we)}return ie(ke)},importByFile(k,z){const Z=Object.assign({},z),{beforeImportMethod:U}=Z;return U&&U({options:Z,$table:e}),me(k,Z)},importData(k){const z=D.value,Z=Object.assign({types:s.keys(z._typeMaps)},z,k),{beforeImportMethod:U,afterImportMethod:re}=Z;return U&&U({options:Z,$table:e}),ue.readFile(Z).catch(ge=>(re&&re({status:!1,options:Z,$table:e}),Promise.reject(ge))).then(ge=>{const{file:be}=ge;return me(be,Z)})},saveFile(k){return ue.saveFile(k)},readFile(k){return ue.readFile(k)},print(k){const z=b.value,Z=Object.assign({original:!1},z,k,{type:"html",download:!1,remote:!1,print:!0}),{sheetName:U}=Z;let re="";U&&(s.isFunction(U)?re=U({options:Z,$table:e,$grid:G}):re=`${U}`),re||(re=document.title||"");const ge=Z.beforePrintMethod,be=Z.html||Z.content;return new Promise((de,we)=>{ue.print?de(be?ue.print({title:re,html:be,customStyle:Z.style,beforeMethod:ge?({html:P})=>ge({html:P,content:P,options:Z,$table:e}):void 0}):tt.exportData(Z).then(({content:P})=>ue.print({title:re,html:P,customStyle:Z.style,beforeMethod:ge?({html:ae})=>ge({html:ae,content:ae,options:Z,$table:e}):void 0}))):we({status:!1})})},getPrintHtml(k){const z=b.value,Z=Object.assign({original:!1},z,k,{type:"html",download:!1,remote:!1,print:!0});return e.exportData(Z).then(({content:U})=>({html:U}))},closeImport(){return ue.modal?ue.modal.close("VXE_IMPORT_MODAL"):Promise.resolve()},openImport(k){const{treeConfig:z,importConfig:Z}=l,{initStore:U,importStore:re,importParams:ge}=i,be=D.value,de=Object.assign({mode:"insertTop",message:!0,types:s.keys(be._typeMaps),modes:["insertTop","covering"]},be,k),we=de.types||[],P=de.modes||[];if(!!z){de.message&&ue.modal&&ue.modal.message({content:al("vxe.error.treeNotImp"),status:"error"});return}Z||Ye("vxe.error.reqProp",["import-config"]);const ve=we.map(J=>({value:J,label:al(`vxe.export.types.${J}`)})),se=P.map(J=>J&&J.value?{value:J.value,label:J.label||J.value}:{value:J,label:al(`vxe.import.modes.${J}`)});Object.assign(re,{file:null,type:"",filename:"",modeList:se,typeList:ve,visible:!0}),Object.assign(ge,de),se.some(J=>J.value===ge.mode)||(ge.mode=se[0].value),U.import=!0},closeExport:Te,openExport(k){const z=y.value,Z=Object.assign({message:!0,types:s.keys(z._typeMaps)},z,k);l.exportConfig||Ye("vxe.error.reqProp",["export-config"]),Oe(Z)},closePrint:Te,openPrint(k){const z=b.value,Z=Object.assign({message:!0},z,k);l.printConfig||Ye("vxe.error.reqProp",["print-config"]),Oe(Z,!0)}};return tt},setupGrid(e){return e.extendTableMethods($d)}});const{hooks:Bd}=ue;function Vd(e,l){let i=0,u=0;const w=!Fr.firefox&&pl(e,"vxe-checkbox--label");if(w){const b=getComputedStyle(e);i-=s.toNumber(b.paddingTop),u-=s.toNumber(b.paddingLeft)}for(;e&&e!==l;)if(i+=e.offsetTop,u+=e.offsetLeft,e=e.offsetParent,w){const b=getComputedStyle(e);i-=s.toNumber(b.paddingTop),u-=s.toNumber(b.paddingLeft)}return{offsetTop:i,offsetLeft:u}}Bd.add("tableKeyboardModule",{setupTable(e){const{props:l,reactData:i,internalData:u}=e,{refElem:w}=e.getRefMaps(),{computeEditOpts:b,computeCheckboxOpts:y,computeMouseOpts:D,computeTreeOpts:B,computeRowOpts:p,computeCellOpts:c,computeDefaultRowHeight:v}=e.getComputeMaps();function N(_,T,I,j,te,le){const{showOverflow:C}=l,{fullAllDataRowIdData:O,isResizeCellHeight:S}=u,q=p.value,Y=c.value,ne=v.value,{row:X}=T;let ie=0,Re=[],me=0;const Ee=le>0,{scrollYLoad:Ve}=i,{afterFullData:Oe}=u;if(Ee?me=te+le:me=j.height-te+Math.abs(le),Ve){const Te=e.getVTRowIndex(X);if(!(S||Y.height||q.height)&&C)Ee?Re=Oe.slice(Te,Te+Math.ceil(me/ne)):Re=Oe.slice(Te-Math.floor(me/ne),Te+1);else if(Ee)for(let k=Te;k<Oe.length;k++){const z=Oe[k],Z=e.getRowid(z),U=O[Z]||{};if(ie+=U.resizeHeight||Y.height||q.height||U.height||ne,Re.push(z),ie>me)return Re}else for(let k=Te;k>=0;k--){const z=Oe[k],Z=e.getRowid(z),U=O[Z]||{};if(ie+=U.resizeHeight||Y.height||q.height||U.height||ne,Re.push(z),ie>me)return Re}}else{const Te=Ee?"next":"previous";for(;I&&ie<me;){const tt=e.getRowNode(I);tt&&(Re.push(tt.item),ie+=I.offsetHeight,I=I[`${Te}ElementSibling`])}}return Re}const G=(_,T)=>{const{elemStore:I}=u,j=Je(I["main-body-scroll"]),te=Je(I["left-body-scroll"]),le=Je(I["right-body-scroll"]),{column:C,cell:O}=T;if(C.type==="checkbox"){let S=j;if(te&&C.fixed==="left"?S=te:le&&C.fixed==="right"&&(S=le),!S)return;const q=w.value,Y=_.clientX,ne=_.clientY,X=S.querySelector(".vxe-table--checkbox-range"),ie=O.parentElement,Re=e.getCheckboxRecords();let me=[];const Ee=1,Ve=Vd(_.target,S),Oe=Ve.offsetTop+_.offsetY,Te=Ve.offsetLeft+_.offsetX,tt=S.scrollTop,k=ie.offsetHeight,z=ie.getBoundingClientRect(),Z=ne-z.y;let U=null,re=!1,ge=1;const be=(ae,ve)=>{e.dispatchEvent(`checkbox-range-${ae}`,{records:e.getCheckboxRecords(),reserves:e.getCheckboxReserveRecords()},ve)},de=ae=>{const{clientX:ve,clientY:se}=ae,J=ve-Y,Se=se-ne+(S.scrollTop-tt);let ye=Math.abs(Se),He=Math.abs(J),Ue=Oe,qe=Te;Se<Ee?(Ue+=Se,Ue<Ee&&(Ue=Ee,ye=Oe)):ye=Math.min(ye,S.scrollHeight-Oe-Ee),J<Ee?(qe+=J,He>Te&&(qe=Ee,He=Te)):He=Math.min(He,S.clientWidth-Te-Ee),X.style.height=`${ye}px`,X.style.width=`${He}px`,X.style.left=`${qe}px`,X.style.top=`${Ue}px`,X.style.display="block";const Ze=N(ae,T,ie,z,Z,Se<Ee?-ye:ye);ye>10&&Ze.length!==me.length&&(me=Ze,ae.ctrlKey?Ze.forEach(ht=>{e.handleBatchSelectRows([ht],Re.indexOf(ht)===-1)}):(e.setAllCheckboxRow(!1),e.handleCheckedCheckboxRow(Ze,!0,!1)),be("change",ae))},we=()=>{clearTimeout(U),U=null},P=ae=>{we(),U=setTimeout(()=>{if(U){const{scrollLeft:ve,scrollTop:se,clientHeight:J,scrollHeight:Se}=S,ye=Math.ceil(ge*50/k);re?se+J<Se?(e.scrollTo(ve,se+ye),P(ae),de(ae)):we():se?(e.scrollTo(ve,se-ye),P(ae),de(ae)):we()}},50)};Zo(q,"drag--range"),document.onmousemove=ae=>{ae.preventDefault(),ae.stopPropagation();const{clientY:ve}=ae,{boundingTop:se}=Mr(S);ve<se?(re=!1,ge=se-ve,U||P(ae)):ve>se+S.clientHeight?(re=!0,ge=ve-se-S.clientHeight,U||P(ae)):U&&we(),de(ae)},document.onmouseup=ae=>{we(),Po(q,"drag--range"),X.removeAttribute("style"),document.onmousemove=null,document.onmouseup=null,be("end",ae)},be("start",_)}};return{moveTabSelected(_,T,I){const{editConfig:j}=l,{afterFullData:te,visibleColumn:le}=u,C=b.value;let O,S,q;const Y=Object.assign({},_),ne=e.getVTRowIndex(Y.row),X=e.getVTColumnIndex(Y.column);I.preventDefault(),T?X<=0?ne>0&&(S=ne-1,O=te[S],q=le.length-1):q=X-1:X>=le.length-1?ne<te.length-1&&(S=ne+1,O=te[S],q=0):q=X+1;const ie=le[q];ie&&(O?(Y.rowIndex=S,Y.row=O):Y.rowIndex=ne,Y.columnIndex=q,Y.column=ie,Y.cell=e.getCellElement(Y.row,Y.column),j?(C.trigger==="click"||C.trigger==="dblclick")&&(C.mode==="row"?e.handleEdit(Y,I):e.scrollToRow(Y.row,Y.column).then(()=>e.handleSelected(Y,I))):e.scrollToRow(Y.row,Y.column).then(()=>e.handleSelected(Y,I)))},moveCurrentRow(_,T,I){const{treeConfig:j}=l,{currentRow:te}=i,{afterFullData:le}=u,C=B.value,O=C.children||C.childrenField;let S;if(I.preventDefault(),te)if(j){const{index:q,items:Y}=s.findTree(le,ne=>ne===te,{children:O});_&&q>0?S=Y[q-1]:T&&q<Y.length-1&&(S=Y[q+1])}else{const q=e.getVTRowIndex(te);_&&q>0?S=le[q-1]:T&&q<le.length-1&&(S=le[q+1])}else S=le[0];if(S){const q={$table:e,row:S,rowIndex:e.getRowIndex(S),$rowIndex:e.getVMRowIndex(S)};e.scrollToRow(S).then(()=>e.triggerCurrentRowEvent(I,q))}},moveSelected(_,T,I,j,te,le){const{afterFullData:C,visibleColumn:O}=u,S=Object.assign({},_),q=e.getVTRowIndex(S.row),Y=e.getVTColumnIndex(S.column);le.preventDefault(),I&&q>0?(S.rowIndex=q-1,S.row=C[S.rowIndex]):te&&q<C.length-1?(S.rowIndex=q+1,S.row=C[S.rowIndex]):T&&Y?(S.columnIndex=Y-1,S.column=O[S.columnIndex]):j&&Y<O.length-1&&(S.columnIndex=Y+1,S.column=O[S.columnIndex]),e.scrollToRow(S.row,S.column).then(()=>{S.cell=e.getCellElement(S.row,S.column),e.handleSelected(S,le)})},handleCellMousedownEvent:(_,T)=>{const{editConfig:I,checkboxConfig:j,mouseConfig:te}=l,le=y.value,C=D.value,O=b.value;if(te&&C.area&&e.handleMousedownCellAreaEvent)return e.handleMousedownCellAreaEvent(_,T);j&&le.range&&G(_,T),te&&C.selected&&(!I||O.mode==="cell")&&e.handleSelected(T,_)}}}});const{getConfig:zd,validators:jd,hooks:Nd}=ue;class Yn{constructor(l){Object.assign(this,{$options:l,required:l.required,min:l.min,max:l.max,type:l.type,pattern:l.pattern,validator:l.validator,trigger:l.trigger,maxWidth:l.maxWidth})}get content(){return hl(this.$options.content||this.$options.message)}get message(){return this.content}}const _d=["fullValidate","validate","fullValidateField","validateField","clearValidate"];Nd.add("tableValidatorModule",{setupTable(e){const{props:l,reactData:i,internalData:u}=e,{refValidTooltip:w}=e.getRefMaps(),{computeValidOpts:b,computeTreeOpts:y,computeEditOpts:D}=e.getComputeMaps();let B={},p={},c;const v=V=>new Promise(_=>{b.value.autoPos===!1?(e.dispatchEvent("valid-error",V,null),_()):e.handleEdit(V,{type:"valid-error",trigger:"call"}).then(()=>{_(p.showValidTooltip(V))})}),N=V=>{if(b.value.msgMode==="single"){const T=Object.keys(V),I={};if(T.length){const j=T[0];I[j]=V[j]}return I}return V},G=(V,_,T,I)=>{const j={},{editRules:te,treeConfig:le}=l,{editStore:C,pendingRowMaps:O}=i,{afterFullData:S}=u,{removeMaps:q}=C,Y=y.value,ne=Y.children||Y.childrenField,X=b.value;let ie;V===!0?ie=S:V&&(s.isFunction(V)?T=V:ie=s.isArray(V)?V:[V]),ie||(e.getInsertRecords?ie=e.getInsertRecords().concat(e.getUpdateRecords()):ie=[]);const Re=[];u._lastCallTime=Date.now(),c=!1,B.clearValidate();const me={};if(te){const Ee=_&&_.length?_:e.getColumns(),Ve=Oe=>{const Te=Ce(e,Oe);if(!q[Te]&&!O[Te]&&(I||!c)){const tt=[];Ee.forEach(k=>{const z=s.isString(k)?k:k.field;(I||!c)&&s.has(te,z)&&tt.push(p.validCellRules("all",Oe,k).catch(({rule:Z,rules:U})=>{const re={rule:Z,rules:U,rowIndex:e.getRowIndex(Oe),row:Oe,columnIndex:e.getColumnIndex(k),column:k,field:z,$table:e};if(j[z]||(j[z]=[]),me[`${Ce(e,Oe)}:${k.id}`]={column:k,row:Oe,rule:Z,content:Z.content},j[z].push(re),!I)return c=!0,Promise.reject(re)}))}),Re.push(Promise.all(tt))}};return le?s.eachTree(ie,Ve,{children:ne}):ie.forEach(Ve),Promise.all(Re).then(()=>{const Oe=Object.keys(j);return i.validErrorMaps=N(me),pe().then(()=>{if(Oe.length)return Promise.reject(j[Oe[0]][0]);T&&T()})}).catch(Oe=>new Promise((Te,tt)=>{const k=()=>{pe(()=>{T?(T(j),Te()):zd().validToReject==="obsolete"?tt(j):Te(j)})},z=()=>{Oe.cell=e.getCellElement(Oe.row,Oe.column),Hc(Oe.cell),v(Oe).then(k)};if(X.autoPos===!1)k();else{const Z=Oe.row,U=Oe.column;e.scrollToRow(Z,U).then(z)}}))}else i.validErrorMaps={};return pe().then(()=>{T&&T()})};B={fullValidate(V,_){return G(V,null,_,!0)},validate(V,_){return G(V,null,_)},fullValidateField(V,_){const T=(s.isArray(_)?_:_?[_]:[]).map(I=>lo(e,I));return T.length?G(V,T,null,!0):pe()},validateField(V,_){const T=(s.isArray(_)?_:_?[_]:[]).map(I=>lo(e,I));return T.length?G(V,T,null):pe()},clearValidate(V,_){const{validErrorMaps:T}=i,I=w.value,j=b.value,te=s.isArray(V)?V:V?[V]:[],le=(s.isArray(_)?_:_?[_]:[]).map(O=>lo(e,O));let C={};if(I&&I.reactData.visible&&I.close(),j.msgMode==="single")return i.validErrorMaps={},pe();if(te.length&&le.length)C=Object.assign({},T),te.forEach(O=>{le.forEach(S=>{const q=`${Ce(e,O)}:${S.id}`;C[q]&&delete C[q]})});else if(te.length){const O=te.map(S=>`${Ce(e,S)}`);s.each(T,(S,q)=>{O.indexOf(q.split(":")[0])>-1&&(C[q]=S)})}else if(le.length){const O=le.map(S=>`${S.id}`);s.each(T,(S,q)=>{O.indexOf(q.split(":")[1])>-1&&(C[q]=S)})}return i.validErrorMaps=C,pe()}};const K=(V,_)=>{const{type:T,min:I,max:j,pattern:te}=V,le=T==="number",C=le?s.toNumber(_):s.getSize(_);return!!(le&&isNaN(_)||!s.eqNull(I)&&C<s.toNumber(I)||!s.eqNull(j)&&C>s.toNumber(j)||te&&!(s.isRegExp(te)?te:new RegExp(te)).test(_))};return p={validCellRules(V,_,T,I){const{editRules:j}=l,{field:te}=T,le=[],C=[];if(te&&j){const O=s.get(j,te);if(O){const S=s.isUndefined(I)?s.get(_,te):I;O.forEach(q=>{const{type:Y,trigger:ne,required:X,validator:ie}=q;if(V==="all"||!ne||V===ne)if(ie){const Re={cellValue:S,rule:q,rules:O,row:_,rowIndex:e.getRowIndex(_),column:T,columnIndex:e.getColumnIndex(T),field:T.field,$table:e,$grid:e.xegrid};let me;if(s.isString(ie)){const Ee=jd.get(ie);if(Ee){const Ve=Ee.tableCellValidatorMethod||Ee.cellValidatorMethod;Ve&&(me=Ve(Re))}else Ye("vxe.error.notValidators",[ie])}else me=ie(Re);me&&(s.isError(me)?(c=!0,le.push(new Yn({type:"custom",trigger:ne,content:me.message,rule:new Yn(q)}))):me.catch&&C.push(me.catch(Ee=>{c=!0,le.push(new Yn({type:"custom",trigger:ne,content:Ee&&Ee.message?Ee.message:q.content||q.message,rule:new Yn(q)}))})))}else{const Re=Y==="array",me=s.isArray(S);let Ee=!0;Re||me?Ee=!me||!S.length:s.isString(S)?Ee=cl(S.trim()):Ee=cl(S),(X?Ee||K(q,S):!Ee&&K(q,S))&&(c=!0,le.push(new Yn(q)))}})}}return Promise.all(C).then(()=>{if(le.length){const O={rules:le,rule:le[0]};return Promise.reject(O)}})},hasCellRules(V,_,T){const{editRules:I}=l,{field:j}=T;if(j&&I){const te=s.get(I,j);return te&&!!s.find(te,le=>V==="all"||!le.trigger||V===le.trigger)}return!1},triggerValidate(V){const{editConfig:_,editRules:T}=l,{editStore:I}=i,{actived:j}=I,te=D.value,le=b.value;if(T&&le.msgMode==="single"&&(i.validErrorMaps={}),_&&T&&j.row){const{row:C,column:O,cell:S}=j.args;if(p.hasCellRules(V,C,O))return p.validCellRules(V,C,O).then(()=>{te.mode==="row"&&B.clearValidate(C,O)}).catch(({rule:q})=>{if(!q.trigger||V===q.trigger){const Y={rule:q,row:C,column:O,cell:S};return p.showValidTooltip(Y),Promise.reject(Y)}return Promise.resolve()})}return Promise.resolve()},showValidTooltip(V){const{height:_}=l,{tableData:T,validStore:I,validErrorMaps:j}=i,{rule:te,row:le,column:C,cell:O}=V,S=b.value,q=w.value,Y=te.content;return I.visible=!0,S.msgMode==="single"?i.validErrorMaps={[`${Ce(e,le)}:${C.id}`]:{column:C,row:le,rule:te,content:Y}}:i.validErrorMaps=Object.assign({},j,{[`${Ce(e,le)}:${C.id}`]:{column:C,row:le,rule:te,content:Y}}),e.dispatchEvent("valid-error",V,null),q&&q&&(S.message==="tooltip"||S.message==="default"&&!_&&T.length<2)?q.open(O,Y):pe()}},Object.assign(Object.assign({},B),p)},setupGrid(e){return e.extendTableMethods(_d)}});const Wd=["openCustom","closeCustom","saveCustom","cancelCustom","resetCustom","toggleCustomAllCheckbox","setCustomAllCheckbox"];ue.hooks.add("tableCustomModule",{setupTable(e){const{reactData:l,internalData:i}=e,{computeCustomOpts:u}=e.getComputeMaps(),{refElem:w}=e.getRefMaps(),b=e.xegrid,y=()=>{const{customStore:T}=l,I=w.value;let j=0;I&&(j=I.clientHeight-28),T.maxHeight=Math.max(88,j)},D=()=>{const{initStore:T,customStore:I}=l;return I.visible=!0,T.custom=!0,B(),K(),y(),pe().then(()=>y())},B=()=>{const{customStore:T}=l,{collectColumn:I}=i;if(T.visible){const j={},te={},le={};s.eachTree(I,C=>{const O=C.getKey();C.renderFixed=C.fixed,C.renderVisible=C.visible,C.renderResizeWidth=C.renderWidth,j[O]=C.renderSortNumber,te[O]=C.fixed,le[O]=C.visible}),T.oldSortMaps=j,T.oldFixedMaps=te,T.oldVisibleMaps=le,l.customColumnList=I.slice(0)}},p=()=>{const{customStore:T}=l,I=u.value;return T.visible&&(T.visible=!1,I.immediate||e.handleCustom()),pe()},c=()=>{const{customColumnList:T}=l,I=u.value,{allowVisible:j,allowSort:te,allowFixed:le,allowResizable:C}=I;return s.eachTree(T,(O,S,q,Y,ne)=>{if(ne)O.fixed=ne.fixed;else{if(te){const X=S+1;O.renderSortNumber=X}le&&(O.fixed=O.renderFixed)}C&&O.renderVisible&&(!O.children||O.children.length)&&O.renderResizeWidth!==O.renderWidth&&(O.resizeWidth=O.renderResizeWidth,O.renderWidth=O.renderResizeWidth),j&&(O.visible=O.renderVisible)}),l.isCustomStatus=!0,l.isDragColMove=!0,setTimeout(()=>{l.isDragColMove=!1},1e3),e.saveCustomStore("confirm")},v=()=>{const{customColumnList:T,customStore:I}=l,{oldSortMaps:j,oldFixedMaps:te,oldVisibleMaps:le}=I,C=u.value,{allowVisible:O,allowSort:S,allowFixed:q,allowResizable:Y}=C;return s.eachTree(T,ne=>{const X=ne.getKey(),ie=!!le[X],Re=te[X]||"";O&&(ne.renderVisible=ie,ne.visible=ie),q&&(ne.renderFixed=Re,ne.fixed=Re),S&&(ne.renderSortNumber=j[X]||0),Y&&(ne.renderResizeWidth=ne.renderWidth)},{children:"children"}),pe()},N=T=>{const{customStore:I}=l,{customColumnList:j}=l,te=u.value,{checkMethod:le,visibleMethod:C}=te,O=!!T;return te.immediate?(s.eachTree(j,S=>{C&&!C({column:S})||le&&!le({column:S})||(S.visible=O,S.renderVisible=O,S.halfVisible=!1)}),I.isAll=O,l.isCustomStatus=!0,e.handleCustom(),e.saveCustomStore("update:visible")):(s.eachTree(j,S=>{C&&!C({column:S})||le&&!le({column:S})||(S.renderVisible=O,S.halfVisible=!1)}),I.isAll=O),e.checkCustomStatus(),pe()},G={openCustom:D,closeCustom:p,saveCustom:c,cancelCustom:v,resetCustom(T){const{collectColumn:I}=i,j=u.value,{checkMethod:te}=j,le=Object.assign({visible:!0,resizable:T===!0,fixed:T===!0,sort:T===!0},T);return s.eachTree(I,C=>{le.resizable&&(C.resizeWidth=0),le.fixed&&(C.fixed=C.defaultFixed),le.sort&&(C.renderSortNumber=C.sortNumber),(!te||te({column:C}))&&(C.visible=C.defaultVisible),C.renderResizeWidth=C.renderWidth}),l.isCustomStatus=!1,e.saveCustomStore("reset"),e.handleCustom()},toggleCustomAllCheckbox(){const{customStore:T}=l,I=!T.isAll;return N(I)},setCustomAllCheckbox:N},K=()=>{const{customStore:T}=l,{collectColumn:I}=i,j=u.value,{checkMethod:te}=j;T.isAll=I.every(le=>(te?!te({column:le}):!1)||le.renderVisible),T.isIndeterminate=!T.isAll&&I.some(le=>(!te||te({column:le}))&&(le.renderVisible||le.halfVisible))},V=(T,I)=>{(b||e).dispatchEvent("custom",{type:T},I)},_={checkCustomStatus:K,emitCustomEvent:V,triggerCustomEvent(T){const{customStore:I}=e.reactData;I.visible?(p(),V("close",T)):(I.btnEl=T.target,D(),V("open",T))},customOpenEvent(T){const{customStore:I}=l;I.visible||(I.activeBtn=!0,I.btnEl=T.target,e.openCustom(),e.emitCustomEvent("open",T))},customCloseEvent(T){const{customStore:I}=l;I.visible&&(I.activeBtn=!1,e.closeCustom(),e.emitCustomEvent("close",T))},handleUpdateCustomColumn:B};return Object.assign(Object.assign({},G),_)},setupGrid(e){return e.extendTableMethods(Wd)}});const{getConfig:Tr,renderer:qd,getI18n:Is}=ue,fa="modelValue",pa={};function ul(e,l,i){return s.eqNull(e)?s.eqNull(l)?i:l:e}function Xd(e,l){return e&&l.valueFormat?s.toStringDate(e,l.valueFormat):e}function Kd(e,l,i){const{dateConfig:u={}}=l;return s.toDateString(Xd(e,l),u.labelFormat||i)}function hs(e,l){return Kd(e,l,Is(`vxe.input.date.labelFormat.${l.type||"date"}`))}function Yd(e){return`vxe-${e.replace("$","")}`}function _o({name:e}){return ys(e)}function Br({name:e}){return ys(Yd(e))}function Ar(e,l,i){const{$panel:u}=e;u.changeOption({},l,i)}function Vr(e){let{name:l,attrs:i}=e;return l==="input"&&(i=Object.assign({type:"text"},i)),i}function ha(e){const{name:l,immediate:i,props:u}=e;if(!i){if(l==="VxeInput"||l==="$input"){const{type:w}=u||{};return!(!w||w==="text"||w==="number"||w==="integer"||w==="float")}return!(l==="input"||l==="textarea"||l==="$textarea")}return i}function Jo(e,l,i,u){return s.assign({immediate:ha(e)},pa,u,e.props,{[fa]:i})}function Lr(e,l,i,u){return s.assign({},pa,u,e.props,{[fa]:i})}function zr(e,l){return l.$type==="cell"||ha(e)}function Ho(e,l,i,u){const{placeholder:w}=e;return[g("span",{class:["vxe-cell--label",u?u.class:""]},w&&Rs(i)?[g("span",{class:"vxe-cell--placeholder"},ho(hl(w),1))]:ho(i,1))]}function ga(e,l,i){const{events:u}=e,w=sa(e),b=ia(e),{model:y,change:D,blur:B}=i||{},p=b===w,c={};return u&&s.objectEach(u,(v,N)=>{c[Al(N)]=function(...G){v(l,...G)}}),y&&(c[Al(w)]=function(v){y(v),p&&D&&D(v),u&&u[w]&&u[w](l,v)}),!p&&D&&(c[Al(b)]=function(v){D(v),u&&u[b]&&u[b](l,v)}),B&&(c[Al(Cn)]=function(v){B(v),u&&u[Cn]&&u[Cn](l,v)}),c}const Cn="blur";function Jn(e,l,i){const{events:u}=e,w=sa(e),b=ia(e),{model:y,change:D,blur:B}=i||{},p={};return s.objectEach(u,(c,v)=>{p[Al(v)]=function(...N){s.isFunction(c)||Ye("vxe.error.errFunc",[c]),c(l,...N)}}),y&&(p[Al(w)]=function(c){y(c),u&&u[w]&&u[w](l,c)}),D&&(p[Al(b)]=function(...c){D(...c),u&&u[b]&&u[b](l,...c)}),B&&(p[Al(Cn)]=function(...c){B(...c),u&&u[Cn]&&u[Cn](l,...c)}),p}function Qo(e,l){const{$table:i,row:u,column:w}=l,{name:b}=e,{model:y}=w,D=zr(e,l);return Jn(e,l,{model(B){y.update=!0,y.value=B,D&&dl(u,w,B)},change(B){if(!D&&b&&["VxeInput","VxeNumberInput","VxeTextarea","$input","$textarea"].includes(b)){const p=B.value;y.update=!0,y.value=p,i.updateStatus(l,p)}else i.updateStatus(l)},blur(){D?i.handleCellRuleUpdateStatus("blur",l):i.handleCellRuleUpdateStatus("blur",l,y.value)}})}function Hr(e,l,i){return Jn(e,l,{model(u){i.data=u},change(){Ar(l,!s.eqNull(i.data),i)},blur(){Ar(l,!s.eqNull(i.data),i)}})}function ma(e,l){const{$table:i,row:u,column:w}=l,{model:b}=w;return ga(e,l,{model(y){const D=y.target;if(D){const B=D.value;zr(e,l)?dl(u,w,B):(b.update=!0,b.value=B)}},change(y){const D=y.target;if(D){const B=D.value;i.updateStatus(l,B)}},blur(y){const D=y.target;if(D){const B=D.value;i.updateStatus(l,B)}}})}function ba(e,l,i){return ga(e,l,{model(u){const w=u.target;w&&(i.data=w.value)},change(){Ar(l,!s.eqNull(i.data),i)},blur(){Ar(l,!s.eqNull(i.data),i)}})}function gs(e,l){const{row:i,column:u}=l,{name:w}=e,b=zr(e,l)?go(i,u):u.model.value;return[g(w,Object.assign(Object.assign(Object.assign({class:`vxe-default-${w}`},Vr(e)),{value:b}),ma(e,l)))]}function Ud(e,l){return[g(_o(e),Object.assign(Object.assign({},Jo(e,l,null)),Jn(e,l)))]}function Lo(e,l){const{row:i,column:u}=l,w=go(i,u);return[g(_o(e),Object.assign(Object.assign({},Jo(e,l,w)),Qo(e,l)))]}function Di(e,l){const{options:i}=e,{row:u,column:w}=l,b=go(u,w);return[g(_o(e),Object.assign(Object.assign({options:i},Jo(e,l,b)),Qo(e,l)))]}function Sr(e,l){const{row:i,column:u}=l,w=go(i,u);return[g(Br(e),Object.assign(Object.assign({},Jo(e,l,w)),Qo(e,l)))]}function xa(e,l){return[g(ys("vxe-button"),Object.assign(Object.assign({},Jo(e,l,null)),Jn(e,l)))]}function Gd(e,l){return e.children.map(i=>xa(i,l)[0])}function va(e,l,i){const{optionGroups:u,optionGroupProps:w={}}=e,b=w.options||"options",y=w.label||"label";return u.map((D,B)=>g("optgroup",{key:B,label:D[y]},i(D[b],e,l)))}function Pr(e,l,i){const{optionProps:u={}}=l,{row:w,column:b}=i,y=u.label||"label",D=u.value||"value",B=u.disabled||"disabled",p=zr(l,i)?go(w,b):b.model.value;return e.map((c,v)=>g("option",{key:v,value:c[D],disabled:c[B],selected:c[D]==p},c[y]))}function Zd(e,l){const{column:i}=l,{name:u}=e,w=Vr(e);return i.filters.map((b,y)=>g(u,Object.assign(Object.assign(Object.assign({key:y,class:`vxe-default-${u}`},w),{value:b.data}),ba(e,l,b))))}function ms(e,l){const{column:i}=l;return i.filters.map((u,w)=>{const b=u.data;return g(_o(e),Object.assign(Object.assign({key:w},Lr(e,e,b)),Hr(e,l,u)))})}function Qd(e,l){const{column:i}=l;return i.filters.map((u,w)=>{const b=u.data;return g(Br(e),Object.assign(Object.assign({key:w},Lr(e,e,b)),Hr(e,l,u)))})}function Un({option:e,row:l,column:i}){const{data:u}=e;return s.get(l,i.field)==u}function Gn({option:e,row:l,column:i}){const{data:u}=e,w=s.get(l,i.field);return s.toValueString(w).indexOf(u)>-1}function Ti(e,l){return[g("select",Object.assign(Object.assign({class:"vxe-default-select"},Vr(e)),ma(e,l)),e.optionGroups?va(e,l,Pr):Pr(e.options,e,l))]}function Fi(e,l){const{row:i,column:u}=l,{options:w,optionProps:b,optionGroups:y,optionGroupProps:D}=e,B=go(i,u);return[g(_o(e),Object.assign(Object.assign({},Jo(e,l,B,{options:w,optionProps:b,optionGroups:y,optionGroupProps:D})),Qo(e,l)))]}function Ii(e,l){const{row:i,column:u}=l,{options:w,optionProps:b}=e,y=go(i,u);return[g(_o(e),Object.assign(Object.assign({},Jo(e,l,y,{options:w,optionProps:b})),Qo(e,l)))]}function ki(e,l){const{row:i,column:u}=l,{options:w,optionProps:b,optionGroups:y,optionGroupProps:D}=e,B=go(i,u);return[g(Br(e),Object.assign(Object.assign({},Jo(e,l,B,{options:w,optionProps:b,optionGroups:y,optionGroupProps:D})),Qo(e,l)))]}function mn(e,{row:l,column:i}){const{options:u,optionGroups:w,optionProps:b={},optionGroupProps:y={}}=e,D=s.get(l,i.field);let B;const p=b.label||"label",c=b.value||"value";return D!=null?s.map(s.isArray(D)?D:[D],w?v=>{const N=y.options||"options";for(let G=0;G<w.length&&(B=s.find(w[G][N],K=>K[c]==v),!B);G++);return B?B[p]:v}:v=>(B=s.find(u,N=>N[c]==v),B?B[p]:v)).join(", "):""}function Or(e){const{row:l,column:i,options:u}=e;return u.original?go(l,i):mn(i.editRender||i.cellRender,e)}function Qn(e,{row:l,column:i}){const{options:u,optionProps:w={}}=e,b=s.get(l,i.field),y=w.label||"label",D=w.value||"value",B=w.children||"children";if(b!=null){const p={};return s.eachTree(u,c=>{p[s.get(c,D)]=c},{children:B}),s.map(s.isArray(b)?b:[b],c=>{const v=p[c];return v&&s.get(v,y)}).join(", ")}return""}function bs(e){const{row:l,column:i,options:u}=e;return u.original?go(l,i):Qn(i.editRender||i.cellRender,e)}function Ai(e,l){const{props:i={},showNegativeStatus:u}=e,{row:w,column:b}=l,{type:y}=i;let D=s.get(w,b.field),B=!1;if(!Rs(D)){const p=Tr().numberInput||{};if(y==="float"){const c=ul(i.autoFill,p.autoFill,!0),v=ul(i.digits,p.digits,1);D=s.toFixed(s.floor(D,v),v),c||(D=s.toNumber(D)),u&&D<0&&(B=!0)}else if(y==="amount"){const c=ul(i.autoFill,p.autoFill,!0),v=ul(i.digits,p.digits,2),N=ul(i.showCurrency,p.showCurrency,!1);if(D=s.toNumber(D),u&&D<0&&(B=!0),D=s.commafy(D,{digits:v}),!c){const[G,K]=D.split(".");if(K){const V=K.replace(/0+$/,"");D=V?[G,".",V].join(""):G}}N&&(D=`${i.currencySymbol||p.currencySymbol||Is("vxe.numberInput.currencySymbol")||""}${D}`)}else u&&s.toNumber(D)<0&&(B=!0)}return Ho(e,l,D,B?{class:"is--negative"}:{})}qd.mixin({input:{tableAutoFocus:"input",renderTableEdit:gs,renderTableDefault:gs,renderTableFilter:Zd,tableFilterDefaultMethod:Gn},textarea:{tableAutoFocus:"textarea",renderTableEdit:gs},select:{renderTableEdit:Ti,renderTableDefault:Ti,renderTableCell(e,l){return Ho(e,l,mn(e,l))},renderTableFilter(e,l){const{column:i}=l;return i.filters.map((u,w)=>g("select",Object.assign(Object.assign({key:w,class:"vxe-default-select"},Vr(e)),ba(e,l,u)),e.optionGroups?va(e,l,Pr):Pr(e.options,e,l)))},tableFilterDefaultMethod:Un,tableExportMethod:Or},VxeInput:{tableAutoFocus:"input",renderTableEdit:Lo,renderTableCell(e,l){const{props:i={}}=e,{row:u,column:w}=l,b=Tr().input||{},y=i.digits||b.digits||2;let D=s.get(u,w.field);if(D)switch(i.type){case"date":case"week":case"month":case"quarter":case"year":D=hs(D,i);break;case"float":D=s.toFixed(s.floor(D,y),y);break}return Ho(e,l,D)},renderTableDefault:Lo,renderTableFilter:ms,tableFilterDefaultMethod:Gn},FormatNumberInput:{renderTableDefault:Ai,tableFilterDefaultMethod:Gn,tableExportMethod(e){const{row:l,column:i}=e;return s.get(l,i.field)}},VxeNumberInput:{tableAutoFocus:"input",renderTableEdit:Lo,renderTableCell:Ai,renderTableFooter(e,l){const{props:i={}}=e,{row:u,column:w,_columnIndex:b}=l,{type:y}=i,D=s.isArray(u)?u[b]:s.get(u,w.field);if(s.isNumber(D)){const B=Tr().numberInput||{};if(y==="float"){const p=ul(i.autoFill,B.autoFill,!0),c=ul(i.digits,B.digits,1);let v=s.toFixed(s.floor(D,c),c);return p||(v=s.toNumber(v)),v}else if(y==="amount"){const p=ul(i.autoFill,B.autoFill,!0),c=ul(i.digits,B.digits,2),v=ul(i.showCurrency,B.showCurrency,!1);let N=s.commafy(s.toNumber(D),{digits:c});if(!p){const[G,K]=N.split(".");if(K){const V=K.replace(/0+$/,"");N=V?[G,".",V].join(""):G}}return v&&(N=`${i.currencySymbol||B.currencySymbol||Is("vxe.numberInput.currencySymbol")||""}${N}`),N}}return hl(D,1)},renderTableDefault:Lo,renderTableFilter:ms,tableFilterDefaultMethod:Gn,tableExportMethod(e){const{row:l,column:i}=e;return s.get(l,i.field)}},VxeDatePicker:{tableAutoFocus:"input",renderTableEdit:Lo,renderTableCell(e,l){const{props:i={}}=e,{row:u,column:w}=l;let b=s.get(u,w.field);return b&&i.type!=="time"&&(b=hs(b,i)),Ho(e,l,b)},renderTableDefault:Lo,renderTableFilter:ms,tableFilterDefaultMethod:Un},VxeTextarea:{tableAutoFocus:"textarea",renderTableEdit:Lo,renderTableCell(e,l){const{row:i,column:u}=l,w=s.get(i,u.field);return Ho(e,l,w)}},VxeButton:{renderTableDefault:Ud},VxeButtonGroup:{renderTableDefault(e,l){const{options:i}=e;return[g(_o(e),Object.assign(Object.assign({options:i},Jo(e,l,null)),Jn(e,l)))]}},VxeSelect:{tableAutoFocus:"input",renderTableEdit:Fi,renderTableDefault:Fi,renderTableCell(e,l){return Ho(e,l,mn(e,l))},renderTableFilter(e,l){const{column:i}=l,{options:u,optionProps:w,optionGroups:b,optionGroupProps:y}=e;return i.filters.map((D,B)=>{const p=D.data;return g(_o(e),Object.assign(Object.assign({key:B},Lr(e,l,p,{options:u,optionProps:w,optionGroups:b,optionGroupProps:y})),Hr(e,l,D)))})},tableFilterDefaultMethod:Un,tableExportMethod:Or},formatOption:{renderTableDefault(e,l){return Ho(e,l,mn(e,l))}},FormatSelect:{renderTableDefault(e,l){return Ho(e,l,mn(e,l))},tableFilterDefaultMethod:Un,tableExportMethod:Or},VxeTreeSelect:{tableAutoFocus:"input",renderTableEdit:Ii,renderTableCell(e,l){return Ho(e,l,Qn(e,l))},tableExportMethod:bs},formatTree:{renderTableDefault(e,l){return Ho(e,l,Qn(e,l))}},FormatTreeSelect:{renderTableDefault(e,l){return Ho(e,l,Qn(e,l))},tableExportMethod:bs},VxeTableSelect:{tableAutoFocus:"input",renderTableEdit:Ii,renderTableCell(e,l){return Ho(e,l,Qn(e,l))},tableExportMethod:bs},VxeColorPicker:{tableAutoFocus:"input",renderTableEdit(e,l){const{row:i,column:u}=l,{options:w}=e,b=go(i,u);return[g(_o(e),Object.assign(Object.assign({},Jo(e,l,b,{colors:w})),Qo(e,l)))]},renderTableCell(e,l){const{row:i,column:u}=l,w=s.get(i,u.field);return g("span",{class:"vxe-color-picker--readonly"},[g("div",{class:"vxe-color-picker--readonly-color",style:{backgroundColor:w}})])}},VxeIconPicker:{tableAutoFocus:"input",renderTableEdit(e,l){const{row:i,column:u}=l,{options:w}=e,b=go(i,u);return[g(_o(e),Object.assign(Object.assign({},Jo(e,l,b,{icons:w})),Qo(e,l)))]},renderTableCell(e,l){const{row:i,column:u}=l,w=s.get(i,u.field);return g("i",{class:w})}},VxeRadioGroup:{renderTableDefault:Di},VxeCheckboxGroup:{renderTableDefault:Di},VxeSwitch:{tableAutoFocus:"button",renderTableEdit:Lo,renderTableDefault:Lo},VxeUpload:{renderTableEdit:Lo,renderTableCell:Lo,renderTableDefault:Lo},VxeImage:{renderTableDefault(e,l){const{row:i,column:u}=l,{props:w}=e,b=go(i,u);return[g(_o(e),Object.assign(Object.assign(Object.assign({},w),{src:b}),Qo(e,l)))]}},VxeImageGroup:{renderTableDefault(e,l){const{row:i,column:u}=l,{props:w}=e,b=go(i,u);return[g(_o(e),Object.assign(Object.assign(Object.assign({},w),{urlList:b}),Qo(e,l)))]}},VxeTextEllipsis:{renderTableDefault(e,l){const{row:i,column:u}=l,{props:w}=e,b=go(i,u);return[g(_o(e),Object.assign(Object.assign(Object.assign({},w),{content:b}),Qo(e,l)))]}},VxeRate:{renderTableDefault:Lo},VxeSlider:{renderTableDefault:Lo},$input:{tableAutoFocus:".vxe-input--inner",renderTableEdit:Sr,renderTableCell(e,l){var i;const{props:u={}}=e,{row:w,column:b}=l,y=u.digits||((i=Tr().input)===null||i===void 0?void 0:i.digits)||2;let D=s.get(w,b.field);if(D)switch(u.type){case"date":case"week":case"month":case"year":D=hs(D,u);break;case"float":D=s.toFixed(s.floor(D,y),y);break}return Ho(e,l,D)},renderTableDefault:Sr,renderTableFilter:Qd,tableFilterDefaultMethod:Gn},$textarea:{tableAutoFocus:".vxe-textarea--inner"},$button:{renderTableDefault:xa},$buttons:{renderTableDefault:Gd},$select:{tableAutoFocus:".vxe-input--inner",renderTableEdit:ki,renderTableDefault:ki,renderTableCell(e,l){return Ho(e,l,mn(e,l))},renderTableFilter(e,l){const{column:i}=l,{options:u,optionProps:w,optionGroups:b,optionGroupProps:y}=e;return i.filters.map((D,B)=>{const p=D.data;return g(Br(e),Object.assign(Object.assign({key:B},Lr(e,l,p,{options:u,optionProps:w,optionGroups:b,optionGroupProps:y})),Hr(e,l,D)))})},tableFilterDefaultMethod:Un,tableExportMethod:Or},$radio:{tableAutoFocus:".vxe-radio--input"},$checkbox:{tableAutoFocus:".vxe-checkbox--input"},$switch:{tableAutoFocus:".vxe-switch--button",renderTableEdit:Sr,renderTableDefault:Sr}});const jr=Object.assign({},vn,{install(e){e.component(vn.name,vn)}}),Jd={useCellView:gd};ue.dynamicApp&&ue.dynamicApp.component(vn.name,vn);ue.component(vn);ue.tableHandle=Jd;const eu=jr,{getConfig:Go,getIcon:Il,getI18n:pn,renderer:Li,commands:Hi,createEvent:tu,useFns:ou}=ue,wn=Wo({name:"VxeToolbar",props:{loading:Boolean,refresh:[Boolean,Object],import:[Boolean,Object],export:[Boolean,Object],print:[Boolean,Object],zoom:[Boolean,Object],custom:[Boolean,Object],buttons:{type:Array,default:()=>Go().toolbar.buttons},tools:{type:Array,default:()=>Go().toolbar.tools},perfect:{type:Boolean,default:()=>Go().toolbar.perfect},size:{type:String,default:()=>Go().toolbar.size||Go().size},className:[String,Function]},emits:["button-click","tool-click"],setup(e,l){const{slots:i,emit:u}=l,w=s.uniqueId(),b=ue.getComponent("VxeButton"),{computeSize:y}=ou.useSize(e),D=fl({isRefresh:!1,connectFlag:0,columns:[]}),B={connectTable:null},p=$e(),c={refElem:p},v={xID:w,props:e,context:l,reactData:D,internalData:B,getRefMaps:()=>c};let N={};const G=Mo("$xeGrid",null),K=Be(()=>Object.assign({},s.clone(Go().toolbar.refresh,!0),e.refresh)),V=Be(()=>Object.assign({},s.clone(Go().toolbar.import,!0),e.import)),_=Be(()=>Object.assign({},s.clone(Go().toolbar.export,!0),e.export)),T=Be(()=>Object.assign({},s.clone(Go().toolbar.print,!0),e.print)),I=Be(()=>Object.assign({},s.clone(Go().toolbar.zoom,!0),e.zoom)),j=Be(()=>Object.assign({},s.clone(Go().toolbar.custom,!0),e.custom)),te=Be(()=>{const{connectTable:de}=B,we=de;if((D.connectFlag||we)&&we){const{computeCustomOpts:P}=we.getComputeMaps();return P.value}return{trigger:""}}),le=Be(()=>te.value.trigger),C=()=>{const{connectTable:de}=B;if(de)return!0;Ye("vxe.error.barUnableLink")},O=({$event:de})=>{const{connectTable:we}=B,P=we;P&&(P.triggerCustomEvent?P.triggerCustomEvent(de):Ye("vxe.error.reqModule",["VxeTableCustomModule"]))},S=({$event:de})=>{const{connectTable:we}=B,P=we;P?P.customOpenEvent(de):Ye("vxe.error.reqModule",["VxeTableCustomModule"])},q=({$event:de})=>{const{connectTable:we}=B,P=we;if(P){const{customStore:ae}=P.reactData;ae.activeBtn=!1,setTimeout(()=>{!ae.activeBtn&&!ae.activeWrapper&&P.customCloseEvent(de)},350)}},Y=({$event:de})=>{const{isRefresh:we}=D,P=K.value;if(!we){const ae=P.queryMethod||P.query;if(ae){D.isRefresh=!0;try{Promise.resolve(ae({})).catch(ve=>ve).then(()=>{D.isRefresh=!1})}catch{D.isRefresh=!1}}else G&&(D.isRefresh=!0,G.triggerToolbarCommitEvent({code:P.code||"reload"},de).catch(ve=>ve).then(()=>{D.isRefresh=!1}))}},ne=({$event:de})=>{G&&G.triggerZoomEvent(de)},X=(de,we)=>{const{connectTable:P}=B,ae=P,{code:ve}=we;if(ve)if(G)G.triggerToolbarBtnEvent(we,de);else{const se=Hi.get(ve),J={code:ve,button:we,$table:ae,$grid:G,$event:de};if(se){const Se=se.tableCommandMethod||se.commandMethod;Se?Se(J):Ye("vxe.error.notCommands",[ve])}v.dispatchEvent("button-click",J,de)}},ie=(de,we)=>{const{connectTable:P}=B,ae=P,{code:ve}=we;if(ve)if(G)G.triggerToolbarTolEvent(we,de);else{const se=Hi.get(ve),J={code:ve,tool:we,$table:ae,$grid:G,$event:de};if(se){const Se=se.tableCommandMethod||se.commandMethod;Se?Se(J):Ye("vxe.error.notCommands",[ve])}v.dispatchEvent("tool-click",J,de)}},Re=()=>{if(C()){const{connectTable:de}=B,we=de;we&&we.openImport()}},me=()=>{if(C()){const{connectTable:de}=B,we=de;we&&we.openExport()}},Ee=()=>{if(C()){const{connectTable:de}=B,we=de;we&&we.openPrint()}};N={dispatchEvent:(de,we,P)=>{u(de,tu(P,{$toolbar:v},we))},syncUpdate(de){B.connectTable=de.$table,D.columns=de.collectColumn,D.connectFlag++}},Object.assign(v,N);const Oe=(de,we)=>{const{dropdowns:P}=de,ae=[];return P?P.map((ve,se)=>ve.visible===!1?Ke():b?g(b,{key:se,disabled:ve.disabled,loading:ve.loading,type:ve.type,mode:ve.mode,icon:ve.icon,circle:ve.circle,round:ve.round,status:ve.status,content:ve.name,title:ve.title,routerLink:ve.routerLink,permissionCode:ve.permissionCode,prefixTooltip:ve.prefixTooltip,suffixTooltip:ve.suffixTooltip,onClick:({$event:J})=>we?X(J,ve):ie(J,ve)}):Ke()):ae},Te=()=>{const{buttons:de}=e,{connectTable:we}=B,P=we,ae=i.buttonPrefix||i["button-prefix"],ve=i.buttonSuffix||i["button-suffix"],se=[];return ae&&se.push(...So(ae({buttons:de||[],$grid:G,$table:P}))),de&&de.forEach((J,Se)=>{const{dropdowns:ye,buttonRender:He}=J;if(J.visible!==!1){const Ue=He?Li.get(He.name):null;if(He&&Ue&&Ue.renderToolbarButton){const qe=Ue.toolbarButtonClassName,Ze={$grid:G,$table:P,button:J};se.push(g("span",{key:`br${J.code||Se}`,class:["vxe-button--item",qe?s.isFunction(qe)?qe(Ze):qe:""]},So(Ue.renderToolbarButton(He,Ze))))}else b&&se.push(g(b,{key:`bd${J.code||Se}`,disabled:J.disabled,loading:J.loading,type:J.type,mode:J.mode,icon:J.icon,circle:J.circle,round:J.round,status:J.status,content:J.name,title:J.title,routerLink:J.routerLink,permissionCode:J.permissionCode,prefixTooltip:J.prefixTooltip,suffixTooltip:J.suffixTooltip,destroyOnClose:J.destroyOnClose,placement:J.placement,transfer:J.transfer,onClick:({$event:qe})=>X(qe,J)},ye&&ye.length?{dropdowns:()=>Oe(J,!0)}:{}))}}),ve&&se.push(...So(ve({buttons:de||[],$grid:G,$table:P}))),se},tt=()=>{const{tools:de}=e,{connectTable:we}=B,P=we,ae=i.toolPrefix||i["tool-prefix"],ve=i.toolSuffix||i["tool-suffix"],se=[];return ae&&se.push(...So(ae({tools:de||[],$grid:G,$table:P}))),de&&de.forEach((J,Se)=>{const{dropdowns:ye,toolRender:He}=J;if(J.visible!==!1){const Ue=He?He.name:null,qe=He?Li.get(Ue):null;if(He&&qe&&qe.renderToolbarTool){const Ze=qe.toolbarToolClassName,ht={$grid:G,$table:P,tool:J};se.push(g("span",{key:Ue,class:["vxe-tool--item",Ze?s.isFunction(Ze)?Ze(ht):Ze:""]},So(qe.renderToolbarTool(He,ht))))}else b&&se.push(g(b,{key:Se,disabled:J.disabled,loading:J.loading,type:J.type,mode:J.mode,icon:J.icon,circle:J.circle,round:J.round,status:J.status,content:J.name,title:J.title,routerLink:J.routerLink,permissionCode:J.permissionCode,prefixTooltip:J.prefixTooltip,suffixTooltip:J.suffixTooltip,destroyOnClose:J.destroyOnClose,placement:J.placement,transfer:J.transfer,onClick:({$event:Ze})=>ie(Ze,J)},ye&&ye.length?{dropdowns:()=>Oe(J,!1)}:{}))}}),ve&&se.push(...So(ve({tools:de||[],$grid:G,$table:P}))),se},k=()=>{const de=V.value;return b?g(b,{key:"import",circle:!0,icon:de.icon||Il().TOOLBAR_TOOLS_IMPORT,title:pn("vxe.toolbar.import"),onClick:Re}):Ke()},z=()=>{const de=_.value;return b?g(b,{key:"export",circle:!0,icon:de.icon||Il().TOOLBAR_TOOLS_EXPORT,title:pn("vxe.toolbar.export"),onClick:me}):Ke()},Z=()=>{const de=T.value;return b?g(b,{key:"print",circle:!0,icon:de.icon||Il().TOOLBAR_TOOLS_PRINT,title:pn("vxe.toolbar.print"),onClick:Ee}):Ke()},U=()=>{const de=K.value;return b?g(b,{key:"refresh",circle:!0,icon:D.isRefresh?de.iconLoading||Il().TOOLBAR_TOOLS_REFRESH_LOADING:de.icon||Il().TOOLBAR_TOOLS_REFRESH,title:pn("vxe.toolbar.refresh"),onClick:Y}):Ke()},re=()=>{const de=I.value;return G&&b?g(b,{key:"zoom",circle:!0,icon:G.isMaximized()?de.iconOut||Il().TOOLBAR_TOOLS_MINIMIZE:de.iconIn||Il().TOOLBAR_TOOLS_FULLSCREEN,title:pn(`vxe.toolbar.zoom${G.isMaximized()?"Out":"In"}`),onClick:ne}):Ke()},ge=()=>{const de=j.value,we=le.value,P={};return we==="manual"||(we==="hover"?(P.onMouseenter=S,P.onMouseleave=q):P.onClick=O),b?g(b,Object.assign({key:"custom",circle:!0,icon:de.icon||Il().TOOLBAR_TOOLS_CUSTOM,title:pn("vxe.toolbar.custom"),className:"vxe-toolbar-custom-target"},P)):Ke()},be=()=>{const{perfect:de,loading:we,refresh:P,zoom:ae,custom:ve,className:se}=e,{connectTable:J}=B,Se=y.value,ye=i.tools,He=i.buttons,Ue=J;return g("div",{ref:p,class:["vxe-toolbar",se?s.isFunction(se)?se({$toolbar:v}):se:"",{[`size--${Se}`]:Se,"is--perfect":de,"is--loading":we}]},[g("div",{class:"vxe-buttons--wrapper"},He?He({$grid:G,$table:Ue}):Te()),g("div",{class:"vxe-tools--wrapper"},ye?ye({$grid:G,$table:Ue}):tt()),g("div",{class:"vxe-tools--operate"},[e.import?k():Ke(),e.export?z():Ke(),e.print?Z():Ke(),P?U():Ke(),ae&&G?re():Ke(),ve?ge():Ke()])])};return v.renderVN=be,pe(()=>{const{refresh:de}=e,we=K.value,P=we.queryMethod||we.query;de&&!G&&!P&&Rt("vxe.error.notFunc",["queryMethod"]);const ae=j.value;ae.isFooter&&Rt("vxe.error.delProp",["toolbar.custom.isFooter","table.custom-config.showFooter"]),ae.showFooter&&Rt("vxe.error.delProp",["toolbar.custom.showFooter","table.custom-config.showFooter"]),ae.immediate&&Rt("vxe.error.delProp",["toolbar.custom.immediate","table.custom-config.immediate"]),ae.trigger&&Rt("vxe.error.delProp",["toolbar.custom.trigger","table.custom-config.trigger"]),(e.refresh||e.import||e.export||e.print||e.zoom)&&(b||Ye("vxe.error.reqComp",["vxe-button"]))}),v},render(){return this.renderVN()}}),Nr=Object.assign({},wn,{install(e){e.component(wn.name,wn)}});ue.dynamicApp&&ue.dynamicApp.component(wn.name,wn);ue.component(wn);const lu=Nr,{getConfig:wl,getI18n:hn,commands:nu,hooks:ru,useFns:su,createEvent:iu,globalEvents:xs,GLOBAL_EVENT_KEYS:au,renderEmptyElement:Pi}=ue,cu=Object.keys(kr),$i=["clearAll","syncData","updateData","loadData","reloadData","reloadRow","loadColumn","reloadColumn","getRowNode","getColumnNode","getRowIndex","getVTRowIndex","getVMRowIndex","getColumnIndex","getVTColumnIndex","getVMColumnIndex","setRow","createData","createRow","revertData","clearData","isRemoveByRow","isInsertByRow","isUpdateByRow","getColumns","getColumnById","getColumnByField","getTableColumn","getFullColumns","getData","getCheckboxRecords","getParentRow","getTreeParentRow","getRowSeq","getRowById","getRowid","getTableData","getFullData","setColumnFixed","clearColumnFixed","setColumnWidth","getColumnWidth","setRowHeightConf","getRowHeightConf","setRowHeight","getRowHeight","hideColumn","showColumn","resetColumn","refreshColumn","refreshScroll","recalculate","closeTooltip","isAllCheckboxChecked","isAllCheckboxIndeterminate","getCheckboxIndeterminateRecords","setCheckboxRow","setCheckboxRowKey","isCheckedByCheckboxRow","isCheckedByCheckboxRowKey","isIndeterminateByCheckboxRow","isIndeterminateByCheckboxRowKey","toggleCheckboxRow","setAllCheckboxRow","getRadioReserveRecord","clearRadioReserve","getCheckboxReserveRecords","clearCheckboxReserve","toggleAllCheckboxRow","clearCheckboxRow","setCurrentRow","isCheckedByRadioRow","isCheckedByRadioRowKey","setRadioRow","setRadioRowKey","clearCurrentRow","clearRadioRow","getCurrentRecord","getRadioRecord","getCurrentColumn","setCurrentColumn","clearCurrentColumn","setPendingRow","togglePendingRow","getPendingRecords","clearPendingRow","sort","setSort","clearSort","isSort","getSortColumns","closeFilter","isFilter","isActiveFilterByColumn","isRowExpandLoaded","clearRowExpandLoaded","reloadRowExpand","reloadRowExpand","toggleRowExpand","setAllRowExpand","setRowExpand","isExpandByRow","isRowExpandByRow","clearRowExpand","clearRowExpandReserve","getRowExpandRecords","getTreeExpandRecords","isTreeExpandLoaded","clearTreeExpandLoaded","reloadTreeExpand","reloadTreeChilds","toggleTreeExpand","setAllTreeExpand","setTreeExpand","isTreeExpandByRow","clearTreeExpand","clearTreeExpandReserve","getScroll","scrollTo","scrollToRow","scrollToColumn","clearScroll","updateFooter","updateStatus","setMergeCells","removeInsertRow","removeMergeCells","getMergeCells","clearMergeCells","setMergeFooterItems","removeMergeFooterItems","getMergeFooterItems","clearMergeFooterItems","getCustomStoreData","openTooltip","moveColumnTo","moveRowTo","getCellLabel","getCellElement","focus","blur","connect"],du=[...Ts,"page-change","form-submit","form-submit-invalid","form-reset","form-collapse","form-toggle-collapse","proxy-query","proxy-delete","proxy-save","toolbar-button-click","toolbar-tool-click","zoom"],En=Wo({name:"VxeGrid",props:Object.assign(Object.assign({},kr),{layouts:Array,columns:Array,pagerConfig:Object,proxyConfig:Object,toolbarConfig:Object,formConfig:Object,zoomConfig:Object,size:{type:String,default:()=>wl().grid.size||wl().size}}),emits:du,setup(e,l){var i;const{slots:u,emit:w}=l,b=s.uniqueId(),y=ue.getComponent("VxeForm"),D=ue.getComponent("VxePager"),B=[["Form"],["Toolbar","Top","Table","Bottom","Pager"]],{computeSize:p}=su.useSize(e),c=fl({tableLoading:!1,proxyInited:!1,isZMax:!1,tableData:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:((i=wl().pager)===null||i===void 0?void 0:i.pageSize)||10,currentPage:1}}),v=$e(),N=$e(),G=$e(),K=$e(),V=$e(),_=$e(),T=$e(),I=$e(),j=$e(),te=$e(),le=H=>{const ee={};return H.forEach(ce=>{ee[ce]=(...Me)=>{const Ie=N.value;if(Ie&&Ie[ce])return Ie[ce](...Me)}}),ee},C=le($i);$i.forEach(H=>{C[H]=(...ee)=>{const ce=N.value;if(ce&&ce[H])return ce&&ce[H](...ee)}});const O=Be(()=>s.merge({},s.clone(wl().grid.proxyConfig,!0),e.proxyConfig)),S=Be(()=>{const H=O.value;return s.isBoolean(H.message)?H.message:H.showResponseMsg}),q=Be(()=>O.value.showActiveMsg),Y=Be(()=>Object.assign({},wl().grid.pagerConfig,e.pagerConfig)),ne=Be(()=>Object.assign({},wl().grid.formConfig,e.formConfig)),X=Be(()=>Object.assign({},wl().grid.toolbarConfig,e.toolbarConfig)),ie=Be(()=>Object.assign({},wl().grid.zoomConfig,e.zoomConfig)),Re=Be(()=>{const{height:H,maxHeight:ee}=e,{isZMax:ce,tZindex:Me}=c,Ie={};return ce?Ie.zIndex=Me:(H&&(Ie.height=H==="auto"||H==="100%"?"100%":Ir(H)),ee&&(Ie.maxHeight=ee==="auto"||ee==="100%"?"100%":Ir(ee))),Ie}),me=Be(()=>{const H={},ee=e;return cu.forEach(ce=>{H[ce]=ee[ce]}),H}),Ee=Be(()=>{const{seqConfig:H,pagerConfig:ee,loading:ce,editConfig:Me,proxyConfig:Ie}=e,{isZMax:Xe,tableLoading:et,tablePage:nt,tableData:ze}=c,pt=me.value,Lt=O.value,mt=Y.value,Ct=Object.assign({},pt);return Xe&&(pt.maxHeight?Ct.maxHeight="100%":Ct.height="100%"),Ie&&ft(Lt)&&(Ct.loading=ce||et,Ct.data=ze,ee&&Lt.seq&&ft(mt)&&(Ct.seqConfig=Object.assign({},H,{startIndex:(nt.currentPage-1)*nt.pageSize}))),Me&&(Ct.editConfig=Object.assign({},Me)),Ct}),Ve=Be(()=>{const{layouts:H}=e;let ee=[];H&&H.length?ee=H:ee=wl().grid.layouts||B;let ce=[],Me=[],Ie=[];return ee.length&&(s.isArray(ee[0])?(ce=ee[0],Me=ee[1]||[],Ie=ee[2]||[]):Me=ee),{headKeys:ce,bodyKeys:Me,footKeys:Ie}}),Oe=Be(()=>{const H=Y.value;return`${H.currentPage}${H.pageSize}`}),Te={refElem:v,refTable:N,refForm:G,refToolbar:K,refPager:V},tt={computeProxyOpts:O,computePagerOpts:Y,computeFormOpts:ne,computeToolbarOpts:X,computeZoomOpts:ie},k={xID:b,props:e,context:l,reactData:c,getRefMaps:()=>Te,getComputeMaps:()=>tt},z=()=>{const H=X.value;e.toolbarConfig&&ft(H)&&pe(()=>{const ee=N.value,ce=K.value;ee&&ce&&ee.connect(ce)})},Z=()=>{const{proxyConfig:H}=e,{formData:ee}=c,ce=O.value,Me=ne.value;return H&&ft(ce)&&ce.form?ee:Me.data},U=()=>{const{tablePage:H}=c,{pagerConfig:ee}=e,ce=Y.value,{currentPage:Me,pageSize:Ie}=ce;ee&&ft(ce)&&(Me&&(H.currentPage=Me),Ie&&(H.pageSize=Ie))},re=H=>{const ee=q.value,ce=N.value,Me=ce.getCheckboxRecords();Me.length?(ce.togglePendingRow(Me),C.clearCheckboxRow()):ee&&ue.modal&&ue.modal.message({id:H,content:hn("vxe.grid.selectOneRecord"),status:"warning"})},ge=(H,ee)=>{const ce=O.value,Ie=(ce.response||ce.props||{}).message;let Xe;return H&&Ie&&(Xe=s.isFunction(Ie)?Ie({data:H,$grid:k}):s.get(H,Ie)),Xe||hn(ee)},be=(H,ee,ce)=>{const Me=q.value,Ie=C.getCheckboxRecords();if(Me)if(Ie.length){if(ue.modal)return ue.modal.confirm({id:`cfm_${H}`,content:hn(ee),escClosable:!0}).then(Xe=>{if(Xe==="confirm")return ce()})}else ue.modal&&ue.modal.message({id:`msg_${H}`,content:hn("vxe.grid.selectOneRecord"),status:"warning"});else Ie.length&&ce();return Promise.resolve()},de=H=>{const{proxyConfig:ee}=e,{tablePage:ce}=c,{$event:Me,currentPage:Ie,pageSize:Xe}=H,et=O.value;ce.currentPage=Ie,ce.pageSize=Xe,he.dispatchEvent("page-change",H,Me),ee&&ft(et)&&he.commitProxy("query").then(nt=>{he.dispatchEvent("proxy-query",nt,Me)})},we=H=>{const ee=N.value,{proxyConfig:ce}=e,{computeSortOpts:Me}=ee.getComputeMaps(),Ie=O.value;Me.value.remote&&(c.sortData=H.sortList,ce&&ft(Ie)&&(c.tablePage.currentPage=1,he.commitProxy("query").then(et=>{he.dispatchEvent("proxy-query",et,H.$event)}))),he.dispatchEvent("sort-change",H,H.$event)},P=H=>{const ee=N.value,{proxyConfig:ce}=e,{computeFilterOpts:Me}=ee.getComputeMaps(),Ie=O.value;Me.value.remote&&(c.filterData=H.filterList,ce&&ft(Ie)&&(c.tablePage.currentPage=1,he.commitProxy("query").then(et=>{he.dispatchEvent("proxy-query",et,H.$event)}))),he.dispatchEvent("filter-change",H,H.$event)},ae=H=>{const{proxyConfig:ee}=e,ce=O.value;ee&&ft(ce)&&he.commitProxy("reload").then(Me=>{he.dispatchEvent("proxy-query",Object.assign(Object.assign({},Me),{isReload:!0}),H.$event)}),he.dispatchEvent("form-submit",H,H.$event)},ve=H=>{const{proxyConfig:ee}=e,{$event:ce}=H,Me=O.value,Ie=N.value;ee&&ft(Me)&&(Ie.clearScroll(),he.commitProxy("reload").then(Xe=>{he.dispatchEvent("proxy-query",Object.assign(Object.assign({},Xe),{isReload:!0}),ce)})),he.dispatchEvent("form-reset",H,ce)},se=H=>{he.dispatchEvent("form-submit-invalid",H,H.$event)},J=H=>{const{$event:ee}=H;pe(()=>C.recalculate(!0)),he.dispatchEvent("form-toggle-collapse",H,ee),he.dispatchEvent("form-collapse",H,ee)},Se=H=>{const{isZMax:ee}=c;return(H?!ee:ee)&&(c.isZMax=!ee,c.tZindex<ji()&&(c.tZindex=zi())),pe().then(()=>C.recalculate(!0)).then(()=>(setTimeout(()=>C.recalculate(!0),15),c.isZMax))},ye=(H,ee)=>{const ce=H[ee];if(ce)if(s.isString(ce)){if(u[ce])return u[ce];Ye("vxe.error.notSlot",[ce])}else return ce;return null},He=()=>{const{formConfig:H,proxyConfig:ee}=e,{formData:ce}=c,Me=O.value,Ie=ne.value;if(H&&ft(Ie)||u.form){let Xe=[];if(u.form)Xe=u.form({$grid:k});else if(Ie.items){const et={};if(!Ie.inited){Ie.inited=!0;const nt=Me.beforeItem;Me&&nt&&Ie.items.forEach(ze=>{nt({$grid:k,item:ze})})}Ie.items.forEach(nt=>{s.each(nt.slots,ze=>{s.isFunction(ze)||u[ze]&&(et[ze]=u[ze])})}),y&&Xe.push(g(y,Object.assign(Object.assign({ref:G},Object.assign({},Ie,{data:ee&&ft(Me)&&Me.form?ce:Ie.data})),{onSubmit:ae,onReset:ve,onSubmitInvalid:se,onCollapse:J}),et))}return g("div",{ref:_,key:"form",class:"vxe-grid--form-wrapper"},Xe)}return Ke()},Ue=()=>{const{toolbarConfig:H}=e,ee=X.value;if(H&&ft(ee)||u.toolbar){let ce=[];if(u.toolbar)ce=u.toolbar({$grid:k});else{const Me=ee.slots;let Ie,Xe;const et={};Me&&(Ie=ye(Me,"buttons"),Xe=ye(Me,"tools"),Ie&&(et.buttons=Ie),Xe&&(et.tools=Xe)),ce.push(g(Nr,Object.assign({ref:K},ee),et))}return g("div",{ref:T,key:"toolbar",class:"vxe-grid--toolbar-wrapper"},ce)}return Ke()},qe=()=>u.top?g("div",{ref:I,key:"top",class:"vxe-grid--top-wrapper"},u.top({$grid:k})):Ke(),Ze=()=>{const H=u.left;return H?g("div",{class:"vxe-grid--left-wrapper"},H({$grid:k})):Ke()},ht=()=>{const H=u.right;return H?g("div",{class:"vxe-grid--right-wrapper"},H({$grid:k})):Ke()},xt=()=>{const{proxyConfig:H}=e,ee=Ee.value,ce=O.value,Me=Object.assign({},Ne),Ie=u.empty,Xe=u.loading,et=u.rowDragIcon||u["row-drag-icon"],nt=u.columnDragIcon||u["column-drag-icon"];H&&ft(ce)&&(ce.sort&&(Me.onSortChange=we),ce.filter&&(Me.onFilterChange=P));const ze={};return Ie&&(ze.empty=Ie),Xe&&(ze.loading=Xe),et&&(ze.rowDragIcon=et),nt&&(ze.columnDragIcon=nt),g("div",{class:"vxe-grid--table-wrapper"},[g(jr,Object.assign(Object.assign({ref:N},ee),Me),ze)])},gt=()=>u.bottom?g("div",{ref:j,key:"bottom",class:"vxe-grid--bottom-wrapper"},u.bottom({$grid:k})):Ke(),st=()=>{const{proxyConfig:H,pagerConfig:ee}=e,ce=O.value,Me=Y.value;if(ee&&ft(Me)||u.pager){let Ie=[];if(u.pager)Ie=u.pager({$grid:k});else{const Xe=Me.slots,et={};let nt,ze;Xe&&(nt=ye(Xe,"left"),ze=ye(Xe,"right"),nt&&(et.left=nt),ze&&(et.right=ze)),D&&Ie.push(g(D,Object.assign(Object.assign(Object.assign({ref:V},Me),H&&ft(ce)?c.tablePage:{}),{onPageChange:de}),et))}return g("div",{ref:te,key:"pager",class:"vxe-grid--pager-wrapper"},Ie)}return Ke()},it=H=>{const ee=[];return H.forEach(ce=>{switch(ce){case"Form":ee.push(He());break;case"Toolbar":ee.push(Ue());break;case"Top":ee.push(qe());break;case"Table":ee.push(g("div",{key:"table",class:"vxe-grid--table-container"},[Ze(),xt(),ht()]));break;case"Bottom":ee.push(gt());break;case"Pager":ee.push(st());break;default:Ye("vxe.error.notProp",[`layouts -> ${ce}`]);break}}),ee},ut=()=>{const H=Ve.value,{headKeys:ee,bodyKeys:ce,footKeys:Me}=H,Ie=u.asideLeft||u["aside-left"],Xe=u.asideRight||u["aside-right"];return[g("div",{class:"vxe-grid--layout-header-wrapper"},it(ee)),g("div",{class:"vxe-grid--layout-body-wrapper"},[Ie?g("div",{class:"vxe-grid--layout-aside-left-wrapper"},Ie({})):Pi(k),g("div",{class:"vxe-grid--layout-body-content-wrapper"},it(ce)),Xe?g("div",{class:"vxe-grid--layout-aside-right-wrapper"},Xe({})):Pi(k)]),g("div",{class:"vxe-grid--layout-footer-wrapper"},it(Me))]},Ne={};Ts.forEach(H=>{const ee=s.camelCase(`on-${H}`);Ne[ee]=(...ce)=>w(H,...ce)});const Le=()=>{const{proxyConfig:H,formConfig:ee}=e,{proxyInited:ce}=c,Me=O.value,Ie=ne.value;if(H&&ft(Me)){if(ee&&ft(Ie)&&Me.form&&Ie.items){const Xe={};Ie.items.forEach(et=>{const{field:nt,itemRender:ze}=et;if(nt){let pt=null;if(ze){const{defaultValue:Lt}=ze;s.isFunction(Lt)?pt=Lt({item:et}):s.isUndefined(Lt)||(pt=Lt)}Xe[nt]=pt}}),c.formData=Xe}ce||(c.proxyInited=!0,Me.autoLoad!==!1&&pe().then(()=>he.commitProxy("_init")).then(Xe=>{he.dispatchEvent("proxy-query",Object.assign(Object.assign({},Xe),{isInited:!0}),new Event("init"))}))}},ke=H=>{const ee=ie.value;xs.hasKey(H,au.ESCAPE)&&c.isZMax&&ee.escRestore!==!1&&_e.triggerZoomEvent(H)},he={dispatchEvent:(H,ee,ce)=>{w(H,iu(ce,{$grid:k},ee))},getEl(){return v.value},commitProxy(H,...ee){const{toolbarConfig:ce,pagerConfig:Me,editRules:Ie,validConfig:Xe}=e,{tablePage:et}=c,nt=q.value,ze=S.value,pt=O.value,Lt=Y.value,mt=X.value,{beforeQuery:Ct,afterQuery:$t,beforeDelete:It,afterDelete:Ht,beforeSave:mo,afterSave:Mt,ajax:Zt={}}=pt,$o=pt.response||pt.props||{},wt=N.value,xo=Z();let io=null,kt=null;if(s.isString(H)){const{buttons:Pt}=mt,so=ce&&ft(mt)&&Pt?s.findTree(Pt,Oo=>Oo.code===H,{children:"dropdowns"}):null;io=so?so.item:null,kt=H}else io=H,kt=io.code;const ro=io?io.params:null;switch(kt){case"insert":return wt.insert({});case"insert_edit":return wt.insert({}).then(({row:Pt})=>wt.setEditRow(Pt));case"insert_actived":return wt.insert({}).then(({row:Pt})=>wt.setEditRow(Pt));case"mark_cancel":re(kt);break;case"remove":return be(kt,"vxe.grid.removeSelectRecord",()=>wt.removeCheckboxRow());case"import":wt.importData(ro);break;case"open_import":wt.openImport(ro);break;case"export":wt.exportData(ro);break;case"open_export":wt.openExport(ro);break;case"reset_custom":return wt.resetCustom(!0);case"_init":case"reload":case"query":{const Pt=Zt.query,so=Zt.querySuccess,Oo=Zt.queryError;if(Pt){const ao=kt==="_init",Co=kt==="reload";let Do=[],Dt=[],dt={};if(Me&&((ao||Co)&&(et.currentPage=1),ft(Lt)&&(dt=Object.assign({},et))),ao){let Ut=null;if(wt){const{computeSortOpts:Qt}=wt.getComputeMaps();Ut=Qt.value.defaultSort}Ut&&(s.isArray(Ut)||(Ut=[Ut]),Do=Ut.map(Qt=>({field:Qt.field,property:Qt.field,order:Qt.order}))),wt&&(Dt=wt.getCheckedFilters())}else wt&&(Co?wt.clearAll():(Do=wt.getSortColumns(),Dt=wt.getCheckedFilters()));const Fo={code:kt,button:io,isInited:ao,isReload:Co,$grid:k,page:dt,sort:Do.length?Do[0]:{},sorts:Do,filters:Dt,form:xo,options:Pt};return c.sortData=Do,c.filterData=Dt,c.tableLoading=!0,Promise.resolve((Ct||Pt)(Fo,...ee)).then(Ut=>{if(c.tableLoading=!1,Ut)if(Me&&ft(Lt)){const Qt=$o.total,po=(s.isFunction(Qt)?Qt({data:Ut,$grid:k}):s.get(Ut,Qt||"page.total"))||0;et.total=s.toNumber(po);const yl=$o.result;c.tableData=(s.isFunction(yl)?yl({data:Ut,$grid:k}):s.get(Ut,yl||"result"))||[];const Pl=Math.max(Math.ceil(po/et.pageSize),1);et.currentPage>Pl&&(et.currentPage=Pl)}else{const Qt=$o.list;c.tableData=(Qt?s.isFunction(Qt)?Qt({data:Ut,$grid:k}):s.get(Ut,Qt):Ut)||[]}else c.tableData=[];return $t&&$t(Fo,...ee),so&&so(Object.assign(Object.assign({},Fo),{response:Ut})),{status:!0}}).catch(Ut=>(c.tableLoading=!1,Oo&&Oo(Object.assign(Object.assign({},Fo),{response:Ut})),{status:!1}))}else Ye("vxe.error.notFunc",["proxy-config.ajax.query"]);break}case"delete":{const Pt=Zt.delete,so=Zt.deleteSuccess,Oo=Zt.deleteError;if(Pt){const ao=C.getCheckboxRecords(),Co=ao.filter(dt=>!wt.isInsertByRow(dt)),Dt={$grid:k,code:kt,button:io,body:{removeRecords:Co},form:xo,options:Pt};if(ao.length)return be(kt,"vxe.grid.deleteSelectRecord",()=>Co.length?(c.tableLoading=!0,Promise.resolve((It||Pt)(Dt,...ee)).then(dt=>(c.tableLoading=!1,wt.setPendingRow(Co,!1),ze&&ue.modal&&ue.modal.message({content:ge(dt,"vxe.grid.delSuccess"),status:"success"}),Ht?Ht(Dt,...ee):he.commitProxy("query"),so&&so(Object.assign(Object.assign({},Dt),{response:dt})),{status:!0})).catch(dt=>(c.tableLoading=!1,ze&&ue.modal&&ue.modal.message({id:kt,content:ge(dt,"vxe.grid.operError"),status:"error"}),Oo&&Oo(Object.assign(Object.assign({},Dt),{response:dt})),{status:!1}))):wt.remove(ao));nt&&ue.modal&&ue.modal.message({id:kt,content:hn("vxe.grid.selectOneRecord"),status:"warning"})}else Ye("vxe.error.notFunc",["proxy-config.ajax.delete"]);break}case"save":{const Pt=Zt.save,so=Zt.saveSuccess,Oo=Zt.saveError;if(Pt){const ao=wt.getRecordset(),{insertRecords:Co,removeRecords:Do,updateRecords:Dt,pendingRecords:dt}=ao,Fo={$grid:k,code:kt,button:io,body:ao,form:xo,options:Pt};Co.length&&(ao.pendingRecords=dt.filter(Qt=>wt.findRowIndexOf(Co,Qt)===-1)),dt.length&&(ao.insertRecords=Co.filter(Qt=>wt.findRowIndexOf(dt,Qt)===-1));let Ut=Promise.resolve();return Ie&&(Ut=wt[Xe&&Xe.msgMode==="full"?"fullValidate":"validate"](ao.insertRecords.concat(Dt))),Ut.then(Qt=>{if(!Qt){if(ao.insertRecords.length||Do.length||Dt.length||ao.pendingRecords.length)return c.tableLoading=!0,Promise.resolve((mo||Pt)(Fo,...ee)).then(po=>(c.tableLoading=!1,wt.clearPendingRow(),ze&&ue.modal&&ue.modal.message({content:ge(po,"vxe.grid.saveSuccess"),status:"success"}),Mt?Mt(Fo,...ee):he.commitProxy("query"),so&&so(Object.assign(Object.assign({},Fo),{response:po})),{status:!0})).catch(po=>(c.tableLoading=!1,ze&&ue.modal&&ue.modal.message({id:kt,content:ge(po,"vxe.grid.operError"),status:"error"}),Oo&&Oo(Object.assign(Object.assign({},Fo),{response:po})),{status:!1}));nt&&ue.modal&&ue.modal.message({id:kt,content:hn("vxe.grid.dataUnchanged"),status:"info"})}})}else Ye("vxe.error.notFunc",["proxy-config.ajax.save"]);break}default:{const Pt=nu.get(kt);if(Pt){const so=Pt.tableCommandMethod||Pt.commandMethod;so?so({code:kt,button:io,$grid:k,$table:wt},...ee):Ye("vxe.error.notCommands",[kt])}}}return pe()},zoom(){return c.isZMax?he.revert():he.maximize()},isMaximized(){return c.isZMax},maximize(){return Se(!0)},revert(){return Se()},getFormData:Z,getFormItems(H){const ee=ne.value,{formConfig:ce}=e,{items:Me}=ee,Ie=[];return s.eachTree(ce&&ft(ee)&&Me?Me:[],Xe=>{Ie.push(Xe)},{children:"children"}),s.isUndefined(H)?Ie:Ie[H]},getProxyInfo(){const H=N.value;if(e.proxyConfig){const{sortData:ee}=c;return{data:c.tableData,filter:c.filterData,form:Z(),sort:ee.length?ee[0]:{},sorts:ee,pager:c.tablePage,pendingRecords:H?H.getPendingRecords():[]}}return null}},_e={extendTableMethods:le,callSlot(H,ee){return H&&(s.isString(H)&&(H=u[H]||null),s.isFunction(H))?So(H(ee)):[]},getExcludeHeight(){const{isZMax:H}=c,ee=v.value,ce=_.value,Me=T.value,Ie=I.value,Xe=j.value,et=te.value;return(H?0:Es(ee.parentNode))+Es(ee)+Xn(ce)+Xn(Me)+Xn(Ie)+Xn(Xe)+Xn(et)},getParentHeight(){const H=v.value;return H?(c.isZMax?$r().visibleHeight:s.toNumber(getComputedStyle(H.parentNode).height))-_e.getExcludeHeight():0},triggerToolbarCommitEvent(H,ee){const{code:ce}=H;return he.commitProxy(H,ee).then(Me=>{ce&&Me&&Me.status&&["query","reload","delete","save"].includes(ce)&&he.dispatchEvent(ce==="delete"||ce==="save"?`proxy-${ce}`:"proxy-query",Object.assign(Object.assign({},Me),{isReload:ce==="reload"}),ee)})},triggerToolbarBtnEvent(H,ee){_e.triggerToolbarCommitEvent(H,ee),he.dispatchEvent("toolbar-button-click",{code:H.code,button:H},ee)},triggerToolbarTolEvent(H,ee){_e.triggerToolbarCommitEvent(H,ee),he.dispatchEvent("toolbar-tool-click",{code:H.code,tool:H},ee)},triggerZoomEvent(H){he.zoom(),he.dispatchEvent("zoom",{type:c.isZMax?"max":"revert"},H)}};Object.assign(k,C,he,_e);const lt=$e(0);yt(()=>e.columns?e.columns.length:-1,()=>{lt.value++}),yt(()=>e.columns,()=>{lt.value++}),yt(lt,()=>{pe(()=>k.loadColumn(e.columns||[]))}),yt(()=>e.toolbarConfig,()=>{z()}),yt(Oe,()=>{U()}),yt(()=>e.proxyConfig,()=>{Le()}),ru.forEach(H=>{const{setupGrid:ee}=H;if(ee){const ce=ee(k);ce&&s.isObject(ce)&&Object.assign(k,ce)}}),U(),Ul(()=>{pe(()=>{const{columns:H}=e;e.formConfig&&(y||Ye("vxe.error.reqComp",["vxe-form"])),e.pagerConfig&&(D||Ye("vxe.error.reqComp",["vxe-pager"])),H&&H.length&&k.loadColumn(H),z(),Le()}),xs.on(k,"keydown",ke)}),Gl(()=>{xs.off(k,"keydown")});const rt=()=>{const H=p.value,ee=Re.value;return g("div",{ref:v,class:["vxe-grid",{[`size--${H}`]:H,"is--animat":!!e.animat,"is--round":e.round,"is--maximize":c.isZMax,"is--loading":e.loading||c.tableLoading}],style:ee},ut())};return k.renderVN=rt,Yl("$xeGrid",k),k},render(){return this.renderVN()}}),ks=Object.assign({},En,{install(e){e.component(En.name,En)}});ue.dynamicApp&&ue.dynamicApp.component(En.name,En);ue.component(En);const uu=ks,fu={vxe:{base:{pleaseInput:"请输入",pleaseSelect:"请选择",comma:"，",fullStop:"。"},loading:{text:"加载中..."},error:{downErr:"下载失败",errLargeData:"当绑定的数据量过大时，应该请使用 {0}，否则可能会出现卡顿",groupFixed:"如果使用分组表头，冻结列必须按组设置",groupMouseRange:'分组表头与 "{0}" 不能同时使用，这可能会出现错误',groupTag:'分组列头应该使用 "{0}" 而不是 "{1}"，这可能会出现错误',scrollErrProp:'启用虚拟滚动后不支持该参数 "{0}"',errConflicts:'参数 "{0}" 与 "{1}" 有冲突',notSupportProp:'当启用参数 "{0}" 时不支持 "{1}"，应该为 "{2}"，否则将会出现错误',unableInsert:"无法插入到指定位置，请检查参数是否正确",useErr:'安装 "{0}" 模块时发生错误，可能顺序不正确，依赖的模块需要在 Table 之前安装',barUnableLink:"工具栏无法关联表格",expandContent:'展开行的插槽应该是 "content"，请检查是否正确',reqComp:'缺少 "{0}" 组件，请检查是否正确安装。 https://vxeui.com/#/start/useGlobal',reqModule:'缺少 "{0}" 模块',reqProp:'缺少必要的 "{0}" 参数，这可能会导致出现错误',emptyProp:'参数 "{0}" 不允许为空',errProp:'不支持的参数 "{0}"，可能为 "{1}"',colRepet:'column.{0}="{1}" 重复了，这可能会导致某些功能无法使用',notFunc:'方法 "{0}" 不存在',errFunc:'参数 "{0}" 不是一个方法',notValidators:'全局校验 "{0}" 不存在',notFormats:'全局格式化 "{0}" 不存在',notCommands:'全局指令 "{0}" 不存在',notSlot:'插槽 "{0}" 不存在',noTree:'树结构不支持 "{0}"',notProp:'不支持的参数 "{0}"',checkProp:'当数据量过大时可能会导致复选框卡顿，建议设置参数 "{0}" 提升渲染速度',coverProp:'"{0}" 的参数 "{1}" 重复定义，这可能会出现错误',uniField:'字段名 "{0}" 重复定义，这可能会出现错误',repeatKey:'主键重复 {0}="{1}"，这可能会出现错误',delFunc:'方法 "{0}" 已废弃，请使用 "{1}"',delProp:'参数 "{0}" 已废弃，请使用 "{1}"',delEvent:'事件 "{0}" 已废弃，请使用 "{1}"',removeProp:'参数 "{0}" 已废弃，不建议使用，这可能会导致出现错误',errFormat:'全局的格式化内容应该使用 "VXETable.formats" 定义，挂载 "formatter={0}" 的方式已不建议使用',notType:'不支持的文件类型 "{0}"',notExp:"该浏览器不支持导入/导出功能",impFields:"导入失败，请检查字段名和数据格式是否正确",treeNotImp:"树表格不支持导入",treeCrossDrag:"只能拖拽第一层级",treeDragChild:"父级不能拖拽到自己的子级中",reqPlugin:'扩展插件未安装 "{1}" https://vxeui.com/other{0}/#/{1}/install'},table:{emptyText:"暂无数据",allTitle:"全选/取消",seqTitle:"序号",actionTitle:"操作",confirmFilter:"筛选",resetFilter:"重置",allFilter:"全部",sortAsc:"升序：最低到最高",sortDesc:"降序：最高到最低",filter:"对所选的列启用筛选",impSuccess:"成功导入 {0} 条记录",expLoading:"正在导出中",expSuccess:"导出成功",expError:"导出失败",expFilename:"导出_{0}",expOriginFilename:"导出_源_{0}",customTitle:"列设置",customAll:"全部",customConfirm:"确认",customClose:"关闭",customCancel:"取消",customRestore:"恢复默认",maxFixedCol:"最大冻结列的数量不能超过 {0} 个",dragTip:"移动：{0}",resizeColTip:"宽：{0} 像素",resizeRowTip:"高：{0} 像素"},grid:{selectOneRecord:"请至少选择一条记录！",deleteSelectRecord:"您确定要删除所选记录吗？",removeSelectRecord:"您确定要移除所选记录吗？",dataUnchanged:"数据未改动！",delSuccess:"成功删除所选记录！",saveSuccess:"保存成功！",operError:"发生错误，操作失败！"},select:{search:"搜索",loadingText:"加载中",emptyText:"暂无数据"},pager:{goto:"前往",gotoTitle:"页数",pagesize:"{0}条/页",total:"共 {0} 条记录",pageClassifier:"页",homePage:"首页",homePageTitle:"首页",prevPage:"上一页",prevPageTitle:"上一页",nextPage:"下一页",nextPageTitle:"下一页",prevJump:"向上跳页",prevJumpTitle:"向上跳页",nextJump:"向下跳页",nextJumpTitle:"向下跳页",endPage:"末页",endPageTitle:"末页"},alert:{title:"系统提示"},button:{confirm:"确认",cancel:"取消",clear:"清除"},filter:{search:"搜索"},custom:{cstmTitle:"列设置",cstmRestore:"恢复默认",cstmCancel:"取消",cstmConfirm:"确定",cstmConfirmRestore:"请确认是否恢复成默认列配置？",cstmDragTarget:"移动：{0}",setting:{colSort:"排序",sortHelpTip:"点击并拖动图标可以调整列的排序",colTitle:"列标题",colResizable:"列宽（像素）",colVisible:"是否显示",colFixed:"冻结列",colFixedMax:"冻结列（最多 {0} 列）",fixedLeft:"左侧",fixedUnset:"不设置",fixedRight:"右侧"}},import:{modes:{covering:"覆盖方式（直接覆盖表格数据）",insert:"底部追加（在表格的底部追加新数据）",insertTop:"顶部追加（在表格的顶部追加新数据）",insertBottom:"底部追加（在表格的底部追加新数据）"},impTitle:"导入数据",impFile:"文件名",impSelect:"选择文件",impType:"文件类型",impOpts:"参数设置",impMode:"导入模式",impConfirm:"导入",impCancel:"取消"},export:{types:{csv:"CSV (逗号分隔)(*.csv)",html:"网页(*.html)",xml:"XML 数据(*.xml)",txt:"文本文件(制表符分隔)(*.txt)",xls:"Excel 97-2003 工作簿(*.xls)",xlsx:"Excel 工作簿(*.xlsx)",pdf:"PDF (*.pdf)"},modes:{empty:"空数据",current:"当前数据（当前页的数据）",selected:"选中数据（当前页选中的数据）",all:"全量数据（包括所有分页的数据）"},printTitle:"打印数据",expTitle:"导出数据",expName:"文件名",expNamePlaceholder:"请输入文件名",expSheetName:"标题",expSheetNamePlaceholder:"请输入标题",expType:"保存类型",expMode:"选择数据",expCurrentColumn:"全部字段",expColumn:"选择字段",expOpts:"参数设置",expOptHeader:"表头",expHeaderTitle:"是否需要表头",expOptFooter:"表尾",expFooterTitle:"是否需要表尾",expOptColgroup:"分组表头",expColgroupTitle:"如果存在，则支持带有分组结构的表头",expOptMerge:"合并",expMergeTitle:"如果存在，则支持带有合并结构的单元格",expOptAllExpand:"展开层级",expAllExpandTitle:"如果存在，则支持将带有层级结构的数据全部展开",expOptUseStyle:"样式",expUseStyleTitle:"如果存在，则支持带样式的单元格",expOptOriginal:"源数据",expOriginalTitle:"如果为源数据，则支持导入到表格中",expPrint:"打印",expConfirm:"导出",expCancel:"取消"},modal:{errTitle:"错误提示",zoomMin:"最小化",zoomIn:"最大化",zoomOut:"还原",close:"关闭",miniMaxSize:"最小化窗口的数量不能超过 {0} 个",footPropErr:"show-footer 仅用于启用表尾，需配合 show-confirm-button | show-cancel-button | 插槽使用"},drawer:{close:"关闭"},form:{folding:"收起",unfolding:"展开"},toolbar:{import:"导入",export:"导出",print:"打印",refresh:"刷新",zoomIn:"全屏",zoomOut:"还原",custom:"列设置",customAll:"全部",customConfirm:"确认",customRestore:"重置",fixedLeft:"冻结在左侧",fixedRight:"冻结在右侧",cancelFixed:"取消冻结列"},input:{date:{m1:"01 月",m2:"02 月",m3:"03 月",m4:"04 月",m5:"05 月",m6:"06 月",m7:"07 月",m8:"08 月",m9:"09 月",m10:"10 月",m11:"11 月",m12:"12 月",quarterLabel:"{0} 年",monthLabel:"{0} 年",dayLabel:"{0} 年 {1}",labelFormat:{date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyy 年第 WW 周",month:"yyyy-MM",quarter:"yyyy 年第 q 季度",year:"yyyy"},weeks:{w:"周",w0:"周日",w1:"周一",w2:"周二",w3:"周三",w4:"周四",w5:"周五",w6:"周六"},months:{m0:"一月",m1:"二月",m2:"三月",m3:"四月",m4:"五月",m5:"六月",m6:"七月",m7:"八月",m8:"九月",m9:"十月",m10:"十一月",m11:"十二月"},quarters:{q1:"第一季度",q2:"第二季度",q3:"第三季度",q4:"第四季度"}}},numberInput:{currencySymbol:"¥"},imagePreview:{popupTitle:"预览",operBtn:{zoomOut:"缩小",zoomIn:"放大",pctFull:"等比例缩放",pct11:"显示原始尺寸",rotateLeft:"向左旋转",rotateRight:"向右旋转",print:"点击打印图片",download:"点击下载图片"}},upload:{fileBtnText:"点击或拖拽上传",imgBtnText:"点击或拖拽上传",dragPlaceholder:"请把文件拖放到这个区域即可上传",imgSizeHint:"单张{0}",imgCountHint:"最多{0}张",fileTypeHint:"支持 {0} 文件类型",fileSizeHint:"单个文件大小不超过{0}",fileCountHint:"最多可上传{0}个文件",uploadTypeErr:"文件类型不匹配！",overCountErr:"最多只能选择{0}个文件！",overCountExtraErr:"已超出最大数量{0}个，超出的{1}个文件将被忽略！",overSizeErr:"文件大小最大不能超过{0}！",reUpload:"重新上传",uploadProgress:"上传中 {0}%",uploadErr:"上传失败",uploadSuccess:"上传成功",moreBtnText:"更多（{0}）",viewItemTitle:"点击查看",morePopup:{readTitle:"查看列表",imageTitle:"上传图片",fileTitle:"上传文件"}},empty:{defText:"暂无数据"},colorPicker:{clear:"清除",confirm:"确认",copySuccess:"已复制到剪贴板：{0}"},formDesign:{formName:"表单名称",defFormTitle:"未命名的表单",widgetPropTab:"控件属性",widgetFormTab:"表单属性",error:{wdFormUni:"该类型的控件在表单中只允许添加一个",wdSubUni:"该类型的控件在子表中只允许添加一个"},styleSetting:{btn:"样式设置",title:"表单的样式设置",layoutTitle:"控件布局",verticalLayout:"上下布局",horizontalLayout:"横向布局",styleTitle:"标题样式",boldTitle:"标题加粗",fontBold:"加粗",fontNormal:"常规",colonTitle:"显示冒号",colonVisible:"显示",colonHidden:"隐藏",alignTitle:"对齐方式",widthTitle:"标题宽度",alignLeft:"居左",alignRight:"居右",unitPx:"像素",unitPct:"百分比"},widget:{group:{base:"基础控件",layout:"布局控件",system:"系统控件",module:"模块控件",chart:"图表控件",advanced:"高级控件"},copyTitle:"副本_{0}",component:{input:"输入框",textarea:"文本域",select:"下拉选择",row:"一行多列",title:"标题",text:"文本",subtable:"子表",VxeSwitch:"是/否",VxeInput:"输入框",VxeNumberInput:"数字",VxeDatePicker:"日期",VxeTextarea:"文本域",VxeSelect:"下拉选择",VxeTreeSelect:"树形选择",VxeRadioGroup:"单选框",VxeCheckboxGroup:"复选框",VxeUploadFile:"文件",VxeUploadImage:"图片",VxeRate:"评分",VxeSlider:"滑块"}},widgetProp:{name:"控件名称",placeholder:"提示语",required:"必填校验",multiple:"允许多选",displaySetting:{name:"显示设置",pc:"电脑端",mobile:"手机端",visible:"显示",hidden:"隐藏"},dataSource:{name:"数据源",defValue:"选项{0}",addOption:"添加选项",batchEditOption:"批量编辑",batchEditTip:"每行对应一个选项，支持从表格、Excel、WPS 中直接复制粘贴。",batchEditSubTip:"每行对应一个选项，如果是分组，子项可以是空格或制表键开头，支持从表格、Excel、WPS 中直接复制粘贴。",buildOption:"生成选项"},rowProp:{colSize:"列数",col2:"两列",col3:"三列",col4:"四列",col6:"六列",layout:"布局"},textProp:{name:"内容",alignTitle:"对齐方式",alignLeft:"居左",alignCenter:"居中",alignRight:"居右",colorTitle:"字体颜色",sizeTitle:"字体大小",boldTitle:"字体加粗",fontNormal:"常规",fontBold:"加粗"},subtableProp:{seqTitle:"序号",showSeq:"显示序号",showCheckbox:"允许多选",errSubDrag:"子表不支持该控件，请使用其他控件",colPlace:"将控件拖拽进来"},uploadProp:{limitFileCount:"文件数量限制",limitFileSize:"文件大小限制",multiFile:"允许上传多个文件",limitImgCount:"图片数量限制",limitImgSize:"图片大小限制",multiImg:"允许上传多张图片"}}},listDesign:{fieldSettingTab:"字段设置",listSettingTab:"参数设置",searchTitle:"查询条件",listTitle:"列表字段",searchField:"查询字段",listField:"列表字段",activeBtn:{ActionButtonUpdate:"编辑",ActionButtonDelete:"删除"},search:{addBtn:"编辑",emptyText:"未配置查询条件",editPopupTitle:"编辑查询字段"},searchPopup:{colTitle:"标题",saveBtn:"保存"}},text:{copySuccess:"已复制到剪贴板",copyError:"当前环境不支持该操作"},countdown:{formats:{yyyy:"年",MM:"月",dd:"天",HH:"时",mm:"分",ss:"秒"}},plugins:{extendCellArea:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",selectErr:"无法操作指定区域的单元格",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作",cpInvalidErr:"该操作无法进行，您选择的区域中存在被禁止的列（{0}）"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},body:{row:"行：{0}",col:"列：{0}"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},filterComplexInput:{menus:{fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧"},cases:{equal:"等于",gt:"大于",lt:"小于",begin:"开头是",endin:"结尾是",include:"包含",isSensitive:"区分大小写"}},filterCombination:{menus:{clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},empty:"(空白)",notData:"无匹配项"}},pro:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},renderer:{search:"搜索",cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},combination:{menus:{clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结到左侧",fixedRight:"冻结到右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},empty:"(空白)",notData:"无匹配项"}}}},pu=[Ms,Ds,ks,jr,Nr];function hu(e,l){ue.setConfig(l),pu.forEach(i=>i.install(e))}if(!ue.hasLanguage("zh-CN")){const e="zh-CN";ue.setI18n(e,fu),ue.setLanguage(e)}ue.setTheme("light");const vu=Object.freeze(Object.defineProperty({__proto__:null,Colgroup:Jc,Column:Qc,Grid:uu,Table:eu,Toolbar:lu,VXETable:Dc,VxeColgroup:Ds,VxeColumn:Ms,VxeGrid:ks,VxeTable:jr,VxeToolbar:Nr,VxeUI:ue,_t:qi,clipboard:Rc,commands:Ec,config:_i,formats:wc,getConfig:dc,getI18n:gc,getIcon:fc,getTheme:ac,globalEvents:mc,globalResize:bc,hooks:Oc,install:hu,interceptor:yc,log:Sc,menus:Cc,modal:kc,print:Ic,readFile:Fc,renderer:xc,saveFile:Tc,setConfig:cc,setI18n:hc,setIcon:uc,setLanguage:pc,setTheme:ic,setup:Ni,t:Wi,use:Mc,validators:vc,version:Ss},Symbol.toStringTag,{value:"Module"}));export{vu as V};
