const $="undefined",R=Promise,de=e=>R.resolve(e),pe=e=>R.reject(e),S=Object,fe=RegExp,m=void 0,H=null,E=!0,g=!1,I=(e,t,s)=>e.then(t,s),me=(e,t)=>e.catch(t),he=(e,t)=>e.finally(t),L=(e,t,s)=>JSON.stringify(e,t,s),ye=e=>JSON.parse(e),U=(e,t=0)=>setTimeout(e,t),ge=e=>clearTimeout(e),J=e=>S.keys(e),Te=e=>S.values(e),_=(e,t)=>e.forEach(t),V=(e,...t)=>e.push(...t),v=(e,t)=>e.map(t),Q=(e,t)=>e.filter(t),G=e=>e.shift(),Se=(e,t,s=0,...n)=>e.splice(t,s,...n),W=e=>e.length,X=e=>Array.isArray(e),we=(e,t)=>delete e[t],b=e=>typeof e,xe=(e,t)=>e.includes(t),Ce=typeof window===$&&(typeof process!==$?typeof process.cwd=="function":typeof Deno!==$),k="memory",Y="restore",C=()=>{},$e=e=>e,T=e=>b(e)==="function",z=e=>b(e)==="number"&&!Number.isNaN(e),Z=e=>b(e)==="string",B=e=>S.prototype.toString.call(e),j=e=>B(e)==="[object Object]",ee=(e,t)=>e instanceof t,q=e=>e?e.getTime():Date.now(),te=e=>e.context,K=e=>e.config,se=e=>e.options,Ee=e=>se(te(e)),Oe=e=>{const{params:t,headers:s}=K(e);return L([e.type,e.url,t,e.data,s])},Re=e=>e.key,ve=(e,t,s=[])=>{const n=T(e)?e(...s):e;return t(!!n.key,"hook handler must be a method instance or a function that returns method instance"),n},ne=e=>{const t=B(e);return/^\[object (Blob|FormData|ReadableStream|URLSearchParams)\]$/i.test(t)||ee(e,ArrayBuffer)},be=(e,...t)=>S.assign(e,...t),je=(e,...t)=>{const s={};for(const n in e)t.includes(n)||(s[n]=e[n]);return s};function Fe(){let e,t;return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}const Ae=e=>{const{cacheFor:t}=K(e),s=a=>z(a)?q()+a:q(a||m);let n=k,o=()=>0,c=g,d=m;const i=T(t);if(!i){let a=t;if(j(t)){const{mode:p=k,expire:y,tag:u}=t||{};n=p,c=p===Y,d=u?u.toString():m,a=y}o=p=>s(T(a)?a({method:e,mode:p}):a)}return{f:t,c:i,e:o,m:n,s:c,t:d}},F=(e,...t)=>new e(...t),Ne=(e,t=[])=>T(e)?e(...t):e,Pe=(e,t)=>T(e)?e:[g,H].includes(e)?C:t,Me=(e=0)=>{let t=m;return s=>{t&&clearTimeout(t),t=U(s,e)}},ke=(e=g)=>{const t=[];let s=m,n=!1;const o=async()=>{for(n=!0;W(t)>0;){const i=G(t);i&&await i()}s&&s(),n=!1};return{addQueue:i=>F(R,(a,p)=>{V(t,()=>I(i(),a,u=>{e?a(m):p(u)})),n||o()}),onComplete:i=>{s=i}}},oe="$a.",qe=(e,t)=>oe+e+t,De=(e,t,s)=>{e=e.endsWith("/")?e.slice(0,-1):e,t!==""&&(t=t.match(/^(\/|https?:\/\/)/)?t:`/${t}`);const n=e+t,o=v(Q(J(s),c=>s[c]!==m),c=>`${c}=${s[c]}`).join("&");return o?+n.includes("?")?`${n}&${o}`:`${n}?${o}`:n},D=e=>{if(X(e))return v(e,D);if(j(e)&&e.constructor===S){const t={};return _(J(e),s=>{t[s]=D(e[s])}),t}return e};class re extends Error{constructor(t,s,n){super(s+(n?`

For detailed: https://alova.js.org/error#${n}`:"")),this.name=`[alova${t?`/${t}`:""}]`}}const He=(e="")=>(t,s,n)=>{if(!t)throw F(re,e,s,n)},Le=()=>{const e={};return{eventMap:e,on(t,s){const n=e[t]=e[t]||[];return V(n,s),()=>{e[t]=Q(n,o=>o!==s)}},off(t,s){const n=e[t];if(n)if(s){const o=n.indexOf(s);o>-1&&n.splice(o,1)}else delete e[t]},emit(t,s){const n=e[t]||[];return v(n,o=>o(s))}}};class ae{constructor(t,s,n,o){this.s=t,this.k=s,this.$dhy=n,this.$exp=o}get v(){return this.$dhy(this.s)}get e(){return this.$exp(this.s)}}class Je extends ae{constructor(t,s,n,o,c){super(t,s,n,o),this.$upd=c}set v(t){this.$upd(this.s,t)}get v(){return super.v}}const ce=e=>{const t=[];let s=[],n=0,o=0;return L(e,(c,d)=>{if(c!==""){if(typeof d=="object"&&d!==null)s.push(c),o+=Object.keys(d).length;else if(d!==m){const i=[...s,c].map((a,p)=>p>0?`[${a}]`:a).join("");t.push(`${i}=${d}`),n>=o-1?(s=[],n=0,o=0):n+=1}}return d}),t.join("&")},ie=e=>{const t=e.trim().split(/[\r\n]+/),s={};return t.forEach(n=>{const[o,c]=n.split(/:\s*/);s[o]=c}),s},O=e=>F(Error,e),le=e=>Z(e)||ne(e);function Ve({onCreate:e=C}={}){return({type:s,url:n,data:o=null,headers:c},d)=>{const{config:i}=d,{auth:a,withCredentials:p,mimeType:y,responseType:u}=i;let A=C,N=C,r;const P=new Promise((h,w)=>{try{r=new XMLHttpRequest,r.open(s,n,E,a==null?void 0:a.username,a==null?void 0:a.password),u&&u!=="json"&&(r.responseType=u),r.timeout=i.timeout||0,p===E&&(r.withCredentials=p),y&&r.overrideMimeType(y);let x=g,M=g;Object.keys(c).forEach(l=>{/content-type/i.test(l)&&(x=E,M=/application\/x-www-form-urlencoded/i.test(c[l])),r.setRequestHeader(l,c[l])}),!x&&(!o||o.toString()!=="[object FormData]")&&r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.addEventListener("progress",l=>{A(l.loaded,l.total)}),r.upload.addEventListener("progress",l=>{N(l.loaded,l.total)}),r.addEventListener("load",()=>{let l=!u||u==="text"||u==="json"?r.responseText:r.response;if(!u||u==="json")try{l=JSON.parse(l)}catch{}h({status:r.status,statusText:r.statusText,data:l,headers:ie(r.getAllResponseHeaders())})}),r.addEventListener("error",()=>{w(O("Network Error"))}),r.addEventListener("timeout",()=>{w(O("Network Timeout"))}),r.addEventListener("abort",()=>{w(O("The user aborted a request."))});let f=o;M&&j(f)&&(f=ce(f)),f!==H&&(f=le(f)?f:JSON.stringify(f)),e(r),r.send(f)}catch(x){w(x)}});return{response:()=>P,headers:()=>P.then(h=>h.headers),abort:()=>{r.abort()},onDownload:h=>{A=h},onUpload:h=>{N=h}}}}export{$e as $,Ee as A,Re as B,Ae as C,te as D,ne as E,Pe as F,De as G,pe as H,qe as I,ye as J,q as K,be as L,Ce as M,k as N,D as O,R as P,U as Q,fe as R,Y as S,Se as T,ke as U,ve as V,Ne as W,Me as X,Je as Y,ae as Z,Fe as _,He as a,z as a0,xe as a1,de as a2,je as a3,Te as a4,ge as a5,H as a6,S as a7,Ve as a8,Q as b,Le as c,T as d,se as e,_ as f,K as g,X as h,j as i,we as j,g as k,W as l,v as m,F as n,J as o,V as p,I as q,Oe as r,me as s,E as t,m as u,he as v,L as w,ee as x,Z as y,C as z};
